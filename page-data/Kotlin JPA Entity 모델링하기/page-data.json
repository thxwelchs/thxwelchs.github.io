{"componentChunkName":"component---src-templates-post-tsx","path":"/Kotlin JPA Entity 모델링하기/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDklEQVQY003QwUoCURiG4WOExAQVuapFkUFg2cbIKDQMLY1iKMukJEvSMLR0FYqg0K42Ea1aSMsuoe6kVXQHYovGWc3pPTATLh6+/3wzwxx+kQqcLiUC9WpyQZ/8eHsXX5/fbinlkGVZgvznnPt6j5rhYtacXpz5ay+56I0M+WJpiqOeYWbIW8xgFn54MY8JLCOMQ/vZFlqYwro43sw8puNl0zMSiVOcG7+9bfIBJ7hHBXdoo4FnbqOySl6Sc3hCCU2hrxZfKxs1uaYFdYqYaZhZcgcHuEaSD9XLZfUTZpW72EceEaQQRVEs+gqh7MpV8yK4N6128NPpjtn7cNu7GoCrb3caRu15mN6ZBzH+B9oQInTA7ID+AAAAAElFTkSuQmCC","width":400,"height":90,"src":"/static/8637e594ca86d58e20988ba8c4cfc1e7/497c6/thxwelchs-logo-v2.png","srcSet":"/static/8637e594ca86d58e20988ba8c4cfc1e7/497c6/thxwelchs-logo-v2.png 1x"}}},"markdownRemark":{"html":"<p>최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요,</p>\n<p>특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다.</p>\n<h1>Entity 모델링</h1>\n<p>먼저 코틀린에서 Entity 클래스를 작성할 때는 <code class=\"language-text\">data class</code> 로 선언 하는 것보다는 일반 클래스로 선언하는 것이 좋습니다. 그 이유는, <code class=\"language-text\">data class</code> 는 <code class=\"language-text\">open</code> 혹은 <code class=\"language-text\">abstract</code>와 같은 키워드를 허용할 수 없으므로 다른 클래스의 부모클래스가 될 수 없기 때문입니다.  그래서 자바에서는 클래스 구분이 없어 신경쓰지 않았던 상속성을 가져가기 위함과, 연관되어있는 다른 Entity가 있다면 지연로딩을 위해서라도 일반 <code class=\"language-text\">class</code>로 선언 후 <code class=\"language-text\">open</code> 키워드를 붙여주어야 합니다.</p>\n<ol>\n<li>JPA에서 지향하는 Entity 객체는 Entity끼리도 상속성을 이룰 수 있어야 합니다.</li>\n<li>지연로딩 시 데이터 클래스에서 작동하지 않는 문제</li>\n</ol>\n<p><br/><br/></p>\n<h2>Entity가 되기 위한 클래스 표준 (Entity POJO Model)</h2>\n<h3>JPA에서 말하는 Entity POJO Model이란? (JPA는 그저 java에서 정의한 ORM 표준)</h3>\n<ol>\n<li>Entity는 final 클래스이면 안된다. ( 메소드나, 인스턴스 변수 또한 마찬가지 )</li>\n<li>Entity는 최상위 클래스여야 한다.</li>\n<li>Entity는 추상클래스, 구체클래스 모두 될 수 있다. (Entity는 Entity class뿐만 아니라 Entity가 아닌 class도 확장 할 수 있으며 Entity가 아닌 class는 Entity class를 확장 할 수 있습니다.)</li>\n<li>Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)</li>\n<li>Enum 또는 interface는 Entity가 될 수 없다.</li>\n</ol>\n<h3>Hibernate에서 말하는 Entity Model이란? (Hibernate는 JPA의 실질적인 구현체)</h3>\n<ol>\n<li>Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)</li>\n<li>Entity는 최상위 클래스 일 필요는 없다.</li>\n<li>기술적으로 hibernate는  영속 클래스 혹은 비영속 클래스 상태의 접근 방법(getter, setter 메소드)을 사용하여 최종 영속상태에 접근할 수 있다.\n그러나 이것은 Hibernate가 Entity의 lazy loading을 위한 프록시를 생성할 수 없게 하므로 일반적으로는 좋지 않다. <strong>즉 하이버네이트에서는 final 클래스가 아닌 클래스를 선호한다! 왜? 영속 상태를 관리하기 위해 proxy를 사용하고, lazy loading을 proxy 객체로 처리해야 하기 때문에</strong></li>\n</ol>\n<p>위와 같이 Entity 클래스가 되기 위해 권장되는 규칙이 꽤나 있는데, 저런 규칙을 지키지 않으면 어떤 문제를 일으키는지 코드로 살펴보겠습니다.</p>\n<p>다음과 같은 양방향성을 가진 두 엔티티가 있습니다. ( 최근 연습중인 도메인 모델이 식당입니다. ㅋㅋ)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 280px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz32SaW/TQBCG/f9/C4iPiKqtBBTRhtKQ017HR3wkTnwkdXwkjpM8rN1CW1ox0sjj1ew7z+yMoq0iboKIr37IRMZaEmGsY/pRQrE/0NjpdJLeRjy3l38PBwong5vY4Z1QUQcf6Q4vKEsVM7WJy/0zwYfr5nrDe8PjzJxyZ4/p2ILuVOPKnjDLtyi9MEFzbRbriLQqSYqMvCpQk5TVtn4laKxXXM5sOr7ORL+kN7hAiM8MnFu8vEBRFzG9sUq82bYt7B/pzbQmKZ8Ej4+C3bDkV5Aw1IaEWclOnjVZXl7hpDuUzizFmIeoloM+9RiZLqaMf3oJ2YFXNkgqdAmhWxarYk9enyirgxSTgpsK5bsdoRsWEyHwXZdFsCANF/T9mCvhtdTNcLb1kY28+Gmacu7l2BKiN1Txo1Wb4+f7VlT5EpT4iwhT6ETJ6i9JU81b521cH0+tN3a3LLgOCpZhhO84zOZzdnlGcF/IodQo4r7CcmZYhkFVP/XoSsG0Oj5txJ83lILnbsZsscSaCISu49kWbnTPvDigfJPVnFmAoU+YBwGhrHyodrIFOZTt66Fcz3M+mClj0+G2N6TT7TFWNX7oLk4mCS+9DD+MEarcQ+m6blDKFhr8t9bGk+T9qESLMtRwg4hzhIz7YU4s85UziS9sn/FoyJ2sNjFNlpLU2exfrM3z7/9MuZVvosVl6/p6x2gpC6y2jJJtO9l/CY+P7b/lTc5vjTuKy4ma6AgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntity모델링하기/Untitled.png\"\n        title=\"img/KotlinJPAEntity모델링하기/Untitled.png\"\n        src=\"/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png\"\n        srcset=\"/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png 280w\"\n        sizes=\"(max-width: 280px) 100vw, 280px\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 309px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 178.15699658703073%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEfElEQVRIx52WaXPiRhCG/UdSe9hGHAZzCSTrRAIJSYC4JOylWBfejbdclcr///ame0BexRx28qGrh2H0qmf6mW5dFMsdHDOpJOPUf+fWXpxbwP7quolrqb23Fq7YCq3dmHyh+Hst28WptxaKbdTqGsJRDNf14Tie8P3+EAMvgNv34ZFX7+z3I8wE6y0Tm/Ucs0mINE2xXMyxXC6QrlJMJ2MkyYJe4Im1HxCUKUIVj4mDJF3CtB3c6SZUMt2y4QwoYjLddPYRyu8LVmsKHuY+lqsHGFYfhumiR1vXyDuDAH0vhKL1Pp4Utq8FSkyhiS9XDfTMIf7evohxkdbwS/NrTyblLTIljpjmqpUOGjddMc5nNrOjEf5Gpp1b3BYiFTqnG7JMsHyjvNrZCJmvgRdhPosxGo0Rx1OMxxPEkxgTMh6HQQBNM4SZpoXarSqO4IxggHQ2FILTKYmMRsLH8QSj8ZhEI+i6LsyySLB+d1rwkhLhOzqev7mYLldIH9Z43G4xXy6hEDaMS98bwgtCDIYBBv7wvOC1JONONRB5Dj04ptsyxzCaIiKbhDHx6BJ/A2iGK8bsbwixo2eYJeWa3na5R4bv8x+fq9DVPl7WP/Dpsg6pKIsbktnRLEtvcMjoF3NkFZ6jFxRKh8i8i02lqqBSU8l3hZWJvzptq0HZrJDnM8vslozROYkNH+50NscqiTFfLLBKE6TJEgsqDgkVhygKKbvaa5YNQ0ezpZ1Iigi/g2DoYzpyRDbDKMKQuPM8HwF734dumDAJl8w326cE6dyuSwrmoY5f30Ostz8FMj9+veDpaQvD7glUvCCiAuHDD0cCn2ZbPxMheVnWoagmAj/G03oLWbFxp7lod0w0ZYNg9vA9XaPe1CB3LcJGPTxDab9djpLf9vmyga5sYzP7hk9fantEZHwljNpNE4/zNb5S5clXnYuzTYmqS5nma1ITpUr3YCdVnsvNiwjzDHHjYeNIGOwyRdvYP5BFkRmXtM3mGdVb7XgL4Emr58OmiqwbPWo+FjS6fipZVzHoPA10uoaIdCcoo87jfbSHghRZOE0wmi5wv0oQhVSeiDVmbMccmyGA53pYpmduK51/FducIKFS7CAOLCRxH+FkhojKlmH1hPX6A1FhTNsVNyIT5AgLb87+VfBS6mA5poymPh42WyT391AN2rZpw3YH6PsBzF5fXMEsmnrl5JcDC3axii2CeYTN0zPGVEhdvhl0S7jeMby2M3i9s9I+wpOCzF+3S9WXWqRm+lAUCx1zDKU3E1AzvC15lxTe5k2FzzDXsDLBPMyMylWhvcenLcpUga6hVNEgVS2Bjuh+9GBrv3XpVFJ2oofXsMRwVwhudYwyZZhhr1M5q5Kg+H3q6+vYTWE2my0dMfUVbkzz+Yy63oQa1K5xaZr5sc+5vGCDBBmjAWEzDIaE0whhGJExp9b/E/xrbeD+IcH255/UsCJYTl9knTGSSv9BkBdyWepZVERtDz03hKo56BAB7LmU5RNzVjCfvV33a+Fy/zUriofUPvh65fE/4gOQAzuy6aEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntity모델링하기/Untitled%201.png\"\n        title=\"img/KotlinJPAEntity모델링하기/Untitled%201.png\"\n        src=\"/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png\"\n        srcset=\"/static/33bdc4b207ba3415ae591fd36af777cc/8890b/Untitled1.png 293w,\n/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png 309w\"\n        sizes=\"(max-width: 309px) 100vw, 309px\"\n      />\n  </a>\n    </span></p>\n<p><br/><br/></p>\n<deckgo-highlight-code language=\"kotlin\"  >\n          <code slot=\"code\">@Entity\ndata class Restaurant(\n        var name: String = &quot;&quot;,\n        @OneToMany(mappedBy = &quot;restaurant&quot;)\n        @OrderBy(&quot;name asc&quot;)\n        var menus: MutableSet&lt;Menu&gt; = TreeSet()\n): MutableEntity() {\n\n        fun addMenu(menu: Menu) {\n                menus.add(menu)\n                menu.restaurant = this\n        }\n}\n\n@Entity\ndata class Menu(\n        var name: String = &quot;&quot;,\n        var price: BigDecimal = BigDecimal.ZERO,\n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = &quot;restaurant_id&quot;)\n        var restaurant: Restaurant\n): MutableEntity()</code>\n        </deckgo-highlight-code>\n<p>보시는 것과 같이 두 엔티티는 <code class=\"language-text\">@OneToMany</code>, <code class=\"language-text\">@ManyToOne</code> 으로 양방향을 가지고 있고, <code class=\"language-text\">LAZY fetch</code> 되게 되어있습니다. (<code class=\"language-text\">@OneToMany</code>에서 fetch 는 default가 LAZY 방식이므로 생략 하였습니다.)</p>\n<p>앞서 말씀드렸다시피 data class는 <code class=\"language-text\">open</code>이나 <code class=\"language-text\">abstract</code>가 될 수 없고 기본적으로 <code class=\"language-text\">final</code>로 선언되어집니다. 위 두 클래스를 자바 코드로 변형해보면 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 427px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQ4y5WT6W6bQBRGeZXW68CwDjDMAGYHx3Gj2q0T1eom9f2f4es1iaOolWr642gkNPrm3AUjlhUsrsCdFNwm3BSWrWE5+vm84rw5Ry53/75nHPrvOA7fsOvO43nffsGx/Yph/wPN4Rf27RlP/U/shjPyzycUT48oTidsPj2i2T+gqA7IyyM2Lxh+UCL60EIfesRDDetqaKsR00peYfxPJNjl+xsMEddQUY0q7qCTFjbhb+5RpRlKnWO+irBi0zFM6p+4q6AeWkRdBdPNwMiMUY9MsrBtSXaSLsdYm7cxuJMhIcsy6qBkg2j7EYIM/XwHGecolUIQaCzp9UmBNgWyJgPva3AydPVz/0ZTsrR4Ds7TsZyJhinY3IcTNPDI0rJyeKqHn20RXCzDLYTfkGE4MZB2z9EK64Ca6kdggvq1CjCbB5jTQ7NFgMVKjJevjb8ZyKhMr+/hth28IkecaIgoRUCEcQrXV/9XsjnzYbs1bI+mzCSihAaV5pAqo3CqwE1eA28b0lCcmppf0CC0xHItMKMHRhYC7+YC75ch7WM4KdSwqGRVtmiHO2T1AEdR2YSbdPBFhlzqkVRmNHF52/Dykztr2jWWwbVofUQJO6zAwxKOpxELBUlEQr8s+L8DfwPmdb+B22ZB2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntity모델링하기/Untitled%202.png\"\n        title=\"img/KotlinJPAEntity모델링하기/Untitled%202.png\"\n        src=\"/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png\"\n        srcset=\"/static/8fd149d918a4c43790e050369251249f/8890b/Untitled2.png 293w,\n/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png 427w\"\n        sizes=\"(max-width: 427px) 100vw, 427px\"\n      />\n  </a>\n    </span>\n<br/><br/>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 517px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.43344709897611%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz31TW5KjMBDjMhPAGIMJxphnAoFkJvna+99FK5NNDVu7mQ9hU2B1S2oHTk+w1RmmPKFSA+p0RFrOyJorVL3A5Cf0+QxlOoixQ9IRbQupKkSxQSi4CkNUG4IkdehuK4ZlQUbSVI+wpoXKG0RJDZFYJMJyzwNyB/GGUCiHqp9g2jPyYWInJzjTIE0tDlGJ0B96gxfJfh/4yqLuoK8P6OkGKWsUVYPKdbBEnPx9YI898WsN4sTQD4s4ZVeUKdKa3RGZ3ciiH8j+22GcO6hfE9KvAdq2MGZCIWm8fN/Zi0TSLqkaWrP3kBKHccFpXJnsDGcbhsKf4m9JYcSfo9d7+Y+H+yJBzE0uKDeidzm9zNgxA4nZoZe8eZiVOBBh+rRGSLcRHEjwERLRd4FAcDT8LJbVgqpcUeYXdMUXrL3C1Xc09Q3N+oC5fKKkkiPn07oZth6gtIM+PiGkfXZ4oISEPgzDHadpQXe+oJ3v6JsHpa/IszNKveLIQlr3kJzbVNXIdQNFNbpsUOwJ/UNlLUZ3JdEAexuhlh7HYUBWOCRMXPBWmKxHwRC8TB+Cn1G/bpLDvWSG4iffh/CxwX+kb3+mP+ZNiYTdVrHtqx+T/w3wq3sXVMLHQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%203.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%203.png\"\n        src=\"/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png\"\n        srcset=\"/static/51269c629f86405c63734256224f326a/8890b/Untitled3.png 293w,\n/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png 517w\"\n        sizes=\"(max-width: 517px) 100vw, 517px\"\n      />\n  </a>\n    </span></p>\n<p>위 코드는 IntelliJ에서 kotlin → kotlin bytecode → decompile java code 한 결과라서 가독성은 떨어집니다.</p>\n<p>이제 간단한 repository test를 통해 Menu Entity를 조회 하고 Restaurant Entity를 지연로딩 해보겠습니다.</p>\n<p><strong>코드</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 623px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.549488054607508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQY022Q207CUBBF+zXa1tJz6b2nV1AUsC0ICVH//zuWQ3gx0YeVmXMm2bNne6YZSWxLkXfYpEOZDmM78qynkHcptSp6Mum1zGJ1oyWO/7KSmfc2LpynD077he/jzOdJOE5czzOHy5GL1K9l4TTP9NOM2y2U40z1Ot3Z3qlf3nH9Ac+EDqMHYqEs1uKsE8fiQjtsXpKkJVVWEekK24rQ5kqUDDyolEeV39E5vs4IogwvVCVRWrPKHbF1cnKDThqet2v2uw3j2GOMk3NbtB0ljoEgFBE/w//Foy9/QY7nq4IgrQhuLqSPVSVZiKumpR0kx7rhaVXLohZlbzk2+KEIiKj/Dz94qaYBX8NS2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%204.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%204.png\"\n        src=\"/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png\"\n        srcset=\"/static/c52bb4a495e7a2eba3686514cc5a7fea/8890b/Untitled4.png 293w,\n/static/c52bb4a495e7a2eba3686514cc5a7fea/1f316/Untitled4.png 585w,\n/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png 623w\"\n        sizes=\"(max-width: 623px) 100vw, 623px\"\n      />\n  </a>\n    </span>\n<br/><br/>\n<strong>결과</strong></p>\n<p>정상적으로 초록막대와 함께 query 로그도 한번만 찍힌 것을 확인했습니다. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.897610921501707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI1y2MWw6EIBAEPZKoCCgPWbIqunv/45Sj8aPS00lNN7n8ieWH9V+cFWJlCAc6nQxuJaSDlE/icjD5jSnsT9p5RZsPbZ9QL20XaULcCblipoIRwYVNBitqzHR6kcHK7fiXWca8OM8teXfjCqP8qj5yAa+IRNWZwuohAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%205.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%205.png\"\n        src=\"/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png\"\n        srcset=\"/static/4d8d3ec05c6b7a77bbcd0c873245762f/8890b/Untitled5.png 293w,\n/static/4d8d3ec05c6b7a77bbcd0c873245762f/1f316/Untitled5.png 585w,\n/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png 1170w,\n/static/4d8d3ec05c6b7a77bbcd0c873245762f/e1fbe/Untitled5.png 1755w,\n/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png 1803w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1146px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.597269624573375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQY02VQ2XKDQAzjc9qchDRJCezNvQTKtDP9/y9Rbe9jHzSW7ZUsyJrxF6FdYNwM3yyw4YW23+DCIn1oV2gXBY52ykz0NsqONcpO0HYSnhcambYRgZbajlIZY/xB062CftzocTLhw7UehLfdl1RFvTIjLPG33T0Z+uYlQ658eZi+kyGl64ZNhNZH6UXsZzJcpWqTEjriu8NnMmSxFdGclvRpxqZULsyoVC/gpGyoCcw5bVl1qOpOZsfzExn/kycNbg+P683ictWCw6nE+/4hV/fH8h94f77UwvNCofgwOOUV/gBGgq9v8Hjm2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%206.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%206.png\"\n        src=\"/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png\"\n        srcset=\"/static/b83ee2aa872e5a085123fb2f2d9838b4/8890b/Untitled6.png 293w,\n/static/b83ee2aa872e5a085123fb2f2d9838b4/1f316/Untitled6.png 585w,\n/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png 1146w\"\n        sizes=\"(max-width: 1146px) 100vw, 1146px\"\n      />\n  </a>\n    </span></p>\n<p>그럼 정말로 문제 없는걸까요? 더 확실히 테스트해보기 위해 직렬화가 필요한 controller 테스트를 해보았습니다. ( 이 테스트는 service를 mocking하는 단위테스트로 작성하지 않고, 실질적인 테스트가 필요하여, 통합테스트로 진행했습니다. )</p>\n<p><strong>코드</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 786px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.96245733788396%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY01WQaW6EMAxGOQ3DkgDDkNVJ2IqQqkqVRnP/q3w10Fbtj6fYUfK8ZMv2grxHNMpDCINHZ0Eck/bwfJqHO+MDzXFRKUZ/o3Ar9Z9cI1v3F0QT0HcOlgUDfzSOEGxAMAHOeIwUQIa4mMGNJXl5iNQ/0a9wnJ+oGo+au+tah2qOqJcIEQm9W6DUhPZhIe4WudQ8hYWU7nx/iPPikv+QjcsTNQuLiqsXGnJNaLaEdmdSRPAzfEiI8wg5RQx8mmmGDRM+PjdQSihrfXJ1yELR0pmUTO0Jgi4kjz8MvA5F5xoGXkPP45fe8875zkRoF7G/r3jbZ1RC4wsiuaIY3bS/sQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%207.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%207.png\"\n        src=\"/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png\"\n        srcset=\"/static/1a3bfb85dd69a1e72e47a3eeaf800704/8890b/Untitled7.png 293w,\n/static/1a3bfb85dd69a1e72e47a3eeaf800704/1f316/Untitled7.png 585w,\n/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png 786w\"\n        sizes=\"(max-width: 786px) 100vw, 786px\"\n      />\n  </a>\n    </span>\n<br/><br/>\n<strong>결과</strong></p>\n<p>테스트의 결과는 초록막대인데.. 찍힌 로그가 뭔가 이상합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 934px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.470989761092156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQoz1VR2W7DMAzLH21t4+byGTuu3RwDhv3/r3C0M3TbA6GmlCjSanz+QkyfcP6ACwds2GHdDmme0G6DmfdaVYElzFohNXl+1x72lz7D381JZEj14ECGMB5mTLi2BqOM0CajUwlCZ7TTA5ebIjTeLhKimymcoIhSrX+i0XaFXw4YVus39D7CqxXi7ugkY/Y7BnI9XXRc3gqLllwR7ccFdt7giFJ9PNCM8lHdDdOCkbWV3DrE6rAfQuXudCaIlgJXCp0OVXVYUkzUKDrKJDSTOi1XQnNIzVB9rINVkJyYIhcl3Ch4uSq8EzUynf4K8nksBbVbEZYPPujKozDen8jaPnms7V/kmzB/IgcecH1FDiVycVgevmyR5QA6QE+pDp1bM3r2dCrjzp7y/0vwJ4GqyLX3G2AW83caeuYMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%208.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%208.png\"\n        src=\"/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png\"\n        srcset=\"/static/439971cdb4b4dfdb354a47926869f71c/8890b/Untitled8.png 293w,\n/static/439971cdb4b4dfdb354a47926869f71c/1f316/Untitled8.png 585w,\n/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png 934w\"\n        sizes=\"(max-width: 934px) 100vw, 934px\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.501706484641637%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVQY002QWQ6DMAxEOVCrbrQBsrMEKFSI+x9maptS8WFNZM+8xMlubsJZNXB+RIiTqHUDKpNg7ICiaqVK3cFQn7XUiTwjKlJVNFDlNr/nHtnFjDg9goBcGCVkbA9NsFDPcokPbzmnYRWNzQepX0lnWMp58nD/qSKyKwPzKANHQQFSaYKykXvuF2q75b9JmxZR3oL97MtfYQcGWZPNO+wItEcgv3YH1huQ5zzT9E1fJwGMjbUIB58AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%209.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%209.png\"\n        src=\"/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png\"\n        srcset=\"/static/ac5077b77b8167a014b9f2cbf86f34b9/8890b/Untitled9.png 293w,\n/static/ac5077b77b8167a014b9f2cbf86f34b9/1f316/Untitled9.png 585w,\n/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png 1170w,\n/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png 1592w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n      />\n  </a>\n    </span></p>\n<p>객체를 직렬화 하기전까지는 서로 참조하는 값을 계속해서 참조 할 일이 없지만, 직렬화를 하기 위해 참조하는 과정에서 뭔가 하이버네이트 엔진이 HIkariProxyResultSet으로 부터 결과 값을 가져오는데 무한적으로 재귀호출을 하는 것 같습니다. ( 개발환경에서 허용된 메모리만큼 재귀호출이 되다가 결국엔 StackOverFlow가 발생합니다. 내부적으로 예외처리가 되있어 직접적으로 에러로 표시되진 않는 것 같습니다. )</p>\n<p>로그를 자세히 보시면 HikariProxyResultSet의 HashCode가 계속해서 바뀌고, 계속해서 새로운 객체를 참조하여 DB 데이터의 결과값을 가져오려고 시도합니다.</p>\n<p>이 문제를 해결하기 위해 제가 시도한 방법은 다음과 같습니다.</p>\n<ul>\n<li><code class=\"language-text\">data class</code> 를 <code class=\"language-text\">일반 class</code> 로 변경 후 <code class=\"language-text\">Hibernate</code>가 <code class=\"language-text\">Lazy load 객체</code>를 가져올 때 정상적으로 작동 할 수 있게 open 키워드 달아주어 상속 가능하게 만들기</li>\n<li>직렬화 시 무한 재귀에 빠지지 않게 하기 위해 <code class=\"language-text\">HibernateModule</code>을 빈으로 등록하여 jackson에configuration 하기</li>\n</ul>\n<h3>Data class → class 로 변경 후 open 키워드 달기</h3>\n<p>먼저 data class를 일반 class로 바꾸기</p>\n<deckgo-highlight-code language=\"kotlin\"  >\n          <code slot=\"code\">@Entity\nclass Menu(\n        var name: String = &quot;&quot;,\n        var price: BigDecimal = BigDecimal.ZERO,\n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = &quot;restaurant_id&quot;)\n        var restaurant: Restaurant\n): MutableEntity()\n\n@Entity\nclass Restaurant(\n        var name: String = &quot;&quot;,\n        @OneToMany(mappedBy = &quot;restaurant&quot;)\n        @OrderBy(&quot;name asc&quot;)\n        var menus: MutableSet&lt;Menu&gt; = TreeSet()\n): MutableEntity() {\n\n        internal fun addMenu(menu: Menu) {\n                menus.add(menu)\n                menu.restaurant = this\n        }\n}</code>\n        </deckgo-highlight-code>\n<p>아까 위에서 소개해드렸던 JPA 표준 POJO Model 객체가 되기 위해 </p>\n<p>일일이 entity 마다 open 키워드와 빈 생성자를 작성하긴 귀찮으니,  kotlin jpa plugin 을 사용하여 자동적으로 모든 entity에 적용 시켜주겠습니다.</p>\n<p>적용하는 방법은 <code class=\"language-text\">build.gradle</code>(groovy dsl) 혹은 <code class=\"language-text\">build.gradle.kts</code> (kotlin dsl) 에서 설정 할 수 있습니다. </p>\n<p>저는 kotlin dsl을 사용하고 있으므로 다음과 같이 작성했습니다.</p>\n<p><em>build.grade.kts</em></p>\n<deckgo-highlight-code language=\"kotlin\"  >\n          <code slot=\"code\">plugins {\n        ...\n    kotlin(&quot;plugin.jpa&quot;) version &quot;1.3.61&quot;\n}\n\nnoArg {\n    annotation(&quot;javax.persistence.Entity&quot;)\n    annotation(&quot;javax.persistence.MappedSuperclass&quot;)\n    annotation(&quot;javax.persistence.Embeddable&quot;)\n}\nallOpen {\n    annotation(&quot;javax.persistence.Entity&quot;)\n    annotation(&quot;javax.persistence.MappedSuperclass&quot;)\n    annotation(&quot;javax.persistence.Embeddable&quot;)\n}</code>\n        </deckgo-highlight-code>\n<p>위와 같이 작성하고 나면 <code class=\"language-text\">Entity</code>, <code class=\"language-text\">MappedSuperclass</code>, <code class=\"language-text\">Embeddable</code> 의 어노테이션이 붙은 클래스에 빈 생성자와 open 키워드가 자동으로 정의됩니다.</p>\n<p><code class=\"language-text\">open</code> 키워드를 코드에서 정의하지 않았는데도, 자바로 변환한 코드에서는 원래의 <code class=\"language-text\">final class</code> 에서 <code class=\"language-text\">일반 class</code> 로 변경되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 841px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.58361774744027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQoz51T23KbMBTkY+qYOxLohgCBuDh2Mm5Tp86kM/3/39gecJrkqdPpww5iVqz27Iqg9VfY+oR+/Inx/gV+/gF//IVuvMC0Z2h7giZe1Q+omyO8/4pxuaIdT7DdEULPG/9nXzAdX9GYB2ShRJIZZIVFltcIY4m7sCKId+z2HNrMcPMFyeSQiBpRrLGPJPbE7yOBwC+vkN0BETPYkegHKRFGb+8kHsZqO0CbA7r+CSnrwMoBedETv3JyQ3B+vEJID171kLxFXjpktI5Tg5AQpeQiMe+CUt8EY+bAKgurFLTQqKWBpWdwuif7qUWcaZTOIbcTGLkomwXCncCFR0yCt5FLKBp58BewogVjDSrtoEQHYVpw2yA4UBG88ijqHuY4oxk8bVpgx0eYZiYXHZK8oWxbythu4Tv3BGkHGDch5T0q4kPKf8/I4Xx4gab2ynaG6hZqakSllg1cTChXyBt4NVKzZzTdN5S1g/Uzck0cjZ6lirKnDHv/jJRO2N2Vt7E+tbq29rGW+EJ7JLl3/XdkoqGIJhIcUcgRJXfbnmAYn2mcbvt4Df5v2EqhfFfBmBskpqORLdItjma7apvDNZ/VxT8JvrUcFgqx7pAzBcYVierbtfkfwdVhPdAFX+hPMWveHoIcF0WN35iwZkc1tYO4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%2010.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%2010.png\"\n        src=\"/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png\"\n        srcset=\"/static/49db6c6a6dd1eca5723f0a9bfcba3127/8890b/Untitled10.png 293w,\n/static/49db6c6a6dd1eca5723f0a9bfcba3127/1f316/Untitled10.png 585w,\n/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png 841w\"\n        sizes=\"(max-width: 841px) 100vw, 841px\"\n      />\n  </a>\n    </span></p>\n<h3>Jackson configuration</h3>\n<p>아직 lazy 로드 되기 전의 proxy 객체 또한 직렬화 하려고 하면 에러가 나기 때문에 다음과 같은 솔루션으로 직렬화 시 문제를 해결합니다. ( lazy 로드 되기 전의 proxy 객체는 null 처리 해줌 )</p>\n<p>저는 hibernate5 버전을 사용하고 있으므로 다음과 같이 작성 했습니다.</p>\n<p><em>build.gradle.kts</em></p>\n<deckgo-highlight-code language=\"kotlin\"  >\n          <code slot=\"code\">dependencies {\n    ...\n    // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 직렬화를 가능하게 해준다. (jackson ObjectMapper support)\n    implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:2.9.8&quot;)\n}</code>\n        </deckgo-highlight-code>\n<p><em>JacksonConfig.kt</em></p>\n<deckgo-highlight-code language=\"kotlin\"  >\n          <code slot=\"code\">@Configuration\nclass JacksonConfig {\n\n    @Bean\n    fun hibernate5Module(): Hibernate5Module {\n        // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 값이 비어있더라도 직렬화를 가능하게 해준다.\n        // 이 모듈을 bean으로 등록 안하면 hibernateLazyInitializer 라는 하이버네이트 프록시 객체의 프로퍼티를 직렬화 하려다가 에러남\n        return Hibernate5Module()\n    }\n}</code>\n        </deckgo-highlight-code>\n<p>위 처럼 변경해준 뒤 다시 테스트를 돌려보면</p>\n<p>정상적으로 테스트 통과 후 한번만 쿼리하는 것을 볼 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.74744027303754%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVQY0z2Pa5KDIBCEvU92NaIgMCKoQUzMPir3v0vvOKnaH10NNHz0VCE/QG4DhR0+HtDpCza/YNITIR1Y849ouX0jlxevf2H9ht4sUH2C0gltF3FlNWpCpcMCrRL0wE4bal/QUMGFw8GtCPGOMRTxOB/8cRFNvBelh+Sqj7h8WlQ2Zgx6lseGgS3tUOMdDZ85n/8hnjPrbnCUuWEWgOJWbTeh45an6iu9gaafYewKy2OfwJZHqvnyCTibOdoEOk67wGQaM7+dJbCG8FF7/AHWzIiV94XDhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%2011.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%2011.png\"\n        src=\"/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png\"\n        srcset=\"/static/db10cb8de14458109af3d0b7d44c30ad/8890b/Untitled11.png 293w,\n/static/db10cb8de14458109af3d0b7d44c30ad/1f316/Untitled11.png 585w,\n/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png 1170w,\n/static/db10cb8de14458109af3d0b7d44c30ad/e1fbe/Untitled11.png 1755w,\n/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png 1796w\"\n        sizes=\"(max-width: 1170px) 100vw, 1170px\"\n      />\n  </a>\n    </span>\n<br/><br/>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.15699658703072%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQ4y41U2XKjMBDkL9YGDAgQ92HA+I6DXescm71q9/+/pbelBCeVSmr90KWRkFrTPSOMKIogPA+e62gIwVgIOFwboea+718FIwh8HhKQWQmZVxCBROi5aKIQXSLRxSEiXmLPZphdAcNjBsLn4eMTlve/kBQVsiTC47DCcdNq9O0cruteBUNJDGSCZn9Gtd6jXO5RtC1un05otwv0hyWatoFlMwPHgeP8h9CjPE/4yNs16u0R88MD2uERWbdGlaYoma3kpUkYIKI9IWPHmRHOh9CSVTCzLQgZoTv9QL0bELJYXRbh2Ba4W80xNAX2dY5VlSEksfJLn/vIQ5Wqw4kf5egf/qA9nBEXNQoZ4JZEWRzBtOxLYT7L7pLhKyG9HL6xMCQpYvje87r6PpLZI+w38Qs+yDBBsbzRXi6Ge3p5B5lmSEOf0ktsKXdTpujyBDvK31Qp+ixGz7lac8n16uHMJmGKlh4uzz/Rf+X48BtxnqNmP57oZUzvfO4PWBjpCw1VpEBDQHEZKrtQSvhctCyLDT5nVoVu9CBOdfZRIJAQ6uL30t/HhstNMqZ36xv4IYk9C7Y5gTn5wgtMTFmMiWlpqF40bZvjM1SsivW2UIbHDDy+lHp3Yi+yiddb1CQPk0zLaelRm0aYU7bycs64iiUKPk0Vq29KxUiqJav3my926IYnevgdy8e/yJsFPRM49zWLkaLhwTJ+JmleSBVZxwvVT+FCqJ6e43qoNkdW94Ryc4tqO+gMc/bhSlWPG5X0UfIoW8l9K1l7GLMgNl+JZU5hTScX6DUSTN959BnGPf8As5LKhBpuTWoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img/KotlinJPAEntityModeling/Untitled%2012.png\"\n        title=\"img/KotlinJPAEntityModeling/Untitled%2012.png\"\n        src=\"/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png\"\n        srcset=\"/static/32366886ed6e3611e910d59884b9e7ce/8890b/Untitled12.png 293w,\n/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n      />\n  </a>\n    </span></p>\n<p>실제로 데이터가 조회되었고, lazy fetch 모드로 설정되있고, 아직 꺼내지 않은 객체 restaurant.menus에 대해서는 null 처리가 되어있습니다. </p>\n<p>하지만 여기서 끝이 아닙니다. 현재까지는양방향관계에서  <code class=\"language-text\">@ManyToOne</code> 를 가진 쪽의 엔티티 조회에서 문제를 해결했는데요, </p>\n<p>아직 <code class=\"language-text\">@OneToMany</code>의 관계를 가진 엔티티를 lazy load 조회 할 때 문제가 있습니다.\n<br/>\n이 부분까지 해결하기 위해서는 여러가지의 솔루션이 있는데 그 중 하나를 다음 포스팅에서 소개하겠습니다.\n<a href=\"https://thxwelchs.github.io/JPA%20%EC%96%91%EB%B0%A9%ED%96%A5%20Entity%20%EB%AC%B4%ED%95%9C%20%EC%9E%AC%EA%B7%80%20%EB%AC%B8%EC%A0%9C%20%ED%95%B4%EA%B2%B0/\">JPA 양방향 관계 무한재귀 해결 포스팅 보러가기</a></p>\n<p>감사합니다.</p>\n<h1>참고</h1>\n<blockquote>\n<p>하이버네이트 공식 엔티티 모델링 가이드 <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity\">https://docs.jboss.org/hibernate/orm/5.4/userguide/html<em>single/Hibernate</em>User_Guide.html#entity</a>\nkotlin compiler-plugins(no-arg, all-open) <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\">https://kotlinlang.org/docs/reference/compiler-plugins.html</a>\n코틀린 JPA <a href=\"https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa\">https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa</a>\n객체지향적 상속성 활용한 엔티티 설계하기 <a href=\"https://victorydntmd.tistory.com/209\">https://victorydntmd.tistory.com/209</a></p>\n</blockquote>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Entity 모델링"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 코틀린에서 Entity 클래스를 작성할 때는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"data class"}]},{"type":"text","value":" 로 선언 하는 것보다는 일반 클래스로 선언하는 것이 좋습니다. 그 이유는, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"data class"}]},{"type":"text","value":" 는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"open"}]},{"type":"text","value":" 혹은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"abstract"}]},{"type":"text","value":"와 같은 키워드를 허용할 수 없으므로 다른 클래스의 부모클래스가 될 수 없기 때문입니다.  그래서 자바에서는 클래스 구분이 없어 신경쓰지 않았던 상속성을 가져가기 위함과, 연관되어있는 다른 Entity가 있다면 지연로딩을 위해서라도 일반 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":"로 선언 후 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"open"}]},{"type":"text","value":" 키워드를 붙여주어야 합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"JPA에서 지향하는 Entity 객체는 Entity끼리도 상속성을 이룰 수 있어야 합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"지연로딩 시 데이터 클래스에서 작동하지 않는 문제"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Entity가 되기 위한 클래스 표준 (Entity POJO Model)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"JPA에서 말하는 Entity POJO Model이란? (JPA는 그저 java에서 정의한 ORM 표준)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 final 클래스이면 안된다. ( 메소드나, 인스턴스 변수 또한 마찬가지 )"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 최상위 클래스여야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 추상클래스, 구체클래스 모두 될 수 있다. (Entity는 Entity class뿐만 아니라 Entity가 아닌 class도 확장 할 수 있으며 Entity가 아닌 class는 Entity class를 확장 할 수 있습니다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Enum 또는 interface는 Entity가 될 수 없다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Hibernate에서 말하는 Entity Model이란? (Hibernate는 JPA의 실질적인 구현체)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Entity는 최상위 클래스 일 필요는 없다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"기술적으로 hibernate는  영속 클래스 혹은 비영속 클래스 상태의 접근 방법(getter, setter 메소드)을 사용하여 최종 영속상태에 접근할 수 있다.\n그러나 이것은 Hibernate가 Entity의 lazy loading을 위한 프록시를 생성할 수 없게 하므로 일반적으로는 좋지 않다. "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"즉 하이버네이트에서는 final 클래스가 아닌 클래스를 선호한다! 왜? 영속 상태를 관리하기 위해 proxy를 사용하고, lazy loading을 proxy 객체로 처리해야 하기 때문에"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위와 같이 Entity 클래스가 되기 위해 권장되는 규칙이 꽤나 있는데, 저런 규칙을 지키지 않으면 어떤 문제를 일으키는지 코드로 살펴보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같은 양방향성을 가진 두 엔티티가 있습니다. ( 최근 연습중인 도메인 모델이 식당입니다. ㅋㅋ)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 280px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 58.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz32SaW/TQBCG/f9/C4iPiKqtBBTRhtKQ017HR3wkTnwkdXwkjpM8rN1CW1ox0sjj1ew7z+yMoq0iboKIr37IRMZaEmGsY/pRQrE/0NjpdJLeRjy3l38PBwong5vY4Z1QUQcf6Q4vKEsVM7WJy/0zwYfr5nrDe8PjzJxyZ4/p2ILuVOPKnjDLtyi9MEFzbRbriLQqSYqMvCpQk5TVtn4laKxXXM5sOr7ORL+kN7hAiM8MnFu8vEBRFzG9sUq82bYt7B/pzbQmKZ8Ej4+C3bDkV5Aw1IaEWclOnjVZXl7hpDuUzizFmIeoloM+9RiZLqaMf3oJ2YFXNkgqdAmhWxarYk9enyirgxSTgpsK5bsdoRsWEyHwXZdFsCANF/T9mCvhtdTNcLb1kY28+Gmacu7l2BKiN1Txo1Wb4+f7VlT5EpT4iwhT6ETJ6i9JU81b521cH0+tN3a3LLgOCpZhhO84zOZzdnlGcF/IodQo4r7CcmZYhkFVP/XoSsG0Oj5txJ83lILnbsZsscSaCISu49kWbnTPvDigfJPVnFmAoU+YBwGhrHyodrIFOZTt66Fcz3M+mClj0+G2N6TT7TFWNX7oLk4mCS+9DD+MEarcQ+m6blDKFhr8t9bGk+T9qESLMtRwg4hzhIz7YU4s85UziS9sn/FoyJ2sNjFNlpLU2exfrM3z7/9MuZVvosVl6/p6x2gpC6y2jJJtO9l/CY+P7b/lTc5vjTuKy4ma6AgAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntity모델링하기/Untitled.png","title":"img/KotlinJPAEntity모델링하기/Untitled.png","src":"/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png","srcSet":["/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png 280w"],"sizes":["(max-width:","280px)","100vw,","280px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 309px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 178.15699658703073%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEfElEQVRIx52WaXPiRhCG/UdSe9hGHAZzCSTrRAIJSYC4JOylWBfejbdclcr///ame0BexRx28qGrh2H0qmf6mW5dFMsdHDOpJOPUf+fWXpxbwP7quolrqb23Fq7YCq3dmHyh+Hst28WptxaKbdTqGsJRDNf14Tie8P3+EAMvgNv34ZFX7+z3I8wE6y0Tm/Ucs0mINE2xXMyxXC6QrlJMJ2MkyYJe4Im1HxCUKUIVj4mDJF3CtB3c6SZUMt2y4QwoYjLddPYRyu8LVmsKHuY+lqsHGFYfhumiR1vXyDuDAH0vhKL1Pp4Utq8FSkyhiS9XDfTMIf7evohxkdbwS/NrTyblLTIljpjmqpUOGjddMc5nNrOjEf5Gpp1b3BYiFTqnG7JMsHyjvNrZCJmvgRdhPosxGo0Rx1OMxxPEkxgTMh6HQQBNM4SZpoXarSqO4IxggHQ2FILTKYmMRsLH8QSj8ZhEI+i6LsyySLB+d1rwkhLhOzqev7mYLldIH9Z43G4xXy6hEDaMS98bwgtCDIYBBv7wvOC1JONONRB5Dj04ptsyxzCaIiKbhDHx6BJ/A2iGK8bsbwixo2eYJeWa3na5R4bv8x+fq9DVPl7WP/Dpsg6pKIsbktnRLEtvcMjoF3NkFZ6jFxRKh8i8i02lqqBSU8l3hZWJvzptq0HZrJDnM8vslozROYkNH+50NscqiTFfLLBKE6TJEgsqDgkVhygKKbvaa5YNQ0ezpZ1Iigi/g2DoYzpyRDbDKMKQuPM8HwF734dumDAJl8w326cE6dyuSwrmoY5f30Ostz8FMj9+veDpaQvD7glUvCCiAuHDD0cCn2ZbPxMheVnWoagmAj/G03oLWbFxp7lod0w0ZYNg9vA9XaPe1CB3LcJGPTxDab9djpLf9vmyga5sYzP7hk9fantEZHwljNpNE4/zNb5S5clXnYuzTYmqS5nma1ITpUr3YCdVnsvNiwjzDHHjYeNIGOwyRdvYP5BFkRmXtM3mGdVb7XgL4Emr58OmiqwbPWo+FjS6fipZVzHoPA10uoaIdCcoo87jfbSHghRZOE0wmi5wv0oQhVSeiDVmbMccmyGA53pYpmduK51/FducIKFS7CAOLCRxH+FkhojKlmH1hPX6A1FhTNsVNyIT5AgLb87+VfBS6mA5poymPh42WyT391AN2rZpw3YH6PsBzF5fXMEsmnrl5JcDC3axii2CeYTN0zPGVEhdvhl0S7jeMby2M3i9s9I+wpOCzF+3S9WXWqRm+lAUCx1zDKU3E1AzvC15lxTe5k2FzzDXsDLBPMyMylWhvcenLcpUga6hVNEgVS2Bjuh+9GBrv3XpVFJ2oofXsMRwVwhudYwyZZhhr1M5q5Kg+H3q6+vYTWE2my0dMfUVbkzz+Yy63oQa1K5xaZr5sc+5vGCDBBmjAWEzDIaE0whhGJExp9b/E/xrbeD+IcH255/UsCJYTl9knTGSSv9BkBdyWepZVERtDz03hKo56BAB7LmU5RNzVjCfvV33a+Fy/zUriofUPvh65fE/4gOQAzuy6aEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntity모델링하기/Untitled%201.png","title":"img/KotlinJPAEntity모델링하기/Untitled%201.png","src":"/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png","srcSet":["/static/33bdc4b207ba3415ae591fd36af777cc/8890b/Untitled1.png 293w","/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png 309w"],"sizes":["(max-width:","309px)","100vw,","309px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"kotlin"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"@Entity\ndata class Restaurant(\n        var name: String = \"\",\n        @OneToMany(mappedBy = \"restaurant\")\n        @OrderBy(\"name asc\")\n        var menus: MutableSet<Menu> = TreeSet()\n): MutableEntity() {\n\n        fun addMenu(menu: Menu) {\n                menus.add(menu)\n                menu.restaurant = this\n        }\n}\n\n@Entity\ndata class Menu(\n        var name: String = \"\",\n        var price: BigDecimal = BigDecimal.ZERO,\n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = \"restaurant_id\")\n        var restaurant: Restaurant\n): MutableEntity()"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"보시는 것과 같이 두 엔티티는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@OneToMany"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@ManyToOne"}]},{"type":"text","value":" 으로 양방향을 가지고 있고, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LAZY fetch"}]},{"type":"text","value":" 되게 되어있습니다. ("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@OneToMany"}]},{"type":"text","value":"에서 fetch 는 default가 LAZY 방식이므로 생략 하였습니다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"앞서 말씀드렸다시피 data class는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"open"}]},{"type":"text","value":"이나 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"abstract"}]},{"type":"text","value":"가 될 수 없고 기본적으로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":"로 선언되어집니다. 위 두 클래스를 자바 코드로 변형해보면 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 427px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQ4y5WT6W6bQBRGeZXW68CwDjDMAGYHx3Gj2q0T1eom9f2f4es1iaOolWr642gkNPrm3AUjlhUsrsCdFNwm3BSWrWE5+vm84rw5Ry53/75nHPrvOA7fsOvO43nffsGx/Yph/wPN4Rf27RlP/U/shjPyzycUT48oTidsPj2i2T+gqA7IyyM2Lxh+UCL60EIfesRDDetqaKsR00peYfxPJNjl+xsMEddQUY0q7qCTFjbhb+5RpRlKnWO+irBi0zFM6p+4q6AeWkRdBdPNwMiMUY9MsrBtSXaSLsdYm7cxuJMhIcsy6qBkg2j7EYIM/XwHGecolUIQaCzp9UmBNgWyJgPva3AydPVz/0ZTsrR4Ds7TsZyJhinY3IcTNPDI0rJyeKqHn20RXCzDLYTfkGE4MZB2z9EK64Ca6kdggvq1CjCbB5jTQ7NFgMVKjJevjb8ZyKhMr+/hth28IkecaIgoRUCEcQrXV/9XsjnzYbs1bI+mzCSihAaV5pAqo3CqwE1eA28b0lCcmppf0CC0xHItMKMHRhYC7+YC75ch7WM4KdSwqGRVtmiHO2T1AEdR2YSbdPBFhlzqkVRmNHF52/Dykztr2jWWwbVofUQJO6zAwxKOpxELBUlEQr8s+L8DfwPmdb+B22ZB2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntity모델링하기/Untitled%202.png","title":"img/KotlinJPAEntity모델링하기/Untitled%202.png","src":"/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png","srcSet":["/static/8fd149d918a4c43790e050369251249f/8890b/Untitled2.png 293w","/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png 427w"],"sizes":["(max-width:","427px)","100vw,","427px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 517px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 61.43344709897611%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz31TW5KjMBDjMhPAGIMJxphnAoFkJvna+99FK5NNDVu7mQ9hU2B1S2oHTk+w1RmmPKFSA+p0RFrOyJorVL3A5Cf0+QxlOoixQ9IRbQupKkSxQSi4CkNUG4IkdehuK4ZlQUbSVI+wpoXKG0RJDZFYJMJyzwNyB/GGUCiHqp9g2jPyYWInJzjTIE0tDlGJ0B96gxfJfh/4yqLuoK8P6OkGKWsUVYPKdbBEnPx9YI898WsN4sTQD4s4ZVeUKdKa3RGZ3ciiH8j+22GcO6hfE9KvAdq2MGZCIWm8fN/Zi0TSLqkaWrP3kBKHccFpXJnsDGcbhsKf4m9JYcSfo9d7+Y+H+yJBzE0uKDeidzm9zNgxA4nZoZe8eZiVOBBh+rRGSLcRHEjwERLRd4FAcDT8LJbVgqpcUeYXdMUXrL3C1Xc09Q3N+oC5fKKkkiPn07oZth6gtIM+PiGkfXZ4oISEPgzDHadpQXe+oJ3v6JsHpa/IszNKveLIQlr3kJzbVNXIdQNFNbpsUOwJ/UNlLUZ3JdEAexuhlh7HYUBWOCRMXPBWmKxHwRC8TB+Cn1G/bpLDvWSG4iffh/CxwX+kb3+mP+ZNiYTdVrHtqx+T/w3wq3sXVMLHQwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%203.png","title":"img/KotlinJPAEntityModeling/Untitled%203.png","src":"/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png","srcSet":["/static/51269c629f86405c63734256224f326a/8890b/Untitled3.png 293w","/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png 517w"],"sizes":["(max-width:","517px)","100vw,","517px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 코드는 IntelliJ에서 kotlin → kotlin bytecode → decompile java code 한 결과라서 가독성은 떨어집니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 간단한 repository test를 통해 Menu Entity를 조회 하고 Restaurant Entity를 지연로딩 해보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"코드"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 623px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 23.549488054607508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQY022Q207CUBBF+zXa1tJz6b2nV1AUsC0ICVH//zuWQ3gx0YeVmXMm2bNne6YZSWxLkXfYpEOZDmM78qynkHcptSp6Mum1zGJ1oyWO/7KSmfc2LpynD077he/jzOdJOE5czzOHy5GL1K9l4TTP9NOM2y2U40z1Ot3Z3qlf3nH9Ac+EDqMHYqEs1uKsE8fiQjtsXpKkJVVWEekK24rQ5kqUDDyolEeV39E5vs4IogwvVCVRWrPKHbF1cnKDThqet2v2uw3j2GOMk3NbtB0ljoEgFBE/w//Foy9/QY7nq4IgrQhuLqSPVSVZiKumpR0kx7rhaVXLohZlbzk2+KEIiKj/Dz94qaYBX8NS2gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%204.png","title":"img/KotlinJPAEntityModeling/Untitled%204.png","src":"/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png","srcSet":["/static/c52bb4a495e7a2eba3686514cc5a7fea/8890b/Untitled4.png 293w","/static/c52bb4a495e7a2eba3686514cc5a7fea/1f316/Untitled4.png 585w","/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png 623w"],"sizes":["(max-width:","623px)","100vw,","623px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"결과"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"정상적으로 초록막대와 함께 query 로그도 한번만 찍힌 것을 확인했습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 9.897610921501707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI1y2MWw6EIBAEPZKoCCgPWbIqunv/45Sj8aPS00lNN7n8ieWH9V+cFWJlCAc6nQxuJaSDlE/icjD5jSnsT9p5RZsPbZ9QL20XaULcCblipoIRwYVNBitqzHR6kcHK7fiXWca8OM8teXfjCqP8qj5yAa+IRNWZwuohAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%205.png","title":"img/KotlinJPAEntityModeling/Untitled%205.png","src":"/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png","srcSet":["/static/4d8d3ec05c6b7a77bbcd0c873245762f/8890b/Untitled5.png 293w","/static/4d8d3ec05c6b7a77bbcd0c873245762f/1f316/Untitled5.png 585w","/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png 1170w","/static/4d8d3ec05c6b7a77bbcd0c873245762f/e1fbe/Untitled5.png 1755w","/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png 1803w"],"sizes":["(max-width:","1170px)","100vw,","1170px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1146px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 25.597269624573375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQY02VQ2XKDQAzjc9qchDRJCezNvQTKtDP9/y9Rbe9jHzSW7ZUsyJrxF6FdYNwM3yyw4YW23+DCIn1oV2gXBY52ykz0NsqONcpO0HYSnhcambYRgZbajlIZY/xB062CftzocTLhw7UehLfdl1RFvTIjLPG33T0Z+uYlQ658eZi+kyGl64ZNhNZH6UXsZzJcpWqTEjriu8NnMmSxFdGclvRpxqZULsyoVC/gpGyoCcw5bVl1qOpOZsfzExn/kycNbg+P683ictWCw6nE+/4hV/fH8h94f77UwvNCofgwOOUV/gBGgq9v8Hjm2AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%206.png","title":"img/KotlinJPAEntityModeling/Untitled%206.png","src":"/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png","srcSet":["/static/b83ee2aa872e5a085123fb2f2d9838b4/8890b/Untitled6.png 293w","/static/b83ee2aa872e5a085123fb2f2d9838b4/1f316/Untitled6.png 585w","/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png 1146w"],"sizes":["(max-width:","1146px)","100vw,","1146px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그럼 정말로 문제 없는걸까요? 더 확실히 테스트해보기 위해 직렬화가 필요한 controller 테스트를 해보았습니다. ( 이 테스트는 service를 mocking하는 단위테스트로 작성하지 않고, 실질적인 테스트가 필요하여, 통합테스트로 진행했습니다. )"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"코드"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 786px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 26.96245733788396%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY01WQaW6EMAxGOQ3DkgDDkNVJ2IqQqkqVRnP/q3w10Fbtj6fYUfK8ZMv2grxHNMpDCINHZ0Eck/bwfJqHO+MDzXFRKUZ/o3Ar9Z9cI1v3F0QT0HcOlgUDfzSOEGxAMAHOeIwUQIa4mMGNJXl5iNQ/0a9wnJ+oGo+au+tah2qOqJcIEQm9W6DUhPZhIe4WudQ8hYWU7nx/iPPikv+QjcsTNQuLiqsXGnJNaLaEdmdSRPAzfEiI8wg5RQx8mmmGDRM+PjdQSihrfXJ1yELR0pmUTO0Jgi4kjz8MvA5F5xoGXkPP45fe8875zkRoF7G/r3jbZ1RC4wsiuaIY3bS/sQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%207.png","title":"img/KotlinJPAEntityModeling/Untitled%207.png","src":"/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png","srcSet":["/static/1a3bfb85dd69a1e72e47a3eeaf800704/8890b/Untitled7.png 293w","/static/1a3bfb85dd69a1e72e47a3eeaf800704/1f316/Untitled7.png 585w","/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png 786w"],"sizes":["(max-width:","786px)","100vw,","786px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"결과"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"테스트의 결과는 초록막대인데.. 찍힌 로그가 뭔가 이상합니다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 934px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 34.470989761092156%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQoz1VR2W7DMAzLH21t4+byGTuu3RwDhv3/r3C0M3TbA6GmlCjSanz+QkyfcP6ACwds2GHdDmme0G6DmfdaVYElzFohNXl+1x72lz7D381JZEj14ECGMB5mTLi2BqOM0CajUwlCZ7TTA5ebIjTeLhKimymcoIhSrX+i0XaFXw4YVus39D7CqxXi7ugkY/Y7BnI9XXRc3gqLllwR7ccFdt7giFJ9PNCM8lHdDdOCkbWV3DrE6rAfQuXudCaIlgJXCp0OVXVYUkzUKDrKJDSTOi1XQnNIzVB9rINVkJyYIhcl3Ch4uSq8EzUynf4K8nksBbVbEZYPPujKozDen8jaPnms7V/kmzB/IgcecH1FDiVycVgevmyR5QA6QE+pDp1bM3r2dCrjzp7y/0vwJ4GqyLX3G2AW83caeuYMAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%208.png","title":"img/KotlinJPAEntityModeling/Untitled%208.png","src":"/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png","srcSet":["/static/439971cdb4b4dfdb354a47926869f71c/8890b/Untitled8.png 293w","/static/439971cdb4b4dfdb354a47926869f71c/1f316/Untitled8.png 585w","/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png 934w"],"sizes":["(max-width:","934px)","100vw,","934px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 21.501706484641637%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVQY002QWQ6DMAxEOVCrbrQBsrMEKFSI+x9maptS8WFNZM+8xMlubsJZNXB+RIiTqHUDKpNg7ICiaqVK3cFQn7XUiTwjKlJVNFDlNr/nHtnFjDg9goBcGCVkbA9NsFDPcokPbzmnYRWNzQepX0lnWMp58nD/qSKyKwPzKANHQQFSaYKykXvuF2q75b9JmxZR3oL97MtfYQcGWZPNO+wItEcgv3YH1huQ5zzT9E1fJwGMjbUIB58AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%209.png","title":"img/KotlinJPAEntityModeling/Untitled%209.png","src":"/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png","srcSet":["/static/ac5077b77b8167a014b9f2cbf86f34b9/8890b/Untitled9.png 293w","/static/ac5077b77b8167a014b9f2cbf86f34b9/1f316/Untitled9.png 585w","/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png 1170w","/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png 1592w"],"sizes":["(max-width:","1170px)","100vw,","1170px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"객체를 직렬화 하기전까지는 서로 참조하는 값을 계속해서 참조 할 일이 없지만, 직렬화를 하기 위해 참조하는 과정에서 뭔가 하이버네이트 엔진이 HIkariProxyResultSet으로 부터 결과 값을 가져오는데 무한적으로 재귀호출을 하는 것 같습니다. ( 개발환경에서 허용된 메모리만큼 재귀호출이 되다가 결국엔 StackOverFlow가 발생합니다. 내부적으로 예외처리가 되있어 직접적으로 에러로 표시되진 않는 것 같습니다. )"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"로그를 자세히 보시면 HikariProxyResultSet의 HashCode가 계속해서 바뀌고, 계속해서 새로운 객체를 참조하여 DB 데이터의 결과값을 가져오려고 시도합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 문제를 해결하기 위해 제가 시도한 방법은 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"data class"}]},{"type":"text","value":" 를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"일반 class"}]},{"type":"text","value":" 로 변경 후 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Hibernate"}]},{"type":"text","value":"가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Lazy load 객체"}]},{"type":"text","value":"를 가져올 때 정상적으로 작동 할 수 있게 open 키워드 달아주어 상속 가능하게 만들기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"직렬화 시 무한 재귀에 빠지지 않게 하기 위해 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"HibernateModule"}]},{"type":"text","value":"을 빈으로 등록하여 jackson에configuration 하기"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Data class → class 로 변경 후 open 키워드 달기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 data class를 일반 class로 바꾸기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"kotlin"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"@Entity\nclass Menu(\n        var name: String = \"\",\n        var price: BigDecimal = BigDecimal.ZERO,\n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = \"restaurant_id\")\n        var restaurant: Restaurant\n): MutableEntity()\n\n@Entity\nclass Restaurant(\n        var name: String = \"\",\n        @OneToMany(mappedBy = \"restaurant\")\n        @OrderBy(\"name asc\")\n        var menus: MutableSet<Menu> = TreeSet()\n): MutableEntity() {\n\n        internal fun addMenu(menu: Menu) {\n                menus.add(menu)\n                menu.restaurant = this\n        }\n}"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아까 위에서 소개해드렸던 JPA 표준 POJO Model 객체가 되기 위해 "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"일일이 entity 마다 open 키워드와 빈 생성자를 작성하긴 귀찮으니,  kotlin jpa plugin 을 사용하여 자동적으로 모든 entity에 적용 시켜주겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"적용하는 방법은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"build.gradle"}]},{"type":"text","value":"(groovy dsl) 혹은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"build.gradle.kts"}]},{"type":"text","value":" (kotlin dsl) 에서 설정 할 수 있습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저는 kotlin dsl을 사용하고 있으므로 다음과 같이 작성했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"build.grade.kts"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"kotlin"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"plugins {\n        ...\n    kotlin(\"plugin.jpa\") version \"1.3.61\"\n}\n\nnoArg {\n    annotation(\"javax.persistence.Entity\")\n    annotation(\"javax.persistence.MappedSuperclass\")\n    annotation(\"javax.persistence.Embeddable\")\n}\nallOpen {\n    annotation(\"javax.persistence.Entity\")\n    annotation(\"javax.persistence.MappedSuperclass\")\n    annotation(\"javax.persistence.Embeddable\")\n}"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위와 같이 작성하고 나면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Entity"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MappedSuperclass"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Embeddable"}]},{"type":"text","value":" 의 어노테이션이 붙은 클래스에 빈 생성자와 open 키워드가 자동으로 정의됩니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"open"}]},{"type":"text","value":" 키워드를 코드에서 정의하지 않았는데도, 자바로 변환한 코드에서는 원래의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"final class"}]},{"type":"text","value":" 에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"일반 class"}]},{"type":"text","value":" 로 변경되었습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 841px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 53.58361774744027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQoz51T23KbMBTkY+qYOxLohgCBuDh2Mm5Tp86kM/3/39gecJrkqdPpww5iVqz27Iqg9VfY+oR+/Inx/gV+/gF//IVuvMC0Z2h7giZe1Q+omyO8/4pxuaIdT7DdEULPG/9nXzAdX9GYB2ShRJIZZIVFltcIY4m7sCKId+z2HNrMcPMFyeSQiBpRrLGPJPbE7yOBwC+vkN0BETPYkegHKRFGb+8kHsZqO0CbA7r+CSnrwMoBedETv3JyQ3B+vEJID171kLxFXjpktI5Tg5AQpeQiMe+CUt8EY+bAKgurFLTQqKWBpWdwuif7qUWcaZTOIbcTGLkomwXCncCFR0yCt5FLKBp58BewogVjDSrtoEQHYVpw2yA4UBG88ijqHuY4oxk8bVpgx0eYZiYXHZK8oWxbythu4Tv3BGkHGDch5T0q4kPKf8/I4Xx4gab2ynaG6hZqakSllg1cTChXyBt4NVKzZzTdN5S1g/Uzck0cjZ6lirKnDHv/jJRO2N2Vt7E+tbq29rGW+EJ7JLl3/XdkoqGIJhIcUcgRJXfbnmAYn2mcbvt4Df5v2EqhfFfBmBskpqORLdItjma7apvDNZ/VxT8JvrUcFgqx7pAzBcYVierbtfkfwdVhPdAFX+hPMWveHoIcF0WN35iwZkc1tYO4AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%2010.png","title":"img/KotlinJPAEntityModeling/Untitled%2010.png","src":"/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png","srcSet":["/static/49db6c6a6dd1eca5723f0a9bfcba3127/8890b/Untitled10.png 293w","/static/49db6c6a6dd1eca5723f0a9bfcba3127/1f316/Untitled10.png 585w","/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png 841w"],"sizes":["(max-width:","841px)","100vw,","841px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Jackson configuration"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아직 lazy 로드 되기 전의 proxy 객체 또한 직렬화 하려고 하면 에러가 나기 때문에 다음과 같은 솔루션으로 직렬화 시 문제를 해결합니다. ( lazy 로드 되기 전의 proxy 객체는 null 처리 해줌 )"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저는 hibernate5 버전을 사용하고 있으므로 다음과 같이 작성 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"build.gradle.kts"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"kotlin"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"dependencies {\n    ...\n    // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 직렬화를 가능하게 해준다. (jackson ObjectMapper support)\n    implementation(\"com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:2.9.8\")\n}"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"JacksonConfig.kt"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"kotlin"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"@Configuration\nclass JacksonConfig {\n\n    @Bean\n    fun hibernate5Module(): Hibernate5Module {\n        // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 값이 비어있더라도 직렬화를 가능하게 해준다.\n        // 이 모듈을 bean으로 등록 안하면 hibernateLazyInitializer 라는 하이버네이트 프록시 객체의 프로퍼티를 직렬화 하려다가 에러남\n        return Hibernate5Module()\n    }\n}"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 처럼 변경해준 뒤 다시 테스트를 돌려보면"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"정상적으로 테스트 통과 후 한번만 쿼리하는 것을 볼 수 있습니다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 17.74744027303754%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVQY0z2Pa5KDIBCEvU92NaIgMCKoQUzMPir3v0vvOKnaH10NNHz0VCE/QG4DhR0+HtDpCza/YNITIR1Y849ouX0jlxevf2H9ht4sUH2C0gltF3FlNWpCpcMCrRL0wE4bal/QUMGFw8GtCPGOMRTxOB/8cRFNvBelh+Sqj7h8WlQ2Zgx6lseGgS3tUOMdDZ85n/8hnjPrbnCUuWEWgOJWbTeh45an6iu9gaafYewKy2OfwJZHqvnyCTibOdoEOk67wGQaM7+dJbCG8FF7/AHWzIiV94XDhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%2011.png","title":"img/KotlinJPAEntityModeling/Untitled%2011.png","src":"/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png","srcSet":["/static/db10cb8de14458109af3d0b7d44c30ad/8890b/Untitled11.png 293w","/static/db10cb8de14458109af3d0b7d44c30ad/1f316/Untitled11.png 585w","/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png 1170w","/static/db10cb8de14458109af3d0b7d44c30ad/e1fbe/Untitled11.png 1755w","/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png 1796w"],"sizes":["(max-width:","1170px)","100vw,","1170px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 78.15699658703072%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQ4y41U2XKjMBDkL9YGDAgQ92HA+I6DXescm71q9/+/pbelBCeVSmr90KWRkFrTPSOMKIogPA+e62gIwVgIOFwboea+718FIwh8HhKQWQmZVxCBROi5aKIQXSLRxSEiXmLPZphdAcNjBsLn4eMTlve/kBQVsiTC47DCcdNq9O0cruteBUNJDGSCZn9Gtd6jXO5RtC1un05otwv0hyWatoFlMwPHgeP8h9CjPE/4yNs16u0R88MD2uERWbdGlaYoma3kpUkYIKI9IWPHmRHOh9CSVTCzLQgZoTv9QL0bELJYXRbh2Ba4W80xNAX2dY5VlSEksfJLn/vIQ5Wqw4kf5egf/qA9nBEXNQoZ4JZEWRzBtOxLYT7L7pLhKyG9HL6xMCQpYvje87r6PpLZI+w38Qs+yDBBsbzRXi6Ge3p5B5lmSEOf0ktsKXdTpujyBDvK31Qp+ixGz7lac8n16uHMJmGKlh4uzz/Rf+X48BtxnqNmP57oZUzvfO4PWBjpCw1VpEBDQHEZKrtQSvhctCyLDT5nVoVu9CBOdfZRIJAQ6uL30t/HhstNMqZ36xv4IYk9C7Y5gTn5wgtMTFmMiWlpqF40bZvjM1SsivW2UIbHDDy+lHp3Yi+yiddb1CQPk0zLaelRm0aYU7bycs64iiUKPk0Vq29KxUiqJav3my926IYnevgdy8e/yJsFPRM49zWLkaLhwTJ+JmleSBVZxwvVT+FCqJ6e43qoNkdW94Ryc4tqO+gMc/bhSlWPG5X0UfIoW8l9K1l7GLMgNl+JZU5hTScX6DUSTN959BnGPf8As5LKhBpuTWoAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"img/KotlinJPAEntityModeling/Untitled%2012.png","title":"img/KotlinJPAEntityModeling/Untitled%2012.png","src":"/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png","srcSet":["/static/32366886ed6e3611e910d59884b9e7ce/8890b/Untitled12.png 293w","/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png 300w"],"sizes":["(max-width:","300px)","100vw,","300px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실제로 데이터가 조회되었고, lazy fetch 모드로 설정되있고, 아직 꺼내지 않은 객체 restaurant.menus에 대해서는 null 처리가 되어있습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만 여기서 끝이 아닙니다. 현재까지는양방향관계에서  "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@ManyToOne"}]},{"type":"text","value":" 를 가진 쪽의 엔티티 조회에서 문제를 해결했는데요, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아직 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@OneToMany"}]},{"type":"text","value":"의 관계를 가진 엔티티를 lazy load 조회 할 때 문제가 있습니다.\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n이 부분까지 해결하기 위해서는 여러가지의 솔루션이 있는데 그 중 하나를 다음 포스팅에서 소개하겠습니다.\n"},{"type":"element","tagName":"a","properties":{"href":"https://thxwelchs.github.io/JPA%20%EC%96%91%EB%B0%A9%ED%96%A5%20Entity%20%EB%AC%B4%ED%95%9C%20%EC%9E%AC%EA%B7%80%20%EB%AC%B8%EC%A0%9C%20%ED%95%B4%EA%B2%B0/"},"children":[{"type":"text","value":"JPA 양방향 관계 무한재귀 해결 포스팅 보러가기"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"감사합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"참고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하이버네이트 공식 엔티티 모델링 가이드 "},{"type":"element","tagName":"a","properties":{"href":"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity"},"children":[{"type":"text","value":"https://docs.jboss.org/hibernate/orm/5.4/userguide/html"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"single/Hibernate"}]},{"type":"text","value":"User_Guide.html#entity"}]},{"type":"text","value":"\nkotlin compiler-plugins(no-arg, all-open) "},{"type":"element","tagName":"a","properties":{"href":"https://kotlinlang.org/docs/reference/compiler-plugins.html"},"children":[{"type":"text","value":"https://kotlinlang.org/docs/reference/compiler-plugins.html"}]},{"type":"text","value":"\n코틀린 JPA "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa"},"children":[{"type":"text","value":"https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa"}]},{"type":"text","value":"\n객체지향적 상속성 활용한 엔티티 설계하기 "},{"type":"element","tagName":"a","properties":{"href":"https://victorydntmd.tistory.com/209"},"children":[{"type":"text","value":"https://victorydntmd.tistory.com/209"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요, 특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다. Entity 모델링 먼저 코틀린에서 Entity 클래스를 작성할 때는  로 선언…","timeToRead":7,"frontmatter":{"title":"Kotlin JPA Entity 모델링하기","userDate":"6 March 2020","date":"2020-03-06T22:28:00.000Z","tags":["kotlin","jpa","entity"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHu01Eg/8QAGBAAAgMAAAAAAAAAAAAAAAAAAQIAESD/2gAIAQEAAQUCa4rE5//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAAgITH/2gAIAQEABj8Chi//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgIWH/2gAIAQEAAT8hIBhw7q9df//aAAwDAQACAAMAAAAQeA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEgQVH/2gAIAQEAAT8QFNjkQFQ0Dbj/AP/Z","aspectRatio":1.7816091954022988,"src":"/static/d4600748e32e427b776548f4d5ce4cbe/2cb8a/%EC%BD%94%ED%8B%80%EB%A6%B0JPA%EB%AA%A8%EB%8D%B8%EB%A7%81%ED%95%98%EA%B8%B0-postbg.jpg","srcSet":"/static/d4600748e32e427b776548f4d5ce4cbe/2f037/%EC%BD%94%ED%8B%80%EB%A6%B0JPA%EB%AA%A8%EB%8D%B8%EB%A7%81%ED%95%98%EA%B8%B0-postbg.jpg 930w,\n/static/d4600748e32e427b776548f4d5ce4cbe/2cb8a/%EC%BD%94%ED%8B%80%EB%A6%B0JPA%EB%AA%A8%EB%8D%B8%EB%A7%81%ED%95%98%EA%B8%B0-postbg.jpg 1424w","sizes":"(max-width: 1424px) 100vw, 1424px"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHUlEQVQ4y23UaUzTdxgH8MdjMrwiEVRALqFaoAflamGWckkLhRZpEQql9KQtxR70X44CLVdBEEQJ4BRkImZRMGSyQ5mKx+amMQ6VeMQ5jZkTyMjmwVBB9xs73/z3TZ4X3zefd88X4J+YlRagBRP+rYuytqZaisuMsiRdwoFgAvUTH/+oLzL4XQ69qTqdSU+plIszV2ft4IE4Nx9azHWASxPWBNGhzMWEQBIE0Kik6E1RSJmcORG+o3Bu44YRxFrzEcrzq0dhQbaXRM9wZFMahZhIDoUC5dJ95Y140KIshazg3MU84nZIICUN6pjYNxc/GHmcETj8NGDLmeNWWs/FvsTm0fLEs4MRHtmPdCzFTYTQkoWDdmszHkxhpwH3RD5gqOu9gFX+D0s3G69fSrs5lhFQ+9ZtxdLr/FTO9E69AdVUV51XhSvuJ/luRY5SK9luwKBUUrQYD3KzQTnQCkNXb7/vsc7vdktQI7pEPPy0KcrSH09JfGU0GOf0Ow2oTlo9JnCTvYghxKMuaxOpFauFsnwMD2ZuV0Byux0EH550ZnhRb1Yw+1/WRJ1D5bENAxWV2LTZjCFzgf6ng6y2zxkBCpTG4KOz9cfIw/WHYa+5EQ8KM4rAcrAJeoZvOG1aT7snJg2i7KBxJPSxoSKN8hU9goGqZfqSOt9dj4Iycl7HxDFRY/ZuiiO3Hkx5xXiQl6WEduUgIO1bp9VxxHsmqg1NBo+aNDHqCzqVBrF53ElbtNykjWi+7xVceIdIiURYsYNsMthBJjfgwTg+D9QcLTTH9zj5xPnfpVDLUOFG+6naImxcVahBZZjlRVFk/mVKYO0Ywb/sQUIC9400X02VSeUgypbiQe8UPyA/9gLSDMWJyqWMC1yLkWld8fc1O7Hv+CIhKmDnzrUxbadJLMP+TIG+jc8TTstE0hBplgTyc/4HjOfwIedEG1SiK8t83LY80nmlH6oUY99W2aveiNV5qJFvR2k+fRPksI5zUYycr9j02J+POvoCjtR1LzxF/SIcGEVnQSyPA0K1xNl1+foxlVg7bqmqQnqNCelEincchn3Om9L2lkz87LG3t+FlOjllEv04u3Z2/AH0NO3Hg3QC7e8nBnCOCAwdq7A5kKXEikqM5nc5dMn8BlIyog34PludJphxXyJF1vDCC0fRwIqh+V5oqKnGg2HkrbBomQu4uPmuDCHQRh2F9Vdadu2Z02oKUGmEAZ2LODZrEskmuEbOFNuTP6mgis603x1a1Xr1KJTprXgwmskB88H9cPz0rWXLnV1+iF3LRjWUStTBcfxeRy1HnxIPPD9J7X49Quq9dSRk9xPP9V7PSzQlXhq1DnIzxHiQ6EMBD1c38F7rsTKcyBrhMJRfajfveyL07UBlZDsaiume6me1T3czWu6YvFW/sSO5z9r2dro7mlvAKDfhQSqFBUVyP7CZI518N6Vc8yY0zLKYx+8Uh55EjZL+iVrj7l8qVI1zffz2URvVeDc2JPl5qkzkzsrhAy9FiAe3cdKgpikROg9plru4kqc2utcjr+ChX4sCe6ewmL3IoG2daZB0vjkW/fF8Z2Ad2uK+eU5fW+kpq9CDRCzHg0plPqSlmkAq1cKOzMz6VK7sBS2s4IaIjl1TRenHrOyK671Je27pOKUPFelyJODyOk4tbOHFhStQavB7KJPnQVdnI6D5mb96uVWdLhBuO8KKCztPZ5C+poUGXg6PCTnLSmIMs4XbJK4r1sCf44rZy0GlUP/n/AGzLBP/3rIs3AAAAABJRU5ErkJggg==","width":151,"height":151,"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png","srcSet":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png 1x"}}]}}}},"relatedPosts":{"totalCount":5,"edges":[{"node":{"id":"44f0205c-316c-5f88-a7d7-da00d8acab52","timeToRead":3,"excerpt":"Java 와일드카드 제네릭  제네릭은 Unbound wildcard라고 불리며, 어떤 타입이 될지 모른다 라는 의미입니다. wildcard가 사용된 제네릭은 타입으로 들어온 타입에 대하여 관심이 없다 라는 의미도 되며 기능적인 메소드 외에 원소 값과…","frontmatter":{"title":"제네릭 1편 와일드카드 (Generic Wildcard)"},"fields":{"slug":"/GENERIC-1/"}}},{"node":{"id":"189c3f60-6991-56c9-86ce-23ad77fee429","timeToRead":2,"excerpt":"JPA ORM으로 개발하다보면 꽤나 많은 양방향 참조가 필요한 모델들이 있습니다. 그런데 문제는 이런 양방향관계를 가진 객체를 직렬화 하려고 할 때 무한참조가 되어 StackOverFlow를 발생시키는데요. 그렇다고 해서 ORM이 가진 장점을 포기하…","frontmatter":{"title":"JPA 양방향 Entity 무한재귀 문제해결"},"fields":{"slug":"/JPA 양방향 Entity 무한 재귀 문제 해결/"}}},{"node":{"id":"fa94b944-608a-5413-bad2-260a122e6305","timeToRead":7,"excerpt":"최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요, 특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다. Entity 모델링 먼저 코틀린에서 Entity 클래스를 작성할 때는  로 선언…","frontmatter":{"title":"Kotlin JPA Entity 모델링하기"},"fields":{"slug":"/Kotlin JPA Entity 모델링하기/"}}}]}},"pageContext":{"slug":"/Kotlin JPA Entity 모델링하기/","prev":{"excerpt":"2020년이 되면서 javascript 표준 규격인 ECMA script 에도 몇가지 추가된 사항들이 생겼습니다!\n 어떤 것들이 있는지 한번 살펴보겠습니다. 널 병합 연산자 (Nullish coalescing operator) 널 병합 연산자란 왼쪽…","timeToRead":3,"frontmatter":{"title":"ES2020","tags":["javascript","es2020","ecma script","ECMA"],"date":"2020-02-29T22:31:55.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7816091954022988,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvSsjRX//EABgQAAMBAQAAAAAAAAAAAAAAAAECEQAg/9oACAEBAAEFAiZka8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGH/8QAFhAAAwAAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/Air/AP/EABkQAQEAAwEAAAAAAAAAAAAAAAERACAhUf/aAAgBAQABPyEBVmOkZbyea//aAAwDAQACAAMAAAAQ8A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAABEFH/2gAIAQIBAT8QQo5P/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAIEFRYf/aAAgBAQABPxAjSbhPnJN9V//Z","sizes":"(max-width: 1424px) 100vw, 1424px","src":"/static/b9d3879f84d259be41f5e4820f4ebfef/2cb8a/ES2020-postbg.jpg","srcSet":"/static/b9d3879f84d259be41f5e4820f4ebfef/2f037/ES2020-postbg.jpg 930w,\n/static/b9d3879f84d259be41f5e4820f4ebfef/2cb8a/ES2020-postbg.jpg 1424w"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"fixed":{"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png"}}]}}},"fields":{"layout":"post","slug":"/ES2020/"}},"next":{"excerpt":"JPA ORM으로 개발하다보면 꽤나 많은 양방향 참조가 필요한 모델들이 있습니다. 그런데 문제는 이런 양방향관계를 가진 객체를 직렬화 하려고 할 때 무한참조가 되어 StackOverFlow를 발생시키는데요. 그렇다고 해서 ORM이 가진 장점을 포기하…","timeToRead":2,"frontmatter":{"title":"JPA 양방향 Entity 무한재귀 문제해결","tags":["kotlin","jpa","entity"],"date":"2020-03-06T22:47:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7816091954022988,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuV1BI/8QAGBABAQADAAAAAAAAAAAAAAAAAQIAESD/2gAIAQEAAQUCreFK8f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQADAAAAAAAAAAAAAAAAAAEAIDL/2gAIAQEABj8CmUr/AP/EABoQAAICAwAAAAAAAAAAAAAAAAEhAEERIDH/2gAIAQEAAT8hwMcFR0QvX//aAAwDAQACAAMAAAAQ9w//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8QcH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgEFAAAAAAAAAAAAAAABETEhACBBcbH/2gAIAQEAAT8QV+hKLesaEgmVIv3nb//Z","sizes":"(max-width: 1424px) 100vw, 1424px","src":"/static/4bf18ab37cd31474fd591b9287a49f4c/2cb8a/postbg.jpg","srcSet":"/static/4bf18ab37cd31474fd591b9287a49f4c/2f037/postbg.jpg 930w,\n/static/4bf18ab37cd31474fd591b9287a49f4c/2cb8a/postbg.jpg 1424w"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"fixed":{"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png"}}]}}},"fields":{"layout":"post","slug":"/JPA 양방향 Entity 무한 재귀 문제 해결/"}},"primaryTag":"kotlin"}},"staticQueryHashes":["3212170248","3213104607","3993936949","794779027"]}