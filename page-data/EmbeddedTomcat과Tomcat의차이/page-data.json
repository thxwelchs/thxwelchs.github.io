{"componentChunkName":"component---src-templates-post-tsx","path":"/EmbeddedTomcat과Tomcat의차이/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDklEQVQY003QwUoCURiG4WOExAQVuapFkUFg2cbIKDQMLY1iKMukJEvSMLR0FYqg0K42Ea1aSMsuoe6kVXQHYovGWc3pPTATLh6+/3wzwxx+kQqcLiUC9WpyQZ/8eHsXX5/fbinlkGVZgvznnPt6j5rhYtacXpz5ay+56I0M+WJpiqOeYWbIW8xgFn54MY8JLCOMQ/vZFlqYwro43sw8puNl0zMSiVOcG7+9bfIBJ7hHBXdoo4FnbqOySl6Sc3hCCU2hrxZfKxs1uaYFdYqYaZhZcgcHuEaSD9XLZfUTZpW72EceEaQQRVEs+gqh7MpV8yK4N6128NPpjtn7cNu7GoCrb3caRu15mN6ZBzH+B9oQInTA7ID+AAAAAElFTkSuQmCC","width":400,"height":90,"src":"/static/8637e594ca86d58e20988ba8c4cfc1e7/497c6/thxwelchs-logo-v2.png","srcSet":"/static/8637e594ca86d58e20988ba8c4cfc1e7/497c6/thxwelchs-logo-v2.png 1x"}}},"markdownRemark":{"html":"<p>이번 포스팅에서는 내장톰캣과 설치형으로 사용하는 외장톰캣이 무엇이 다른지, 그리고 내장톰캣으로는 해결 할 수 없는것이 있는지\n간단하게 알아보았습니다.\n포스팅 내용을 작성하기 전 이 내용을 조사해본 것은 전 직장 동료분과 오랜만에 만나 개발 담소를 나누다 내장톰캣, 외장톰캣과 관련된 이야기가 오갔고, 좀 더 확실하게 알아보기로 했습니다.</p>\n<p>거의 대부분의 Spring 개발자라면 알고 있을 사실이지만, Spring Boot에는 <code class=\"language-text\">tomcat</code>이 내장되어 있어, 애플리케이션을 빌드하고 실행하는 것만으로 웹애플리케이션을 서비스 할 수 있습니다.</p>\n<p>즉 스프링부트는 실행될 환경에 톰캣을 설치할 필요없이 애플리케이션을 바로 실행 할 수 있다는 것을 의미합니다.\n그렇다면 과거 스프링 레거시에서는 어떻게 웹 애플리케이션을 실행 할 수 있었을까요? </p>\n<p>먼저 내장톰캣이 없던 시절의 스프링은 서블릿 컨테이너가 없기 때문에, 실제로 자바로 작성된 코드와 상호작용할 다리역할의 시스템이 필요했습니다. 그렇기 때문에 서블릿 컨테이너가 필요했고 우리는 일반적으로 그 중 대표격인 톰캣을 선택하여 설치하고, 자바로 작성되어있는 자바 웹애플리케이션을 톰캣에 포함시켜주어야 했습니다. </p>\n<h1>애플리케이션 실행방법 차이</h1>\n<p>간단하게 다시 정리해보자면 다음과 같습니다.</p>\n<p><strong>내장톰캣을 사용하는 스프링부트 애플리케이션 실행</strong></p>\n<ul>\n<li>build된 스프링부트 애플리케이션 jar, war 를 java 명령어로 실행한다.</li>\n</ul>\n<p><strong>외장톰캣을 사용하는 스프링 애플리케이션 실행</strong></p>\n<ul>\n<li>tomcat을 설치한다.</li>\n<li>tomcat 설정 파일을 구성한다.</li>\n<li>tomcat webapp 디렉토리에 build된 스프링 애플리케이션 war 파일을 포함시켜준다.</li>\n<li>tomcat을 실행해준다.</li>\n</ul>\n<p>한눈에 봐도 어떤것이 더 복잡한지는 알 수 있습니다. 물론 무조건 내장톰캣이 좋다 나쁘다를 따지려는 것은 아닙니다만. 적어도 실행 절차만 본다면 내장톰캣을 사용하는것이 훨씬 간단하다는것을 알 수 있습니다.</p>\n<p>저는 이러한 이유로 환경이 허락된다면 내장톰캣을 사용하여 애플리케이션을 실행하는 방법을 선호했고, </p>\n<p>심지어 내장톰캣이든 외장톰캣이든 큰 차이가 없다라고 생각하고 있었습니다. </p>\n<p>그래서 가끔 내장톰캣에 대한 부정적인 인식( “내장톰캣은 외장톰캣보다 성능이 좋지 않을거야” 등 ..) 을 가지고 내장톰캣을 사용 할 수 있음에도 외장톰캣을 설치해서 배포하는 것을 볼때면 의문이 들 때가 많았습니다 </p>\n<p>실제로 스프링에서는 외장톰캣 구성요소를  보통 <code class=\"language-text\">server.xml</code> 을 작성하여 구성 할 수 있고</p>\n<p>스프링부트에서 또한 내장톰캣의 구성요소를  application.properties(yml)에서 구성 할 수 있기 때문이었는데요</p>\n<p>애초에 스프링부트가 스프링에서의 많은 xml 기반 설정들이 너무 불편하고 알아야 할 요소가 많았기에 이런 구성 요소들을 대신 해주기 위해 탄생한 것이기에 위와 같은 생각을 했습니다.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server\">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server</a> application.properties에서 톰캣 구성 설정을 담당하는 부분</p>\n</br>\n</br>\n<h1>외장톰캣 vs 내장톰캣 다른점</h1>\n<p>그렇다면 정…말!? 전혀 다른게 없을까요?</p>\n<p>결론만 말씀드리자면 <code class=\"language-text\">NO</code> 입니다.</p>\n<p>물론 많은 부분이 다르지는 않지만, 대표적으로 내장톰캣으로는 할 수 없지만 먼저 외장톰은 가능한 기능이 하나 있는데요 바로 tomcat의 virtual host라는 기능입니다.</p>\n<h2>virtual host</h2>\n<p>virtual host라는 기능은 이런겁니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVQ4y2WUS28bVRSA5/cgsUFCYtHQAJEQm9IFG1Ygsa0QUlRRRGmFCC3QpkrTvCrShKAClQJViUuKq5g6E2zHsRqcxLHsNI6buPErdjx+zMsz9sedG9IFHenqaO459zuPe85V2o6B27FeWI5rCmlgtJpUi1Uah3Vc91j3f2k+X0rbMel2nRcUna6L9zVrFnvJQ3LpCqbREvsWHWF7LF3p+OisF5xyoO2gtQo4jk0XW252hAOtkqZcDFGrxqjVljGaWYHvYLcNdLOFYem0hLSFvWE2MK2mBCum3SBX3mBzK4quN7wjMjJ1ZZDxv3qYCZ3i5qOTRB4PS6AvssnHY39z7laEM6NLzIWfUKnkKRT3seyWSFl49FIu1zKspVQOqnkJDC5f4/rDk3y/eJqRwFs8WrlKx9W4cW+J3k//5MPBIK+fnWd0Lo5lNcjuZgT0GYpDW/h1JMR0NDL5mEjfYDFynaEHPUwG3+WGv5fo6k1pk3xaYFZNMx/NMLuYIrVXEvY6lWqJRvMQZT+V4NlWklIuS63ibVbRmrv4gp/xxQ9vMPDTKS782Es4NiaBoY0sQ3dXmfCtce3Xx4QSezJlDyhvuZLepJSIk19dIRtWKcejlKNxpiY+on+8jzPfnubsRC8L/q+hesDgdIAeker7lwOc6L8voaZZJ5PdplDaP0q5iyvSdmXRC+U8K/EDbv/2FeenXuPCrXekVMMjMsLFtR0u/RJj/P4al+/EUNd3MQyNvKif1qii2G1dNigC/CST4YG6gWV2WQhe5fPJV/juTh8Xp18lEByWwD8iKQZ+jnFldpWLM8tEkjnRVkWKIjrTu2XL1oWZRTKdxq8mRU825MF78wN8MvKSiO6ESP1l7s59g6npfDml8vZ5Px9cCdLT72Pan8C2m2zvbJEv5FAQfbezm8O/lBTN6k2IIYELD4cZGHuToZn3uDTRR0idPOrP9SzjvnVuB5KM/h5nfaeAx6g3DmnpGkq5qhH+Z0+Ea0qFN4qdro0l6vJ0O0l6M04mnaAl6uN2bWmDrLcjZbdjClAd3aiLiWmiFCuCLGb0GCYfBTn0Airqa1ot4Ux//hB4o2a3TSFNoTf++9fllHjl+xe/hdjDQfFQNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png\"\n        srcset=\"/static/bc5d1bc3deb6351584193a1ddfce0d4f/8890b/Untitled.png 293w,\n/static/bc5d1bc3deb6351584193a1ddfce0d4f/1f316/Untitled.png 585w,\n/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png 640w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n      />\n  </a>\n    </span></p>\n<p>위 그림처럼 도메인 host에 따라 각각의 다른 루트 컨텍스트를 갖게하여 하나의 웹애플리케이션 배포만으로 마치 여러 애플리케이션을 운영하는 것처럼 할 수 있는 것입니다.</p>\n<p>이 기능을 사용하기 위해서는 위에서 잠깐 언급한 스프링 외장톰캣 구성요소 파일인 <code class=\"language-text\">server.xml</code> 을 손보면 됩니다.</p>\n<deckgo-highlight-code language=\"xml\"  >\n          <code slot=\"code\">&lt;!--...--&gt;\n&lt;Host name=&quot;a.thxwelchs.com&quot;  appBase=&quot;/webapps/weba&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;\n&lt;/Host&gt;\n\n&lt;Host name=&quot;b.thxwelchs.com&quot;  appBase=&quot;/webapps/webb&quot; unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot; xmlValidation=&quot;false&quot; xmlNamespaceAware=&quot;false&quot;&gt;\n&lt;/Host&gt;\n&lt;!--...--&gt;</code>\n        </deckgo-highlight-code>\n<p>위 처럼 구성하게 되면 <a href=\"http://a.thxwelchs.com\">a.thxwelchs.com</a> 으로 접속시 weba 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보일 것이고 <a href=\"http://b.thxwelchs.com\">b.thxwelchs.com</a> 으로 접속시 webb 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보이게 될 것입니다.</p>\n<p>이처럼 multiple host 웹애플리케이션을 단일애플리케이션으로 구성하는 이유는 관리포인트를 줄이기 위함입니다. (하나의 애플리케이션에서, 여러 사이트의 역할의 코드를 모아서 작성하고 관리 할 수 있거나 버전관리 측면을 보자면?)</p>\n<h2>Embedded Tomcat Mutlple context</h2>\n<p>이 기능은 확실하지 않지만 내장톰캣으로 구성하기에는 상당히 까다로운 것 같은데요, 가능은 한 것 같습니다.</p>\n<p>예를 들면 다음과 같이 서블릿컨테이너팩토리 빈을 다시 재구성하여 multiple context를 등록하는 방법도 있습니다 (직접 해보지는 않았습니다.)</p>\n<deckgo-highlight-code language=\"java\"  >\n          <code slot=\"code\">@Bean\npublic ServletWebServerFactory servletContainer() {\n    return new TomcatServletWebServerFactory() {\n        protected TomcatWebServer getTomcatWebServer(Tomcat tomcat) {\n            System.out.println( &quot;tomcat.getServer().getCatalinaBase() =&quot; + tomcat.getServer().getCatalinaBase() + &quot;=&quot; );\n            new File(tomcat.getServer().getCatalinaBase(), &quot;/webapps&quot;).mkdirs();\n            try {\n                Context context2 = tomcat.addWebapp(&quot;/weba&quot;, new ClassPathResource(&quot;/home/thxwelchs/playground/weba.war&quot;).getFile().toString());\n                Context context3 = tomcat.addWebapp(&quot;/webb&quot;, new ClassPathResource(&quot;/home/thxwelchs/playground/webb.war&quot;).getFile().toString());\n                context2.setParentClassLoader(getClass().getClassLoader());\n                context3.setParentClassLoader(getClass().getClassLoader());\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n            return super.getTomcatWebServer(tomcat);\n        }\n    };\n}</code>\n        </deckgo-highlight-code>\n</br>\n</br>\n<h2>웹서버를 활용한 reverse proxy</h2>\n<p>하지만.. 잘 생각해보면 굳이 이럴 필요가 있을까요? virtualHost라는 기능은 일종의 웹서버 기능으로써 WAS의 책임에는 조금 벗어나는 범위입니다. 물론 WAS가 웹서버의 기능을 할 수 도 있지만, 일반적으로 WAS는 서블릿 컨테이너의 역할로써 소스코드의 파일을 해석하고 데이터를 로드하여 동적인 자료를 기반으로 정적인 자료로 전달해주는 것이 목적입니다.</p>\n<p>그렇다면 실제 웹서버를 사용하고 WAS는 서블릿컨테이너의 역할만 하게끔 구성하는건 어떨까요?</p>\n<p>그러기 위해서는 먼저 우리는 내장톰캣이 구현된 애플리케이션 하나를 서비스 하나의 단위로 생각하는 것이 좋습니다. </p>\n<p>하나의 서버에 여러 애플리케이션을 운영하는 것보다는 하나의 애플리케이션이 VM 혹은 Linux Container(Docker)로 하나의 서비스로 구성하고 여러 서비스를 운영하는 것이 효율적이기 때문입니다.</p>\n<p>그렇다면 우리는 이렇게 구성해볼 수 있습니다. </p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.31399317406143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz5WSu07DMBSG+y4sIAYGxIJgRDwBElOHDkzAws4GQ5+Bi4R4AgZGoIIBhJBAAlEQGwpt06a1ncSOb8ccp1VJLwtHVuL89v/5nBOXnHPWWLDgRgNgisJ6AVg9VErW2UQmQSOghPYRuMlYgxNj7QCRPwnpPFwdU9JhLB6Y+y9EUE4znQ0Paf20jDH9T+00DqUVi3kxH29O05RRxgVXoJRTGIdH1fm95a3qbtgOkYv6gKIFgP0zgzFJj9AoSijVQqD0+vU2V1naqGzOlhfPLs9RUVw4Y2i3/XR7wmiUcjGSttYqyzKb19wIW6vb6zPlhZWdtZvHO19U3gIheBB847ZhOd4chlGz2SGESwlae3/9s75/enB9X8NmSOUrnholpOBa8b9gtxAPmdVSYZPyvBDqW/PxfJHEPSnVSNpoyUcB4YFQWHWUkveXWprGUsoxs5u8EpP3ZDxt97+AIvQXk21wuWG4WtEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"제목 없는 프레젠테이션.png\"\n        title=\"제목 없는 프레젠테이션.png\"\n        src=\"/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png\"\n        srcset=\"/static/818872d9e4cb157ec0ad2b8e07ee29eb/8890b/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 293w,\n/static/818872d9e4cb157ec0ad2b8e07ee29eb/1f316/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 585w,\n/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 구성하는 것을 reverse proxy라고 부릅니다.</p>\n<p>이렇게하면 웹서버의 역할과 WAS의 역할을 정확히 구분시킬 수 있습니다.</p>\n<p>여기서 아까 외장톰캣을 쓰는 스프링 애플리케이션처럼 하나의 스프링 애플리케이션에서 여러 애플리케이션의 코드를 작성하고 관리하고 싶다면? 물론 가능합니다. 스프링부트 애플리케이션에서 여러 애플리케이션 코드를 작성하고 스프링부트 애플리케이션을 실행 할 때 컨텍스트 구성 설정 값을 argument로 넘겨주게끔 구성하면 됩니다.\n(예를 들어 view  resource root path, server port, context path와 같은)</p>\n</br>\n</br>\n<h1>마지막 정리</h1>\n<p>조금 두서 없이 포스팅이 길어졌지만 마지막으로 간략하게 정리해보자면 다음과 같습니다.</p>\n<p>내장톰캣</p>\n<ul>\n<li>내장톰캣으로 실행하는 스프링부트 애플리케이션은 그 자체가 하나의 프로그램으로 서블릿컨테이너가 하나의 포트를 독자적으로 점유함 그렇기 때문에 여러 호스트를 분기 할 수 있는 기능을 사용하기 매우 복잡함</li>\n<li>jar든 war든 톰캣이 내장된 애플리케이션은 톰캣 구성에 대한 부분의 관심사를 분리하여 개발자에게 애플리케이션단의 코드 작성에 더 집중할 수 있게해줌(필요에 의하면 server.xml에서 작성했던 구성요소를 application.properties 에서 바인딩되어 내장톰캣에 설정됌)</li>\n</ul>\n<p>외장톰캣</p>\n<ul>\n<li>외장톰캣은 Apache HTTPd 에서 사용하는 Virtual Host라는 main host 하위에 가상의 호스트를 소프트웨어적으로 둘 수 있는 기능을 제공하는데, 외장 Tomcat에서도 Host설정으로 이 apache virtual host를 설정할 수 있음 ( 즉 여러 애플리케이션을 하나의 포트로 서비스 할 수 있음 )</li>\n</ul>\n</br>\n</br>\n각각의 조직이 가지고 있는 애플리케이션 실행환경에 따라 맞는 애플리케이션 구성을 고민해보면 좋다.\n<p>하지만 현재의 모던 환경에서는 일반적으로 여러 애플리케이션을 하나의 포트로 서비스 하지않고, 웹서버를 앞단에 두는 리버스프록시 구성환경이 많이 사용되고 있음</p>\n</br>\n</br>\n</br>\n<h1>참고</h1>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper\">https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper</a>\n<a href=\"https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat\">https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat</a>\n<a href=\"https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html\">https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html</a></p>\n</blockquote>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번 포스팅에서는 내장톰캣과 설치형으로 사용하는 외장톰캣이 무엇이 다른지, 그리고 내장톰캣으로는 해결 할 수 없는것이 있는지\n간단하게 알아보았습니다.\n포스팅 내용을 작성하기 전 이 내용을 조사해본 것은 전 직장 동료분과 오랜만에 만나 개발 담소를 나누다 내장톰캣, 외장톰캣과 관련된 이야기가 오갔고, 좀 더 확실하게 알아보기로 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"거의 대부분의 Spring 개발자라면 알고 있을 사실이지만, Spring Boot에는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"tomcat"}]},{"type":"text","value":"이 내장되어 있어, 애플리케이션을 빌드하고 실행하는 것만으로 웹애플리케이션을 서비스 할 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"즉 스프링부트는 실행될 환경에 톰캣을 설치할 필요없이 애플리케이션을 바로 실행 할 수 있다는 것을 의미합니다.\n그렇다면 과거 스프링 레거시에서는 어떻게 웹 애플리케이션을 실행 할 수 있었을까요? "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 내장톰캣이 없던 시절의 스프링은 서블릿 컨테이너가 없기 때문에, 실제로 자바로 작성된 코드와 상호작용할 다리역할의 시스템이 필요했습니다. 그렇기 때문에 서블릿 컨테이너가 필요했고 우리는 일반적으로 그 중 대표격인 톰캣을 선택하여 설치하고, 자바로 작성되어있는 자바 웹애플리케이션을 톰캣에 포함시켜주어야 했습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"애플리케이션 실행방법 차이"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"간단하게 다시 정리해보자면 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"내장톰캣을 사용하는 스프링부트 애플리케이션 실행"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"build된 스프링부트 애플리케이션 jar, war 를 java 명령어로 실행한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"외장톰캣을 사용하는 스프링 애플리케이션 실행"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tomcat을 설치한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tomcat 설정 파일을 구성한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tomcat webapp 디렉토리에 build된 스프링 애플리케이션 war 파일을 포함시켜준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"tomcat을 실행해준다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"한눈에 봐도 어떤것이 더 복잡한지는 알 수 있습니다. 물론 무조건 내장톰캣이 좋다 나쁘다를 따지려는 것은 아닙니다만. 적어도 실행 절차만 본다면 내장톰캣을 사용하는것이 훨씬 간단하다는것을 알 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저는 이러한 이유로 환경이 허락된다면 내장톰캣을 사용하여 애플리케이션을 실행하는 방법을 선호했고, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"심지어 내장톰캣이든 외장톰캣이든 큰 차이가 없다라고 생각하고 있었습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 가끔 내장톰캣에 대한 부정적인 인식( “내장톰캣은 외장톰캣보다 성능이 좋지 않을거야” 등 ..) 을 가지고 내장톰캣을 사용 할 수 있음에도 외장톰캣을 설치해서 배포하는 것을 볼때면 의문이 들 때가 많았습니다 "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실제로 스프링에서는 외장톰캣 구성요소를  보통 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"server.xml"}]},{"type":"text","value":" 을 작성하여 구성 할 수 있고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스프링부트에서 또한 내장톰캣의 구성요소를  application.properties(yml)에서 구성 할 수 있기 때문이었는데요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"애초에 스프링부트가 스프링에서의 많은 xml 기반 설정들이 너무 불편하고 알아야 할 요소가 많았기에 이런 구성 요소들을 대신 해주기 위해 탄생한 것이기에 위와 같은 생각을 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server"},"children":[{"type":"text","value":"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server"}]},{"type":"text","value":" application.properties에서 톰캣 구성 설정을 담당하는 부분"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"외장톰캣 vs 내장톰캣 다른점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그렇다면 정…말!? 전혀 다른게 없을까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"결론만 말씀드리자면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"NO"}]},{"type":"text","value":" 입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"물론 많은 부분이 다르지는 않지만, 대표적으로 내장톰캣으로는 할 수 없지만 먼저 외장톰은 가능한 기능이 하나 있는데요 바로 tomcat의 virtual host라는 기능입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"virtual host"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"virtual host라는 기능은 이런겁니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVQ4y2WUS28bVRSA5/cgsUFCYtHQAJEQm9IFG1Ygsa0QUlRRRGmFCC3QpkrTvCrShKAClQJViUuKq5g6E2zHsRqcxLHsNI6buPErdjx+zMsz9sedG9IFHenqaO459zuPe85V2o6B27FeWI5rCmlgtJpUi1Uah3Vc91j3f2k+X0rbMel2nRcUna6L9zVrFnvJQ3LpCqbREvsWHWF7LF3p+OisF5xyoO2gtQo4jk0XW252hAOtkqZcDFGrxqjVljGaWYHvYLcNdLOFYem0hLSFvWE2MK2mBCum3SBX3mBzK4quN7wjMjJ1ZZDxv3qYCZ3i5qOTRB4PS6AvssnHY39z7laEM6NLzIWfUKnkKRT3seyWSFl49FIu1zKspVQOqnkJDC5f4/rDk3y/eJqRwFs8WrlKx9W4cW+J3k//5MPBIK+fnWd0Lo5lNcjuZgT0GYpDW/h1JMR0NDL5mEjfYDFynaEHPUwG3+WGv5fo6k1pk3xaYFZNMx/NMLuYIrVXEvY6lWqJRvMQZT+V4NlWklIuS63ibVbRmrv4gp/xxQ9vMPDTKS782Es4NiaBoY0sQ3dXmfCtce3Xx4QSezJlDyhvuZLepJSIk19dIRtWKcejlKNxpiY+on+8jzPfnubsRC8L/q+hesDgdIAeker7lwOc6L8voaZZJ5PdplDaP0q5iyvSdmXRC+U8K/EDbv/2FeenXuPCrXekVMMjMsLFtR0u/RJj/P4al+/EUNd3MQyNvKif1qii2G1dNigC/CST4YG6gWV2WQhe5fPJV/juTh8Xp18lEByWwD8iKQZ+jnFldpWLM8tEkjnRVkWKIjrTu2XL1oWZRTKdxq8mRU825MF78wN8MvKSiO6ESP1l7s59g6npfDml8vZ5Px9cCdLT72Pan8C2m2zvbJEv5FAQfbezm8O/lBTN6k2IIYELD4cZGHuToZn3uDTRR0idPOrP9SzjvnVuB5KM/h5nfaeAx6g3DmnpGkq5qhH+Z0+Ea0qFN4qdro0l6vJ0O0l6M04mnaAl6uN2bWmDrLcjZbdjClAd3aiLiWmiFCuCLGb0GCYfBTn0Airqa1ot4Ux//hB4o2a3TSFNoTf++9fllHjl+xe/hdjDQfFQNwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Untitled","title":"Untitled","src":"/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png","srcSet":["/static/bc5d1bc3deb6351584193a1ddfce0d4f/8890b/Untitled.png 293w","/static/bc5d1bc3deb6351584193a1ddfce0d4f/1f316/Untitled.png 585w","/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png 640w"],"sizes":["(max-width:","640px)","100vw,","640px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 그림처럼 도메인 host에 따라 각각의 다른 루트 컨텍스트를 갖게하여 하나의 웹애플리케이션 배포만으로 마치 여러 애플리케이션을 운영하는 것처럼 할 수 있는 것입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 기능을 사용하기 위해서는 위에서 잠깐 언급한 스프링 외장톰캣 구성요소 파일인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"server.xml"}]},{"type":"text","value":" 을 손보면 됩니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"xml"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"<!--...-->\n<Host name=\"a.thxwelchs.com\"  appBase=\"/webapps/weba\" unpackWARs=\"true\" autoDeploy=\"true\" xmlValidation=\"false\" xmlNamespaceAware=\"false\">\n</Host>\n\n<Host name=\"b.thxwelchs.com\"  appBase=\"/webapps/webb\" unpackWARs=\"true\" autoDeploy=\"true\" xmlValidation=\"false\" xmlNamespaceAware=\"false\">\n</Host>\n<!--...-->"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 처럼 구성하게 되면 "},{"type":"element","tagName":"a","properties":{"href":"http://a.thxwelchs.com"},"children":[{"type":"text","value":"a.thxwelchs.com"}]},{"type":"text","value":" 으로 접속시 weba 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보일 것이고 "},{"type":"element","tagName":"a","properties":{"href":"http://b.thxwelchs.com"},"children":[{"type":"text","value":"b.thxwelchs.com"}]},{"type":"text","value":" 으로 접속시 webb 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보이게 될 것입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이처럼 multiple host 웹애플리케이션을 단일애플리케이션으로 구성하는 이유는 관리포인트를 줄이기 위함입니다. (하나의 애플리케이션에서, 여러 사이트의 역할의 코드를 모아서 작성하고 관리 할 수 있거나 버전관리 측면을 보자면?)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Embedded Tomcat Mutlple context"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 기능은 확실하지 않지만 내장톰캣으로 구성하기에는 상당히 까다로운 것 같은데요, 가능은 한 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예를 들면 다음과 같이 서블릿컨테이너팩토리 빈을 다시 재구성하여 multiple context를 등록하는 방법도 있습니다 (직접 해보지는 않았습니다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"deckgo-highlight-code","properties":{"language":"java"},"children":[{"type":"text","value":"\n          "},{"type":"element","tagName":"code","properties":{"slot":"code"},"children":[{"type":"text","value":"@Bean\npublic ServletWebServerFactory servletContainer() {\n    return new TomcatServletWebServerFactory() {\n        protected TomcatWebServer getTomcatWebServer(Tomcat tomcat) {\n            System.out.println( \"tomcat.getServer().getCatalinaBase() =\" + tomcat.getServer().getCatalinaBase() + \"=\" );\n            new File(tomcat.getServer().getCatalinaBase(), \"/webapps\").mkdirs();\n            try {\n                Context context2 = tomcat.addWebapp(\"/weba\", new ClassPathResource(\"/home/thxwelchs/playground/weba.war\").getFile().toString());\n                Context context3 = tomcat.addWebapp(\"/webb\", new ClassPathResource(\"/home/thxwelchs/playground/webb.war\").getFile().toString());\n                context2.setParentClassLoader(getClass().getClassLoader());\n                context3.setParentClassLoader(getClass().getClassLoader());\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n            return super.getTomcatWebServer(tomcat);\n        }\n    };\n}"}]},{"type":"text","value":"\n        "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"웹서버를 활용한 reverse proxy"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만.. 잘 생각해보면 굳이 이럴 필요가 있을까요? virtualHost라는 기능은 일종의 웹서버 기능으로써 WAS의 책임에는 조금 벗어나는 범위입니다. 물론 WAS가 웹서버의 기능을 할 수 도 있지만, 일반적으로 WAS는 서블릿 컨테이너의 역할로써 소스코드의 파일을 해석하고 데이터를 로드하여 동적인 자료를 기반으로 정적인 자료로 전달해주는 것이 목적입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그렇다면 실제 웹서버를 사용하고 WAS는 서블릿컨테이너의 역할만 하게끔 구성하는건 어떨까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그러기 위해서는 먼저 우리는 내장톰캣이 구현된 애플리케이션 하나를 서비스 하나의 단위로 생각하는 것이 좋습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하나의 서버에 여러 애플리케이션을 운영하는 것보다는 하나의 애플리케이션이 VM 혹은 Linux Container(Docker)로 하나의 서비스로 구성하고 여러 서비스를 운영하는 것이 효율적이기 때문입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그렇다면 우리는 이렇게 구성해볼 수 있습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 56.31399317406143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz5WSu07DMBSG+y4sIAYGxIJgRDwBElOHDkzAws4GQ5+Bi4R4AgZGoIIBhJBAAlEQGwpt06a1ncSOb8ccp1VJLwtHVuL89v/5nBOXnHPWWLDgRgNgisJ6AVg9VErW2UQmQSOghPYRuMlYgxNj7QCRPwnpPFwdU9JhLB6Y+y9EUE4znQ0Paf20jDH9T+00DqUVi3kxH29O05RRxgVXoJRTGIdH1fm95a3qbtgOkYv6gKIFgP0zgzFJj9AoSijVQqD0+vU2V1naqGzOlhfPLs9RUVw4Y2i3/XR7wmiUcjGSttYqyzKb19wIW6vb6zPlhZWdtZvHO19U3gIheBB847ZhOd4chlGz2SGESwlae3/9s75/enB9X8NmSOUrnholpOBa8b9gtxAPmdVSYZPyvBDqW/PxfJHEPSnVSNpoyUcB4YFQWHWUkveXWprGUsoxs5u8EpP3ZDxt97+AIvQXk21wuWG4WtEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"제목 없는 프레젠테이션.png","title":"제목 없는 프레젠테이션.png","src":"/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png","srcSet":["/static/818872d9e4cb157ec0ad2b8e07ee29eb/8890b/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 293w","/static/818872d9e4cb157ec0ad2b8e07ee29eb/1f316/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 585w","/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 960w"],"sizes":["(max-width:","960px)","100vw,","960px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 구성하는 것을 reverse proxy라고 부릅니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게하면 웹서버의 역할과 WAS의 역할을 정확히 구분시킬 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여기서 아까 외장톰캣을 쓰는 스프링 애플리케이션처럼 하나의 스프링 애플리케이션에서 여러 애플리케이션의 코드를 작성하고 관리하고 싶다면? 물론 가능합니다. 스프링부트 애플리케이션에서 여러 애플리케이션 코드를 작성하고 스프링부트 애플리케이션을 실행 할 때 컨텍스트 구성 설정 값을 argument로 넘겨주게끔 구성하면 됩니다.\n(예를 들어 view  resource root path, server port, context path와 같은)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"마지막 정리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"조금 두서 없이 포스팅이 길어졌지만 마지막으로 간략하게 정리해보자면 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"내장톰캣"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"내장톰캣으로 실행하는 스프링부트 애플리케이션은 그 자체가 하나의 프로그램으로 서블릿컨테이너가 하나의 포트를 독자적으로 점유함 그렇기 때문에 여러 호스트를 분기 할 수 있는 기능을 사용하기 매우 복잡함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"jar든 war든 톰캣이 내장된 애플리케이션은 톰캣 구성에 대한 부분의 관심사를 분리하여 개발자에게 애플리케이션단의 코드 작성에 더 집중할 수 있게해줌(필요에 의하면 server.xml에서 작성했던 구성요소를 application.properties 에서 바인딩되어 내장톰캣에 설정됌)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"외장톰캣"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"외장톰캣은 Apache HTTPd 에서 사용하는 Virtual Host라는 main host 하위에 가상의 호스트를 소프트웨어적으로 둘 수 있는 기능을 제공하는데, 외장 Tomcat에서도 Host설정으로 이 apache virtual host를 설정할 수 있음 ( 즉 여러 애플리케이션을 하나의 포트로 서비스 할 수 있음 )"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n각각의 조직이 가지고 있는 애플리케이션 실행환경에 따라 맞는 애플리케이션 구성을 고민해보면 좋다.\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만 현재의 모던 환경에서는 일반적으로 여러 애플리케이션을 하나의 포트로 서비스 하지않고, 웹서버를 앞단에 두는 리버스프록시 구성환경이 많이 사용되고 있음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"참고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper"},"children":[{"type":"text","value":"https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat"},"children":[{"type":"text","value":"https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"a","properties":{"href":"https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html"},"children":[{"type":"text","value":"https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"이번 포스팅에서는 내장톰캣과 설치형으로 사용하는 외장톰캣이 무엇이 다른지, 그리고 내장톰캣으로는 해결 할 수 없는것이 있는지\n간단하게 알아보았습니다.\n포스팅 내용을 작성하기 전 이 내용을 조사해본 것은 전 직장 동료분과 오랜만에 만나 개발 담소를 나…","timeToRead":5,"frontmatter":{"title":"Embedded Tomcat과 Tomcat의 차이","userDate":"28 August 2021","date":"2021-08-28T08:42:30Z","tags":["springboot","tomcat"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVQoz6VSTU/DMAzt3+UvIPFTOCFx48SFU6eJAwdaBIjuo6gCtq5paYfYljRJY6fzWsQKGgI0K4mcJz/72YlT72HOnyNts34g241BN6JBbFVVFizBFmskB2tjDCL+XllrXSnzPB9dRudD5o9Sf8CuheRKqg8ypadztXq/vzrlC0Y+JaaCQghdaap5k/SOvSM/7YVvdxl/AQSlOmQAG9z23bPDPH1qdXue57ou5xwBDeqlWsRxkL2ON/GIUsqtbMaS2Swp5svpZCoEJ4RoZVlSEEmga57FFycHcdhvdMEXcmek33sGgKIohoOHKHoMx0Ge54RT3h0Da/v/dIhZNiYltalpt3II/9c773hqZ58ftgYYsn9LI+SvBgAAAABJRU5ErkJggg==","aspectRatio":1.7816091954022988,"src":"/static/e32a388ddc20368c5152e91fc90b7748/6af1e/postbg.png","srcSet":"/static/e32a388ddc20368c5152e91fc90b7748/c5c6c/postbg.png 930w,\n/static/e32a388ddc20368c5152e91fc90b7748/6af1e/postbg.png 1424w","sizes":"(max-width: 1424px) 100vw, 1424px"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHUlEQVQ4y23UaUzTdxgH8MdjMrwiEVRALqFaoAflamGWckkLhRZpEQql9KQtxR70X44CLVdBEEQJ4BRkImZRMGSyQ5mKx+amMQ6VeMQ5jZkTyMjmwVBB9xs73/z3TZ4X3zefd88X4J+YlRagBRP+rYuytqZaisuMsiRdwoFgAvUTH/+oLzL4XQ69qTqdSU+plIszV2ft4IE4Nx9azHWASxPWBNGhzMWEQBIE0Kik6E1RSJmcORG+o3Bu44YRxFrzEcrzq0dhQbaXRM9wZFMahZhIDoUC5dJ95Y140KIshazg3MU84nZIICUN6pjYNxc/GHmcETj8NGDLmeNWWs/FvsTm0fLEs4MRHtmPdCzFTYTQkoWDdmszHkxhpwH3RD5gqOu9gFX+D0s3G69fSrs5lhFQ+9ZtxdLr/FTO9E69AdVUV51XhSvuJ/luRY5SK9luwKBUUrQYD3KzQTnQCkNXb7/vsc7vdktQI7pEPPy0KcrSH09JfGU0GOf0Ow2oTlo9JnCTvYghxKMuaxOpFauFsnwMD2ZuV0Byux0EH550ZnhRb1Yw+1/WRJ1D5bENAxWV2LTZjCFzgf6ng6y2zxkBCpTG4KOz9cfIw/WHYa+5EQ8KM4rAcrAJeoZvOG1aT7snJg2i7KBxJPSxoSKN8hU9goGqZfqSOt9dj4Iycl7HxDFRY/ZuiiO3Hkx5xXiQl6WEduUgIO1bp9VxxHsmqg1NBo+aNDHqCzqVBrF53ElbtNykjWi+7xVceIdIiURYsYNsMthBJjfgwTg+D9QcLTTH9zj5xPnfpVDLUOFG+6naImxcVahBZZjlRVFk/mVKYO0Ywb/sQUIC9400X02VSeUgypbiQe8UPyA/9gLSDMWJyqWMC1yLkWld8fc1O7Hv+CIhKmDnzrUxbadJLMP+TIG+jc8TTstE0hBplgTyc/4HjOfwIedEG1SiK8t83LY80nmlH6oUY99W2aveiNV5qJFvR2k+fRPksI5zUYycr9j02J+POvoCjtR1LzxF/SIcGEVnQSyPA0K1xNl1+foxlVg7bqmqQnqNCelEincchn3Om9L2lkz87LG3t+FlOjllEv04u3Z2/AH0NO3Hg3QC7e8nBnCOCAwdq7A5kKXEikqM5nc5dMn8BlIyog34PludJphxXyJF1vDCC0fRwIqh+V5oqKnGg2HkrbBomQu4uPmuDCHQRh2F9Vdadu2Z02oKUGmEAZ2LODZrEskmuEbOFNuTP6mgis603x1a1Xr1KJTprXgwmskB88H9cPz0rWXLnV1+iF3LRjWUStTBcfxeRy1HnxIPPD9J7X49Quq9dSRk9xPP9V7PSzQlXhq1DnIzxHiQ6EMBD1c38F7rsTKcyBrhMJRfajfveyL07UBlZDsaiume6me1T3czWu6YvFW/sSO5z9r2dro7mlvAKDfhQSqFBUVyP7CZI518N6Vc8yY0zLKYx+8Uh55EjZL+iVrj7l8qVI1zffz2URvVeDc2JPl5qkzkzsrhAy9FiAe3cdKgpikROg9plru4kqc2utcjr+ChX4sCe6ewmL3IoG2daZB0vjkW/fF8Z2Ad2uK+eU5fW+kpq9CDRCzHg0plPqSlmkAq1cKOzMz6VK7sBS2s4IaIjl1TRenHrOyK671Je27pOKUPFelyJODyOk4tbOHFhStQavB7KJPnQVdnI6D5mb96uVWdLhBuO8KKCztPZ5C+poUGXg6PCTnLSmIMs4XbJK4r1sCf44rZy0GlUP/n/AGzLBP/3rIs3AAAAABJRU5ErkJggg==","width":151,"height":151,"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png","srcSet":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png 1x"}}]}}}},"relatedPosts":{"totalCount":2,"edges":[{"node":{"id":"7254531c-d2c4-5936-8579-10bd37f8b3b0","timeToRead":5,"excerpt":"이번 포스팅에서는 내장톰캣과 설치형으로 사용하는 외장톰캣이 무엇이 다른지, 그리고 내장톰캣으로는 해결 할 수 없는것이 있는지\n간단하게 알아보았습니다.\n포스팅 내용을 작성하기 전 이 내용을 조사해본 것은 전 직장 동료분과 오랜만에 만나 개발 담소를 나…","frontmatter":{"title":"Embedded Tomcat과 Tomcat의 차이"},"fields":{"slug":"/EmbeddedTomcat과Tomcat의차이/"}}},{"node":{"id":"2df25db5-7251-5114-b0bc-61db8afd6c24","timeToRead":4,"excerpt":"JPA N+1현상 querydsl fetchJoin 삽질한 경험 공유 Kotlin SpringBoot(2.2.4) querydsl(4.2.1) 문제 JPA로 쿼리를 하다보면, N + 1 문제를 마주하게 될 수도 있는데요. 사실 저의 문제는 정확하게 …","frontmatter":{"title":"JPA N+1현상 삽질"},"fields":{"slug":"/JPA-N+1/"}}}]}},"pageContext":{"slug":"/EmbeddedTomcat과Tomcat의차이/","prev":{"excerpt":"JPA ORM으로 개발하다보면 꽤나 많은 양방향 참조가 필요한 모델들이 있습니다. 그런데 문제는 이런 양방향관계를 가진 객체를 직렬화 하려고 할 때 무한참조가 되어 StackOverFlow를 발생시키는데요. 그렇다고 해서 ORM이 가진 장점을 포기하…","timeToRead":2,"frontmatter":{"title":"JPA 양방향 Entity 무한재귀 문제해결","tags":["kotlin","jpa","entity"],"date":"2020-03-06T22:47:00.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7816091954022988,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuV1BI/8QAGBABAQADAAAAAAAAAAAAAAAAAQIAESD/2gAIAQEAAQUCreFK8f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQADAAAAAAAAAAAAAAAAAAEAIDL/2gAIAQEABj8CmUr/AP/EABoQAAICAwAAAAAAAAAAAAAAAAEhAEERIDH/2gAIAQEAAT8hwMcFR0QvX//aAAwDAQACAAMAAAAQ9w//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8QcH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgEFAAAAAAAAAAAAAAABETEhACBBcbH/2gAIAQEAAT8QV+hKLesaEgmVIv3nb//Z","sizes":"(max-width: 1424px) 100vw, 1424px","src":"/static/4bf18ab37cd31474fd591b9287a49f4c/2cb8a/postbg.jpg","srcSet":"/static/4bf18ab37cd31474fd591b9287a49f4c/2f037/postbg.jpg 930w,\n/static/4bf18ab37cd31474fd591b9287a49f4c/2cb8a/postbg.jpg 1424w"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"fixed":{"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png"}}]}}},"fields":{"layout":"post","slug":"/JPA 양방향 Entity 무한 재귀 문제 해결/"}},"next":{"excerpt":"사건의 발단 어느날.. redis와 관련된 기능을 개발해야 할 일이 있어 redis를 local에서 docker 컨테이너로 실행 후 테스트를 해보고 있었습니다. 기능은 아주 간단해서 어떤 특정한 상황 때 hash 자료구조로 redis에 key val…","timeToRead":6,"frontmatter":{"title":"내 redis가 해킹당했다고? 심지어 local인데?","tags":["redis"],"date":"2021-08-29T07:31:54Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7816091954022988,"base64":"data:image/webp;base64,UklGRnoAAABXRUJQVlA4IG4AAACQAwCdASoUAAsAPtFUo0uoJKMhsAgBABoJYwC+SBu0qjemzRWAAP73gmhaXllxWxzoNy7BxWo3JF9iHdaoC9v7w6lxxSmV9oV8Ja/unpFbNwNXRsFIKTCIKtz0++KfMuV/BlytrAYf6Dzw6AAAAA==","sizes":"(max-width: 1424px) 100vw, 1424px","src":"/static/74cebb81aa653cf91cde1ea672c18160/ed80f/postbg.webp","srcSet":"/static/74cebb81aa653cf91cde1ea672c18160/30305/postbg.webp 930w,\n/static/74cebb81aa653cf91cde1ea672c18160/ed80f/postbg.webp 1424w"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"fixed":{"src":"/static/bf7f9f29887116a6d496e42f356b60db/192fd/thxwelchs.png"}}]}}},"fields":{"layout":"post","slug":"/내redis가해킹당했다고심지어local인데/"}},"primaryTag":"springboot"}},"staticQueryHashes":["3212170248","3213104607","3993936949","794779027"]}