{"componentChunkName":"component---src-templates-post-tsx","path":"/SPRING-DUPLICATION/","webpackCompilationHash":"a4b620a6a576f5649e44","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA2ElEQVQY02NgAIJIsyLfYJOSTCCTEcT//eu3IAMe8P//f+F///7B2Jhq480LdwVaJbzYsWW/NVBB1t8/fwuAtBcQ6wKxJRBbAbEFEJsCsS8QxwKxAxDbA3EtVN4TiNnABsZ5p+7yMU26v3LtLgOgYPGfP3+TgXQ20BX9QLoOiGcC2dOBdBsQTwHiXJBBQDFnIF0KUgvEnUCsAzYw0KRgVa5F4Z3GnAJhkE1AL2sDaT0gtgNiI6jr7KAudgdiLagYyIU6QKwCNBzkIxWwgWIKFoJ6xibSDFQAAMSLvx5xS4Y5AAAAAElFTkSuQmCC","width":400,"height":90,"src":"/static/8637e594ca86d58e20988ba8c4cfc1e7/647de/thxwelchs-logo-v2.png","srcSet":"/static/8637e594ca86d58e20988ba8c4cfc1e7/647de/thxwelchs-logo-v2.png 1x"}}},"markdownRemark":{"html":"<h1>Spring 다형성, 상속성을 이용한 중복코드 줄여보기</h1>\n<p>스프링부트를 활용하면 상당 부분 설정이 편리해진 부분이 있었지만, 흔한 MVC 패턴에서(물론 실제 개발은 MVVM 패턴으로 개발중) 엔드포인트 혹은 엔티티가 늘어 날 때마다 반복되는 코드들이 생기는게 불만스러웠습니다. 그래서 고민을 하게 되었습니다.</p>\n<blockquote>\n<p>객체지향스럽게(?) 다형성과 상속성을 지키는 구조로 중복되는 코드들을 줄여보는게 어떨까?</p>\n</blockquote>\n<h1>공통이되 중복되는 부분 제거</h1>\n<p>먼저 저의 스프링부트 구조에서 중복을 없앨만한 요소들을 찾아 보았습니다.</p>\n<p>저의 스프링부트 프로젝트의 모듈구조는 싱글모듈 구조 였고, </p>\n<p><code class=\"language-text\">controller</code>, <code class=\"language-text\">model</code>(entity), <code class=\"language-text\">service</code>, <code class=\"language-text\">repository</code> 를 주요 레이어로 가지는 구조였기에</p>\n<p><code class=\"language-text\">entity</code>가 늘어나면 늘어난 entity 기반으로 <code class=\"language-text\">controller</code>, <code class=\"language-text\">repository</code>, <code class=\"language-text\">service</code>를 생성해주어야 했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 123px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.41463414634146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACZklEQVQ4y3VT227aQBTkd6q2D63UKiUBG+Mb2Bh8w8bGBhsTYmIuSaMklXpR0yhUVVW1z/2B/uV0d0kICOXh2Md7mZ0Zz5ZExcL1hy8wrD5qvIHz1za+CSkmch9yJ4BlxXC6A8RJDsdL4ZI+Hc3gBRnaZgheMFATO5sq1WULp7MLNFoeRL6N6MDEv+kt/ow/wvATxIMpUgJ2UpwjHJwiG+XIxgvMFlcEfIhqrbULyNfbeHMgo8KvJxQCago2FNEER+YEqcNYcPdF1+8WBVr39wxNxMMccsNhAM8dD6/CGFynB1GyIKk2qAq54aKp+2joHuieBwBa232Jevj1ZgXbiVEmJ700u3BXK7h3K4RBjnmxxLi4xPFkiYvLTziZzAjgI8g2GAOkD+pDtbY2963SQtkLIbgRJMJQIcw1I4DW8mGYfahNd0vqI0N+G1BWHbaArxsw3DmRlYInB3Dku0Le1F966BGvb0CoPVy9vceUSV59/wnLicBLDnrT33BGd7CGn9HtjZDn7zGeFBhkCyTJhP3dKCmQZlOEUQZB3PWzJEgmTDtiRtckGy13BsM7g94toLcDBOEE2fEp3GCMXi9h+bNJHv1ghH58jNqW3I3kg0OVSCOxIRKPVA9l2UWVa+CI0/Gu0kSZ1GGVlkb69fiD5/uSSSSuyE2hqa+IFp4lt6guf6E+vEJLdxkjx09hkRDTJDheAkW1Njnciw3N2LS4QFProqK4eGEv0Lv5C3X5A4E/wPzsGv3hFElWoB+dYJyfQdNIZoUnYkMHqCSO3ck2KrIDyU4haT7zh21iN4RsIH4L4tMZpPUfdoH4dQ8DTtgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled/Untitled.png\"\n        title=\"Untitled/Untitled.png\"\n        src=\"/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png\"\n        srcset=\"/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png 123w\"\n        sizes=\"(max-width: 123px) 100vw, 123px\"\n      />\n  </a>\n    </span></p>\n<p><br>\n그래서 controller, repository, service의 공통되는 부분을 묶어서 중복을 제거하고자 했습니다.</p>\n<p><br/><br/></p>\n<h2>Service 공통 부분 중복 제거</h2>\n<p>중복되는 부분은 예를 들어 <code class=\"language-text\">service</code>에서 단순히 <code class=\"language-text\">repository</code>를 통해 처리 한 뒤  <code class=\"language-text\">controller</code>에게 전달해주는 그런 로직들이 대상이 될 것 입니다.  예시 코드입니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Service</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MenuService</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> menuRepository<span class=\"token operator\">:</span> MenuRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?</span>\n        <span class=\"token keyword\">fun</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span>menu<span class=\"token operator\">:</span> Menu<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Menu <span class=\"token punctuation\">{</span> \n        <span class=\"token keyword\">return</span> menuRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>Menu<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> menuRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n        <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>물론 controller에서 바로 repository를 DI하여 작업을 수행 할 수도 있겠지만\n가능하면 <code class=\"language-text\">controller</code> -> <code class=\"language-text\">service</code> -> <code class=\"language-text\">repository</code> | <code class=\"language-text\">other service</code> 의 레이어 형태를 지키는\n것이 바람직하지 않을까? 라는 생각 하고 있습니다.\n그래서 위 예시코드에 기본적으로 제공되는 메소드들을 굳이 직접 service에 작성하지 않고 호출하는 구조로 만들고 싶어서 다음과 같이 entity를 다루는 service라면 반드시 상속받게 할 BaseEntityService를 생성했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">/**\n    * Entity 공통 Service\n    * Generics description\n    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태)\n    *\n    * SimpleJpaRepository는 JpaRepository의 실질적인 구현체 클래스입니다.\n    * SimpleJpaRepository를 상속받기 위해선 반드시 super생성자로 클래스를 초기화 해주어야 하는 것 같은데,\n    * 그 super 생성자는 찾아보니 두개의 생성자로 오버로딩 되어 있고, 저는 그 중 하나인 \n    * entity의 클래스 타입과, entityManager를 받는 생성자로 슈퍼클래스 상속받게 했습니다.\n    */</span>\n<span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> BaseEntityService<span class=\"token operator\">&lt;</span>E <span class=\"token operator\">:</span> Any<span class=\"token punctuation\">,</span> ID <span class=\"token operator\">:</span> Serializable<span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>\n        clazz<span class=\"token operator\">:</span> KClass<span class=\"token operator\">&lt;</span>E<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n        entityManager<span class=\"token operator\">:</span> EntityManager<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> SimpleJpaRepository<span class=\"token operator\">&lt;</span>E<span class=\"token punctuation\">,</span> ID<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>clazz<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">,</span> entityManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>저는 JpaRepository가 어떤 구현체로 이루어져있는지 관심도 없었는데 이번에 처음 관심 갖게 되었고, 살펴보게 되었습니다. </p>\n<p>다음과 같이 두가지 생성자가 있는데 저는 두번째 타입의 생성자를 통해 상속하고 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.13333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACRElEQVQ4y2VT13LjMBDTx1xsq1GUSKo3W7aT2LmSuUwyc///Hzhw7RRPHjBQWYFY7CqIswFh2iJXvSDOByTFKByqBrEaBIlwL9eKbP2z3NeNrJ94zfq4RKD1JEVWz8QWqX9pZmJCrntoPlf5fBFLO2GlOriMQpqHeHgTrBXB5/oPXH5Ebc8o7Qm5OUKbPSZ7xFP5E5U50F2D1cYQ9soGd+sCq7UR3K0v79ahQ1DkdFXuoMoFKV2ldkbqdtBugSJHdBMlDV1OUHokBmlTVQdpNeN1wTqlG6wjCsYN7VePqAlDYVcfhDMzoCgHlE2Pph9Rd6NwWTOeqoepBtb5GGoeWEu7Ihi6GkWxwBU7tjvC8LSMeeRFh8J2FOhRtRRwraCwhOGwklJENhTxrXpsQmZYMtzKNmh4WktkWSttZQxaESsW/pCc7AdWm08REYpKgTgc7IK5HdDUO1TjGaY9Mk9mYrawHJAz98SRjn1WW7qbEPn2wvJT6ItocLlxMqU7mdRnYRhVH5D72D8rr87sjcN3DhJOOeRuOe5jyX1L3GXqMTn27fO9Yr4pOckm4ZS7mTH3lN9seNiNwzb3Q5hhyDmLteXKcB06fpDL0rd0Roce0Re+4muWsocnLq8tDtA5BYite6DYAbVZkHD/NpKX/TaASwTVNwT7/Qum328Yn14xnl8wnP6iO/zCvLxgWd7Ir5jv/2F+JJZn7uJZUHcn7uwD1+oWgfZ/Avcr4n4Jy3VDxzMKcc0I+I/r61+RZB1SIkmbmwG+4z+9pcHh1kZOWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled/Untitled%201.png\"\n        title=\"Untitled/Untitled%201.png\"\n        src=\"/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png\"\n        srcset=\"/static/739946555da520379ebceb0d8d474aeb/bc34b/Untitled1.png 293w,\n/static/739946555da520379ebceb0d8d474aeb/da9f0/Untitled1.png 585w,\n/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png 750w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n      />\n  </a>\n    </span></p>\n<p>그럼 <code class=\"language-text\">BaseEntityService</code>가 완성되었으니 사용하게 될 Service에서 상속만 하면 되겠죠? </p>\n<p>그 구조는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Service</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MenuService</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> menuRepository<span class=\"token operator\">:</span> MenuRepository<span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> entityManager<span class=\"token operator\">:</span> EntityManager\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> BaseEntityService<span class=\"token operator\">&lt;</span>Menu<span class=\"token punctuation\">,</span> Int<span class=\"token operator\">></span><span class=\"token punctuation\">(</span>Menu<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> entityManager<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?</span>\n        <span class=\"token comment\">// BaseEntityService에 이미 구현되어 있으니</span>\n        <span class=\"token comment\">// 이제 이런 JpaRepository에서 정의된 함수들은 없어도 됌</span>\n        <span class=\"token comment\">/*\n        fun save(menu: Menu): Menu { \n        return menuRepository.save()\n        }\n\n    fun findAll(): MutableList&lt;Menu> {\n        return menuRepository.findAll()\n    }\n        \n        ...\n        */</span>\n\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findAllJoinRestaurant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>Menu<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> menuRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAllJoinRestaurant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 서비스는 <code class=\"language-text\">Menu</code> 엔티티의 비즈니스로직을 처리하는 <code class=\"language-text\">Service</code>이고, Entity 타입과, Entity의 기본키가 될 자료타입을 제네릭으로 넘겨주고 Entity의 클래스와 DI 받은 EntityManager를 슈퍼클래스 생성자에 인자로 전달해주는 구조입니다.</p>\n<p>위처럼 구조를 갖춘 이유는, 사실 아직 제가 잘 몰라서..ㅋㅋ 도 맞지만</p>\n<p>BaseEntityService에서 받을 제네릭타입의 클래스를 런타임에선 얻을 수 없다는 걸 알았습니다.</p>\n<p>Spring에서 제공하는 어떤 Util이 있다는 자료를 보긴 했지만, 일단은 포기하고 저렇게 인자로 전달해주는 방식을 선택했습니다.</p>\n<p>어쨌든.. 저 형태를 갖추게 되면 MenuService에 직접적인 find, save, delete 등 JpaRepository에 정의되어진 spring data jpa의 기본 메소드들을 사용 할 수 있게 됩니다. 혹시 메소드의 재정의가 필요하다면 override하여 재정의 하면 됩니다.</p>\n<p>그 다음은 controller 차례입니다.</p>\n<p><br/><br/></p>\n<h2>Controller 공통 부분 중복 제거</h2>\n<p>먼저 controller에서 항상 공통이되 중복되는 부분이 어떤걸까요?</p>\n<p>주로 <code class=\"language-text\">전체조회하기</code>, <code class=\"language-text\">id로 하나 조회하기,</code> <code class=\"language-text\">삭제하기</code>, <code class=\"language-text\">수정하기</code>, <code class=\"language-text\">등록하기</code> 정도가 될 것 같습니다.</p>\n<p>그래서 이것들을 제거하기 위해 다음과 같은 BaseAPIController를 작성했습니다.</p>\n<p>저는 Restful 한 구조의 엔드포인트를 관리하는 controller를 생성할 것이기 때문에 <code class=\"language-text\">@RestController</code> 전용 슈퍼클래스를 생성 했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">/**\n    * Rest API 공통 컨트롤러\n    * Generics description\n    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태), S: 해당 엔티티의 비즈니스 로직을 처리하기 위한 서비스 클래스 (BaseEntityService를 상속하는 객체 여야 함.)\n    */</span>\n<span class=\"token annotation builtin\">@RestController</span>\n<span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> BaseAPIController<span class=\"token operator\">&lt;</span>E <span class=\"token operator\">:</span> Any<span class=\"token punctuation\">,</span> ID <span class=\"token operator\">:</span> Serializable<span class=\"token punctuation\">,</span> S <span class=\"token operator\">:</span> BaseEntityService<span class=\"token operator\">&lt;</span>E<span class=\"token punctuation\">,</span> ID<span class=\"token operator\">></span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation builtin\">@Autowired</span>\n    <span class=\"token keyword\">lateinit</span> <span class=\"token keyword\">var</span> service<span class=\"token operator\">:</span> S\n\n    <span class=\"token annotation builtin\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getOneByID</span><span class=\"token punctuation\">(</span><span class=\"token annotation builtin\">@PathVariable</span> id<span class=\"token operator\">:</span> ID<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>E<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">EntityNotFoundException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@GetMapping</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>MutableList<span class=\"token operator\">&lt;</span>E<span class=\"token operator\">></span><span class=\"token operator\">?</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@PostMapping</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>entity<span class=\"token operator\">:</span> E<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>E<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@PutMapping</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>entity<span class=\"token operator\">:</span> E<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>E<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>service<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@DeleteMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">deleteById</span><span class=\"token punctuation\">(</span><span class=\"token annotation builtin\">@PathVariable</span> id<span class=\"token operator\">:</span> ID<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">deleteById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@DeleteMapping</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>entity<span class=\"token operator\">:</span> E<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span>entity<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>상속받을 슈퍼클래스를 만들었으니 상속만 하면 슈퍼클래스에서 제공하는 엔드포인트는 모두 코드 작성 없이도 얻을 수 있을 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@RestController</span>\n<span class=\"token annotation builtin\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"<span class=\"token interpolation variable\">$API_VERSION_PREFIX</span>/menus\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ENDPOINT: localhost:8080/v1/menus</span>\n<span class=\"token keyword\">class</span> <span class=\"token function\">MenuController</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> menuService<span class=\"token operator\">:</span> MenuService\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> BaseAPIController<span class=\"token operator\">&lt;</span>Menu<span class=\"token punctuation\">,</span> Int<span class=\"token punctuation\">,</span> MenuService<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 여긴 분명.. 비어 있는데?</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음과 같이 슈퍼클래스에서 제공하는 엔드포인트에 정상적으로 요청하여 응답받아오는 것을 보실 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 926px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.319654427645794%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABdUlEQVQoz5WRS3LCMAyGfY+SN3k4cUicN6EMAbLoovtue4QeqMfpvf5KDjBlpgtYfPPHv2RJVsR0PGG3e8V+v8fpfMI8z5jPZ0zThGEY0Pe9Ybvd3p0ZPjNd22D9+Y2Xrx+I83Qwxi2JLnZDj67r0DSNoa7r5eLFq6rKoLU2VJVGvn9HdvyAOPQNurqCTFNIKRdNpfnOsgxFUSC9xFjZY2WKsrzFsyREFvsQUimoPEccx0iS5A5O5En+i7HXti0amn6JS4Pomxo5FeROObHZbAyKGxEcu3pX2Ct5OnpZQc81aNYS4m0+YRxHDGZ/w235zMh7o6TrU/+iWKlhpq66fItEXpILbTor2l8URQjDaNF1AM/zHkY4jgNrtYIsayjdIg0DxIEPj3zbsrCimEX6KMJ1XVM5zmiPXY84CuG5DnzyXS5q208hPLoY0POq3QG6UEijtSnme67paNvWcwV934cfBEg2GhH99rXngJvwlJywFH284C9leUhhO7AYLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled/Untitled%202.png\"\n        title=\"Untitled/Untitled%202.png\"\n        src=\"/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png\"\n        srcset=\"/static/6818db4932de6dc846a786978921974e/bc34b/Untitled2.png 293w,\n/static/6818db4932de6dc846a786978921974e/da9f0/Untitled2.png 585w,\n/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png 926w\"\n        sizes=\"(max-width: 926px) 100vw, 926px\"\n      />\n  </a>\n    </span></p>\n<p>음.. 이걸론 뭔가 부족한 것 같아서 덧붙여 AOP로 request 정보를 logging하는 것도 추가해보겠습니다.</p>\n<h2>AOP request logger 추가</h2>\n<p>먼저 저는 Kotlin에서 사용하는 KotlinLogging을 통해 logging을 할거라서 의존성을 하나 추가해주었습니다. java나 기존 slf4j를 사용하실거라면 이 의존성은 필요 없습니다.</p>\n<p>그러나 org.springframework.boot:spring-boot-starter-web 에서 제공하는 Aspect를 이용할 것이기 때문에 해당 의존성은 필수입니다. 아마 스프링부트 프로젝트라면 따로 추가하실 필요는 없습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token comment\">//logging</span>\n<span class=\"token function\">implementation</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"io.github.microutils:kotlin-logging:1.7.6\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>다음과 같이 Aspect logger를 작성해주고 pointcut과 around전략을 세웠습니다.</p>\n<p>보시다시피 그냥 request를 받는 controller 메소드들에 한해서 request 정보를 로깅하는 용도입니다.</p>\n<p>추후 APM(애플리케이션 성능 관리 툴)같은 것을 활용해서 로깅 추적 같은 것을 할 때 도움이 될 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@Component</span>\n<span class=\"token annotation builtin\">@Aspect</span>\n<span class=\"token keyword\">class</span> RequestLoggerAspect <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> logger <span class=\"token operator\">=</span> KotlinLogging<span class=\"token punctuation\">.</span><span class=\"token function\">logger</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 해당 패키지 하위에 있는 컨트롤러의 모든 메소드에 적용</span>\n    <span class=\"token annotation builtin\">@Pointcut</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"execution(* com.example.demo..controller.*.*(..))\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">requestPointCut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation builtin\">@Around</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"requestPointCut()\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation builtin\">@Throws</span><span class=\"token punctuation\">(</span>Throwable<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">requestLogger</span><span class=\"token punctuation\">(</span>joinPoint<span class=\"token operator\">:</span> ProceedingJoinPoint<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Any <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> joinPoint<span class=\"token punctuation\">.</span><span class=\"token function\">proceed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">val</span> request <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>RequestContextHolder<span class=\"token punctuation\">.</span><span class=\"token function\">currentRequestAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> ServletRequestAttributes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>request\n\n        <span class=\"token comment\">// TODO mapper를 빈으로 등록 해버리고 싱글톤 형태로 관리할까?</span>\n        <span class=\"token keyword\">val</span> mapper <span class=\"token operator\">=</span> <span class=\"token function\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">val</span> logMap<span class=\"token operator\">:</span> MutableMap<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> Any<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token function\">HashMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        logMap<span class=\"token punctuation\">[</span><span class=\"token string\">\"sessionID\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>requestedSessionId<span class=\"token operator\">?:</span> <span class=\"token string\">\"\"</span>\n        logMap<span class=\"token punctuation\">[</span><span class=\"token string\">\"requestURI\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>requestURI\n        logMap<span class=\"token punctuation\">[</span><span class=\"token string\">\"requestMethod\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>method\n        logMap<span class=\"token punctuation\">[</span><span class=\"token string\">\"sourceMethod\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> joinPoint<span class=\"token punctuation\">.</span>signature<span class=\"token punctuation\">.</span>declaringType<span class=\"token punctuation\">.</span>simpleName <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> joinPoint<span class=\"token punctuation\">.</span>signature<span class=\"token punctuation\">.</span>name\n        logMap<span class=\"token punctuation\">[</span><span class=\"token string\">\"params\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>parameterMap\n\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span>mapper<span class=\"token punctuation\">.</span><span class=\"token function\">writerWithDefaultPrettyPrinter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">writeValueAsString</span><span class=\"token punctuation\">(</span>logMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">return</span> joinPoint<span class=\"token punctuation\">.</span><span class=\"token function\">proceed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>자, 이제 AOP 적용 후 요청을 해보면?</p>\n<p>다음과 같이 로깅됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 731px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.835841313269494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQY022OWQ6CMBiEexktCAVK6SLSslTjEhPvf5qxJZAQ9OHLv2QyM8S6J/ztg2F6w7oH2v6OQnUwfAQrL1DGQ6oRddMj4xZMTii1B1N+3gtzRd4MSE4KGTuDVLWFG16zWck7qCAWQVAJF2YPqSfkRYsDFaBJM5OkEsflXicNvwiJyWNoF1tEQyGDWQiJiaso7lvo7t5C+NIkYwanPKKRZvrXZGf+LyjyBbLUfyXRqHAfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled/Untitled%203.png\"\n        title=\"Untitled/Untitled%203.png\"\n        src=\"/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png\"\n        srcset=\"/static/eeed86cb0f82fee8b5d989908965342b/bc34b/Untitled3.png 293w,\n/static/eeed86cb0f82fee8b5d989908965342b/da9f0/Untitled3.png 585w,\n/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png 731w\"\n        sizes=\"(max-width: 731px) 100vw, 731px\"\n      />\n  </a>\n    </span></p>\n<p><br/><br/></p>\n<h2>Repository 공통 부분 중복 제거</h2>\n<p>예를 들어 createdAt 컬럼에 인덱스가 있고 범위 조회를 해야 하는 조건과 같은 것이 될 수도 있겠습니다. (<code class=\"language-text\">SELECT * FROM entity WHERE createdAt BETWEEN &#39;YYYY-MM-DD&#39; AND &#39;YYYY-MM-DD&#39;</code>) 혹은 2차캐시를 적용하거나 locking이 필요한 경우에도 공통되는 부분들을 이 <code class=\"language-text\">BaseEntityRepository</code>에 정의 후 각각의 엔티티 <code class=\"language-text\">Repository</code>에서 상속받게 하면 중복되는 부분들이 제거 되고 한결 깔끔해진 코드를 볼 수 있을 것 같습니다.</p>\n<p>아 이 공통 repository는 상속용 interface이므로 스프링부트 애플리케이션이\n처음 로드 되면서 컴포넌트 클래스(Controller, Repository, Component)들을 빈에 등록 할 때 이 인터페이스도 포함하면 안되므로 반드시 <code class=\"language-text\">@NoRepositoryBean</code> 어노테이션을 달아주어야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token annotation builtin\">@NoRepositoryBean</span>\n<span class=\"token keyword\">interface</span> BaseEntityRepository<span class=\"token operator\">&lt;</span>T<span class=\"token punctuation\">,</span> ID <span class=\"token operator\">:</span> Serializable<span class=\"token operator\">?</span><span class=\"token operator\">></span><span class=\"token operator\">:</span> JpaRepository<span class=\"token operator\">&lt;</span>T<span class=\"token punctuation\">,</span> ID<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findByCreatedAtBetween</span><span class=\"token punctuation\">(</span>start<span class=\"token operator\">:</span> LocalDateTime<span class=\"token punctuation\">,</span> end<span class=\"token operator\">:</span> LocalDateTime<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>T<span class=\"token operator\">></span>\n\n    <span class=\"token annotation builtin\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT t FROM #{#entityName} t WHERE t.id >= :id\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 이런식으로 T로 받은 제네릭을 JPQL에서도 활용 가능합니다.</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findByBiggerId</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> ID<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>T<span class=\"token operator\">></span>\n\n    <span class=\"token annotation builtin\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT t FROM #{#entityName} t WHERE t.id = :id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation builtin\">@Lock</span><span class=\"token punctuation\">(</span>LockModeType<span class=\"token punctuation\">.</span>PESSIMISTIC_WRITE<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findByIdWithExclusiveLock</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> ID<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> T\n\n    <span class=\"token annotation builtin\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SELECT t FROM #{#entityName} t WHERE t.id = :id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation builtin\">@Lock</span><span class=\"token punctuation\">(</span>LockModeType<span class=\"token punctuation\">.</span>PESSIMISTIC_READ<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">findByIdWithSharedLock</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> ID<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> T\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>글이 너무 길어져 쓰고보니 많이 장황하네요, 어쨌든 앞으로 이런 중복되는 코드를 제거해가며 확장성 있는 구조가 될 수 있게 하는 연구를 많이 해 봐야겠습니다!</p>\n<p><br>\n코드링크 -> <a href=\"https://github.com/thxwelchs/springboot-starter-with-kotlin\">https://github.com/thxwelchs/springboot-starter-with-kotlin</a></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Spring 다형성, 상속성을 이용한 중복코드 줄여보기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스프링부트를 활용하면 상당 부분 설정이 편리해진 부분이 있었지만, 흔한 MVC 패턴에서(물론 실제 개발은 MVVM 패턴으로 개발중) 엔드포인트 혹은 엔티티가 늘어 날 때마다 반복되는 코드들이 생기는게 불만스러웠습니다. 그래서 고민을 하게 되었습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"객체지향스럽게(?) 다형성과 상속성을 지키는 구조로 중복되는 코드들을 줄여보는게 어떨까?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"공통이되 중복되는 부분 제거"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 저의 스프링부트 구조에서 중복을 없앨만한 요소들을 찾아 보았습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저의 스프링부트 프로젝트의 모듈구조는 싱글모듈 구조 였고, "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"controller"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"model"}]},{"type":"text","value":"(entity), "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"repository"}]},{"type":"text","value":" 를 주요 레이어로 가지는 구조였기에"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"entity"}]},{"type":"text","value":"가 늘어나면 늘어난 entity 기반으로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"controller"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"repository"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":"를 생성해주어야 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 123px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 63.41463414634146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACZklEQVQ4y3VT227aQBTkd6q2D63UKiUBG+Mb2Bh8w8bGBhsTYmIuSaMklXpR0yhUVVW1z/2B/uV0d0kICOXh2Md7mZ0Zz5ZExcL1hy8wrD5qvIHz1za+CSkmch9yJ4BlxXC6A8RJDsdL4ZI+Hc3gBRnaZgheMFATO5sq1WULp7MLNFoeRL6N6MDEv+kt/ow/wvATxIMpUgJ2UpwjHJwiG+XIxgvMFlcEfIhqrbULyNfbeHMgo8KvJxQCago2FNEER+YEqcNYcPdF1+8WBVr39wxNxMMccsNhAM8dD6/CGFynB1GyIKk2qAq54aKp+2joHuieBwBa232Jevj1ZgXbiVEmJ700u3BXK7h3K4RBjnmxxLi4xPFkiYvLTziZzAjgI8g2GAOkD+pDtbY2963SQtkLIbgRJMJQIcw1I4DW8mGYfahNd0vqI0N+G1BWHbaArxsw3DmRlYInB3Dku0Le1F966BGvb0CoPVy9vceUSV59/wnLicBLDnrT33BGd7CGn9HtjZDn7zGeFBhkCyTJhP3dKCmQZlOEUQZB3PWzJEgmTDtiRtckGy13BsM7g94toLcDBOEE2fEp3GCMXi9h+bNJHv1ghH58jNqW3I3kg0OVSCOxIRKPVA9l2UWVa+CI0/Gu0kSZ1GGVlkb69fiD5/uSSSSuyE2hqa+IFp4lt6guf6E+vEJLdxkjx09hkRDTJDheAkW1Njnciw3N2LS4QFProqK4eGEv0Lv5C3X5A4E/wPzsGv3hFElWoB+dYJyfQdNIZoUnYkMHqCSO3ck2KrIDyU4haT7zh21iN4RsIH4L4tMZpPUfdoH4dQ8DTtgAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Untitled/Untitled.png","title":"Untitled/Untitled.png","src":"/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png","srcSet":["/static/eb9cd826c2f454a0edfebb81e2a80baf/c9927/Untitled.png 123w"],"sizes":["(max-width:","123px)","100vw,","123px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그래서 controller, repository, service의 공통되는 부분을 묶어서 중복을 제거하고자 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Service 공통 부분 중복 제거"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"중복되는 부분은 예를 들어 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":"에서 단순히 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"repository"}]},{"type":"text","value":"를 통해 처리 한 뒤  "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"controller"}]},{"type":"text","value":"에게 전달해주는 그런 로직들이 대상이 될 것 입니다.  예시 코드입니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MenuService"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" menuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MenuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"menu"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Menu"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Menu "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" \n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" menuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MutableList"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Menu"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" menuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":".."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"물론 controller에서 바로 repository를 DI하여 작업을 수행 할 수도 있겠지만\n가능하면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"controller"}]},{"type":"text","value":" -> "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service"}]},{"type":"text","value":" -> "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"repository"}]},{"type":"text","value":" | "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"other service"}]},{"type":"text","value":" 의 레이어 형태를 지키는\n것이 바람직하지 않을까? 라는 생각 하고 있습니다.\n그래서 위 예시코드에 기본적으로 제공되는 메소드들을 굳이 직접 service에 작성하지 않고 호출하는 구조로 만들고 싶어서 다음과 같이 entity를 다루는 service라면 반드시 상속받게 할 BaseEntityService를 생성했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n    * Entity 공통 Service\n    * Generics description\n    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태)\n    *\n    * SimpleJpaRepository는 JpaRepository의 실질적인 구현체 클래스입니다.\n    * SimpleJpaRepository를 상속받기 위해선 반드시 super생성자로 클래스를 초기화 해주어야 하는 것 같은데,\n    * 그 super 생성자는 찾아보니 두개의 생성자로 오버로딩 되어 있고, 저는 그 중 하나인 \n    * entity의 클래스 타입과, entityManager를 받는 생성자로 슈퍼클래스 상속받게 했습니다.\n    */"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"abstract"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" BaseEntityService"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Any"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Serializable"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"?"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n        clazz"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" KClass"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        entityManager"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" EntityManager"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" SimpleJpaRepository"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"clazz"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"java"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" entityManager"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저는 JpaRepository가 어떤 구현체로 이루어져있는지 관심도 없었는데 이번에 처음 관심 갖게 되었고, 살펴보게 되었습니다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같이 두가지 생성자가 있는데 저는 두번째 타입의 생성자를 통해 상속하고 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 68.13333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACRElEQVQ4y2VT13LjMBDTx1xsq1GUSKo3W7aT2LmSuUwyc///Hzhw7RRPHjBQWYFY7CqIswFh2iJXvSDOByTFKByqBrEaBIlwL9eKbP2z3NeNrJ94zfq4RKD1JEVWz8QWqX9pZmJCrntoPlf5fBFLO2GlOriMQpqHeHgTrBXB5/oPXH5Ebc8o7Qm5OUKbPSZ7xFP5E5U50F2D1cYQ9soGd+sCq7UR3K0v79ahQ1DkdFXuoMoFKV2ldkbqdtBugSJHdBMlDV1OUHokBmlTVQdpNeN1wTqlG6wjCsYN7VePqAlDYVcfhDMzoCgHlE2Pph9Rd6NwWTOeqoepBtb5GGoeWEu7Ihi6GkWxwBU7tjvC8LSMeeRFh8J2FOhRtRRwraCwhOGwklJENhTxrXpsQmZYMtzKNmh4WktkWSttZQxaESsW/pCc7AdWm08REYpKgTgc7IK5HdDUO1TjGaY9Mk9mYrawHJAz98SRjn1WW7qbEPn2wvJT6ItocLlxMqU7mdRnYRhVH5D72D8rr87sjcN3DhJOOeRuOe5jyX1L3GXqMTn27fO9Yr4pOckm4ZS7mTH3lN9seNiNwzb3Q5hhyDmLteXKcB06fpDL0rd0Roce0Re+4muWsocnLq8tDtA5BYite6DYAbVZkHD/NpKX/TaASwTVNwT7/Qum328Yn14xnl8wnP6iO/zCvLxgWd7Ir5jv/2F+JJZn7uJZUHcn7uwD1+oWgfZ/Avcr4n4Jy3VDxzMKcc0I+I/r61+RZB1SIkmbmwG+4z+9pcHh1kZOWgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Untitled/Untitled%201.png","title":"Untitled/Untitled%201.png","src":"/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png","srcSet":["/static/739946555da520379ebceb0d8d474aeb/bc34b/Untitled1.png 293w","/static/739946555da520379ebceb0d8d474aeb/da9f0/Untitled1.png 585w","/static/739946555da520379ebceb0d8d474aeb/26fb4/Untitled1.png 750w"],"sizes":["(max-width:","750px)","100vw,","750px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그럼 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"BaseEntityService"}]},{"type":"text","value":"가 완성되었으니 사용하게 될 Service에서 상속만 하면 되겠죠? "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그 구조는 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MenuService"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" menuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MenuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" entityManager"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" EntityManager\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" BaseEntityService"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Menu"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Int"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Menu"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"::"}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" entityManager"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// BaseEntityService에 이미 구현되어 있으니"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 이제 이런 JpaRepository에서 정의된 함수들은 없어도 됌"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/*\n        fun save(menu: Menu): Menu { \n        return menuRepository.save()\n        }\n\n    fun findAll(): MutableList<Menu> {\n        return menuRepository.findAll()\n    }\n        \n        ...\n        */"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllJoinRestaurant"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MutableList"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Menu"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" menuRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllJoinRestaurant"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 서비스는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Menu"}]},{"type":"text","value":" 엔티티의 비즈니스로직을 처리하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Service"}]},{"type":"text","value":"이고, Entity 타입과, Entity의 기본키가 될 자료타입을 제네릭으로 넘겨주고 Entity의 클래스와 DI 받은 EntityManager를 슈퍼클래스 생성자에 인자로 전달해주는 구조입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위처럼 구조를 갖춘 이유는, 사실 아직 제가 잘 몰라서..ㅋㅋ 도 맞지만"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"BaseEntityService에서 받을 제네릭타입의 클래스를 런타임에선 얻을 수 없다는 걸 알았습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Spring에서 제공하는 어떤 Util이 있다는 자료를 보긴 했지만, 일단은 포기하고 저렇게 인자로 전달해주는 방식을 선택했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어쨌든.. 저 형태를 갖추게 되면 MenuService에 직접적인 find, save, delete 등 JpaRepository에 정의되어진 spring data jpa의 기본 메소드들을 사용 할 수 있게 됩니다. 혹시 메소드의 재정의가 필요하다면 override하여 재정의 하면 됩니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그 다음은 controller 차례입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Controller 공통 부분 중복 제거"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 controller에서 항상 공통이되 중복되는 부분이 어떤걸까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"주로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"전체조회하기"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"id로 하나 조회하기,"}]},{"type":"text","value":" "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"삭제하기"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"수정하기"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"등록하기"}]},{"type":"text","value":" 정도가 될 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 이것들을 제거하기 위해 다음과 같은 BaseAPIController를 작성했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"저는 Restful 한 구조의 엔드포인트를 관리하는 controller를 생성할 것이기 때문에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":" 전용 슈퍼클래스를 생성 했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n    * Rest API 공통 컨트롤러\n    * Generics description\n    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태), S: 해당 엔티티의 비즈니스 로직을 처리하기 위한 서비스 클래스 (BaseEntityService를 상속하는 객체 여야 함.)\n    */"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"abstract"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" BaseAPIController"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Any"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Serializable"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" S "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" BaseEntityService"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Autowired"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"lateinit"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"var"}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" S\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/{id}\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getOneByID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@PathVariable"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findById"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"orElseThrow"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"EntityNotFoundException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"MutableList"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"?"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@PostMapping"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" E"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@PutMapping"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"update"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" E"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"E"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" ResponseEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@DeleteMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/{id}\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"deleteById"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@PathVariable"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"deleteById"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@DeleteMapping"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"delete"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" E"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"delete"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"entity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"상속받을 슈퍼클래스를 만들었으니 상속만 하면 슈퍼클래스에서 제공하는 엔드포인트는 모두 코드 작성 없이도 얻을 수 있을 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@RequestMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\""},{"type":"element","tagName":"span","properties":{"className":["token","interpolation","variable"]},"children":[{"type":"text","value":"$API_VERSION_PREFIX"}]},{"type":"text","value":"/menus\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ENDPOINT: localhost:8080/v1/menus"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"MenuController"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" menuService"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MenuService\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" BaseAPIController"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Menu"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Int"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" MenuService"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 여긴 분명.. 비어 있는데?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같이 슈퍼클래스에서 제공하는 엔드포인트에 정상적으로 요청하여 응답받아오는 것을 보실 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 926px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 54.319654427645794%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABdUlEQVQoz5WRS3LCMAyGfY+SN3k4cUicN6EMAbLoovtue4QeqMfpvf5KDjBlpgtYfPPHv2RJVsR0PGG3e8V+v8fpfMI8z5jPZ0zThGEY0Pe9Ybvd3p0ZPjNd22D9+Y2Xrx+I83Qwxi2JLnZDj67r0DSNoa7r5eLFq6rKoLU2VJVGvn9HdvyAOPQNurqCTFNIKRdNpfnOsgxFUSC9xFjZY2WKsrzFsyREFvsQUimoPEccx0iS5A5O5En+i7HXti0amn6JS4Pomxo5FeROObHZbAyKGxEcu3pX2Ct5OnpZQc81aNYS4m0+YRxHDGZ/w235zMh7o6TrU/+iWKlhpq66fItEXpILbTor2l8URQjDaNF1AM/zHkY4jgNrtYIsayjdIg0DxIEPj3zbsrCimEX6KMJ1XVM5zmiPXY84CuG5DnzyXS5q208hPLoY0POq3QG6UEijtSnme67paNvWcwV934cfBEg2GhH99rXngJvwlJywFH284C9leUhhO7AYLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Untitled/Untitled%202.png","title":"Untitled/Untitled%202.png","src":"/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png","srcSet":["/static/6818db4932de6dc846a786978921974e/bc34b/Untitled2.png 293w","/static/6818db4932de6dc846a786978921974e/da9f0/Untitled2.png 585w","/static/6818db4932de6dc846a786978921974e/5aeae/Untitled2.png 926w"],"sizes":["(max-width:","926px)","100vw,","926px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"음.. 이걸론 뭔가 부족한 것 같아서 덧붙여 AOP로 request 정보를 logging하는 것도 추가해보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"AOP request logger 추가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 저는 Kotlin에서 사용하는 KotlinLogging을 통해 logging을 할거라서 의존성을 하나 추가해주었습니다. java나 기존 slf4j를 사용하실거라면 이 의존성은 필요 없습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그러나 org.springframework.boot:spring-boot-starter-web 에서 제공하는 Aspect를 이용할 것이기 때문에 해당 의존성은 필수입니다. 아마 스프링부트 프로젝트라면 따로 추가하실 필요는 없습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//logging"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"implementation"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"io.github.microutils:kotlin-logging:1.7.6\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같이 Aspect logger를 작성해주고 pointcut과 around전략을 세웠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"보시다시피 그냥 request를 받는 controller 메소드들에 한해서 request 정보를 로깅하는 용도입니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"추후 APM(애플리케이션 성능 관리 툴)같은 것을 활용해서 로깅 추적 같은 것을 할 때 도움이 될 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Aspect"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" RequestLoggerAspect "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" logger "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" KotlinLogging"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"logger"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 해당 패키지 하위에 있는 컨트롤러의 모든 메소드에 적용"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Pointcut"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"execution(* com.example.demo..controller.*.*(..))\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"requestPointCut"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Around"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"requestPointCut()\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Throws"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"Throwable"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"::"}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"requestLogger"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"joinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ProceedingJoinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Any "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" result "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" joinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"proceed"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"RequestContextHolder"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"currentRequestAttributes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"as"}]},{"type":"text","value":" ServletRequestAttributes"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"request\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// TODO mapper를 빈으로 등록 해버리고 싱글톤 형태로 관리할까?"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" mapper "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ObjectMapper"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"val"}]},{"type":"text","value":" logMap"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MutableMap"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"String"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" Any"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"HashMap"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sessionID\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"requestedSessionId"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"?:"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"\""}]},{"type":"text","value":"\n        logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"requestURI\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"requestURI\n        logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"requestMethod\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"method\n        logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"sourceMethod\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" joinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"signature"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"declaringType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"simpleName "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\".\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" joinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"signature"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"name\n        logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"params\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"parameterMap\n\n        logger"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"info"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"mapper"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"writerWithDefaultPrettyPrinter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"writeValueAsString"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"logMap"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" joinPoint"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"proceed"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"자, 이제 AOP 적용 후 요청을 해보면?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같이 로깅됩니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 731px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 19.835841313269494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAq0lEQVQY022OWQ6CMBiEexktCAVK6SLSslTjEhPvf5qxJZAQ9OHLv2QyM8S6J/ztg2F6w7oH2v6OQnUwfAQrL1DGQ6oRddMj4xZMTii1B1N+3gtzRd4MSE4KGTuDVLWFG16zWck7qCAWQVAJF2YPqSfkRYsDFaBJM5OkEsflXicNvwiJyWNoF1tEQyGDWQiJiaso7lvo7t5C+NIkYwanPKKRZvrXZGf+LyjyBbLUfyXRqHAfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Untitled/Untitled%203.png","title":"Untitled/Untitled%203.png","src":"/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png","srcSet":["/static/eeed86cb0f82fee8b5d989908965342b/bc34b/Untitled3.png 293w","/static/eeed86cb0f82fee8b5d989908965342b/da9f0/Untitled3.png 585w","/static/eeed86cb0f82fee8b5d989908965342b/b7ee0/Untitled3.png 731w"],"sizes":["(max-width:","731px)","100vw,","731px"]},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Repository 공통 부분 중복 제거"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예를 들어 createdAt 컬럼에 인덱스가 있고 범위 조회를 해야 하는 조건과 같은 것이 될 수도 있겠습니다. ("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SELECT * FROM entity WHERE createdAt BETWEEN 'YYYY-MM-DD' AND 'YYYY-MM-DD'"}]},{"type":"text","value":") 혹은 2차캐시를 적용하거나 locking이 필요한 경우에도 공통되는 부분들을 이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"BaseEntityRepository"}]},{"type":"text","value":"에 정의 후 각각의 엔티티 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Repository"}]},{"type":"text","value":"에서 상속받게 하면 중복되는 부분들이 제거 되고 한결 깔끔해진 코드를 볼 수 있을 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"아 이 공통 repository는 상속용 interface이므로 스프링부트 애플리케이션이\n처음 로드 되면서 컴포넌트 클래스(Controller, Repository, Component)들을 빈에 등록 할 때 이 인터페이스도 포함하면 안되므로 반드시 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@NoRepositoryBean"}]},{"type":"text","value":" 어노테이션을 달아주어야 합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"kotlin"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-kotlin"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@NoRepositoryBean"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" BaseEntityRepository"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"T"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Serializable"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"?"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" JpaRepository"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"T"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findByCreatedAtBetween"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"start"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" LocalDateTime"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" end"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" LocalDateTime"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MutableList"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"T"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Query"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"SELECT t FROM #{#entityName} t WHERE t.id >= :id\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 이런식으로 T로 받은 제네릭을 JPQL에서도 활용 가능합니다."}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findByBiggerId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" MutableList"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"T"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Query"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"SELECT t FROM #{#entityName} t WHERE t.id = :id\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Lock"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"LockModeType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"PESSIMISTIC_WRITE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findByIdWithExclusiveLock"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" T\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Query"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"SELECT t FROM #{#entityName} t WHERE t.id = :id\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","builtin"]},"children":[{"type":"text","value":"@Lock"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"LockModeType"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"PESSIMISTIC_READ"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"fun"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findByIdWithSharedLock"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" T\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"글이 너무 길어져 쓰고보니 많이 장황하네요, 어쨌든 앞으로 이런 중복되는 코드를 제거해가며 확장성 있는 구조가 될 수 있게 하는 연구를 많이 해 봐야겠습니다!"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n코드링크 -> "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/thxwelchs/springboot-starter-with-kotlin"},"children":[{"type":"text","value":"https://github.com/thxwelchs/springboot-starter-with-kotlin"}]}]}],"data":{"quirksMode":false}},"excerpt":"Spring 다형성, 상속성을 이용한 중복코드 줄여보기 스프링부트를 활용하면 상당 부분 설정이 편리해진 부분이 있었지만, 흔한 MVC 패턴에서(물론 실제 개발은 MVVM…","timeToRead":6,"frontmatter":{"title":"Spring 중복코드 줄여보기","userDate":"25 February 2020","date":"2020-02-25T12:51:55.000Z","tags":["java","kotlin","spring","다형성","상속성"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHFYmSoB//EABcQAAMBAAAAAAAAAAAAAAAAAAECESD/2gAIAQEAAQUCUUskGP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgMf/aAAgBAQAGPwIq/wD/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAEBAAE/IYBZgqF4Z5//2gAMAwEAAgADAAAAEHPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAIDAQAAAAAAAAAAAAAAAQAxEBEhgf/aAAgBAQABPxAHQF6rRE2vutcPbjeFI3P/2Q==","aspectRatio":1.78,"src":"/static/a35a8e884b14f74b53a5eaa0d438e2f3/771ce/SPRING-DUPLICATION-postbg.jpg","srcSet":"/static/a35a8e884b14f74b53a5eaa0d438e2f3/f8f18/SPRING-DUPLICATION-postbg.jpg 930w,\n/static/a35a8e884b14f74b53a5eaa0d438e2f3/771ce/SPRING-DUPLICATION-postbg.jpg 1424w","sizes":"(max-width: 1424px) 100vw, 1424px"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEr0lEQVQ4y2NggIKK7GoGXRVJhv///4P54bY+WaXlRdEeOa4TdNS0V8krGa8P9J/UWFbZ4WFv6V0SFuArAFIXGhLB0FXQwIAV2Jg6MIFoBRNdRVsV6/9JniEvTaNSfyjInPxvK7j8f4xi239T3fp3egq2/8vjM6NAatMCEliwGjajZRaDv04wM4jtrOs2P9U67+x+qy33QrU2vVBSO7S2XG/x4cUOnXsrHHZtMpKMuJtll3QF6BtWkPqJld2YBvp7B4JpkJdV+VRuFKrmnD3mf/lsqFrHHxEe1pO+Hq4v8/ML/jc11u3LsEi/4qPo9L++oNgEpKcsJpsJw0Af3yiYgcwSogrnerQ6/h/WWPS807xsuZ2Gw/e8nNxfhYVF/xuSai9HSKS8t1dx+d9T2AA2sDSmENPA8NA0MN32/z+LmYzu6SqbuZ86rPb/r3HsWFZdU/KiorLyf1F63us5Lv2bbBTT//uY+//fUrfAFKSnr7AVm4EFcBeqiBtcjNFd8z9G/+H/CPnO/7kZqd+trWz/VyVl17TLd9zUDYz7Zeds+785pNUMpKcQmwsDIzMgBi78z8znoHGhyLD5/1OtQ1Vplmn7CjPz/rt6e76rtI7PyzPtui6nm3tVXc/sf05WLdjA+IRcTANdA4MhBtr+Z5Z3VLxgaFLzP1O6aXNLTsm5jNzs/xVlpZ9zLeKPGmo1XlBWqr7j6OT9Jy4uFWxgZEQ8poEyHgpg2uS/PZO+n86ZILGS//nCxQ8bM4vPhsZF/k/2iPw9wbZ2j65d/vTgoII+f7+QN3HhcZYgPbGRWAx09vaHhSGjvLjGzUwpvyX14SUH6xpqv0elxvxvC6j+H6q44Jm20aQ91lZx+1zNHd5Oq5qsA9LTWtiAaaCNtTMkgR9axSrEKXY6ISz5Qlld3Z/8rKL/ubGpf/1tGn7JaU36q6ux5aG8QvF7X22Pdy8OXJcE6ZnVMoURw0ALdWMYk8VIVe9kdV3r//KK2v+lBcV/Yy3jfomoe/43WK78USAg5LM4S9b/UsP0k8tvL+IHJ7XaekwDTfVswTQbrySHgarRzpacluM9nf0/M7PS/peY5/7fYbr0W2FUwnO3YufXztK+L9P0o/f3Hl4MLiAq86owDbR18IGFIRMnp8A1e2G3/42GNf+nerf+azKo/L9VfdbnjQazf2zXm3t5uVH/A1kx+a8p0akqID0RfhGYBmoo6IFpMV5BdiN1m63u5kl7M1X7HocrTP1fplP3f53N7JdLbCe9mWvec6NULuOLm7Hn1+bWLnmQnvzEAkwD9XQhXj6ySotZWcXzsJxK01d72xWXC4w2/W+LXvyyNb/nXU1q++95gZP21esXXnIy9PrmFRUBNtDXMwTTQHcvSLL5/G8uq4CwzkNZqa7/sjobPmVpzXtZbjcJmCt6vrQkTP61zHrx73na3f81JNT/xxVmK4H0REXEYRqYmprA4OgQD5YICgxs8fJI+KpvlHkhwqz8dIZF0cUKj5rzi9wnXS5wr7mbEZjxP9DDZ3H0nhXg8jM5MQ17ib148RQ4u7o2Mzg41HW5vaPJAQtL3SPGxlpHzewM99m7WexwD3bNganLLslHMQMA1vLffALEkU8AAAAASUVORK5CYII=","width":151,"height":151,"src":"/static/bf7f9f29887116a6d496e42f356b60db/b3147/thxwelchs.png","srcSet":"/static/bf7f9f29887116a6d496e42f356b60db/b3147/thxwelchs.png 1x"}}]}}}},"relatedPosts":{"totalCount":6,"edges":[{"node":{"id":"c9385601-2d32-55b5-841d-867c9b3bb173","timeToRead":1,"excerpt":"AOP…","frontmatter":{"title":"AOP 관점지향프로그래밍"},"fields":{"slug":"/AOP/"}}},{"node":{"id":"2baf5d38-24bb-581d-84fa-fcb7ed46d5e1","timeToRead":3,"excerpt":"Java 와일드카드 제네릭  제네릭은 Unbound wildcard라고 불리며, 어떤 타입이 될지 모른다 라는 의미입니다. wildcard…","frontmatter":{"title":"제네릭 1편 와일드카드 (Generic Wildcard)"},"fields":{"slug":"/GENERIC-1/"}}},{"node":{"id":"a5f4fa5b-ae17-519a-84ab-d791af173498","timeToRead":3,"excerpt":"낙관적 락 충돌이 발생하지 않을 거라고 낙관적으로 가정하는 방법 데이터베이스 레벨이 아닌 JPA레벨에서 버전 관리 기능을 통해 구현되어있음 테이블에 version…","frontmatter":{"title":"JPA Locking"},"fields":{"slug":"/JPA-locking/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/SPRING-DUPLICATION/","prev":{"excerpt":"JPA N+1현상 querydsl fetchJoin 삽질한 경험 공유 Kotlin SpringBoot(2.2.4) querydsl(4.2.1) 문제 JPA로 쿼리를 하다보면, N +…","timeToRead":4,"frontmatter":{"title":"JPA N+1현상 삽질","tags":["springboot","jpa","N+1","fetch join"],"date":"2020-02-24T02:08:55.000Z","draft":false,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.78,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeJedEA//8QAFhABAQEAAAAAAAAAAAAAAAAAASAx/9oACAEBAAEFAjUJ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/Air/AP/EABoQAQACAwEAAAAAAAAAAAAAAAEAEBEhUYH/2gAIAQEAAT8hI7ODsMaz8ojX/9oADAMBAAIAAwAAABDrz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQADAAMAAAAAAAAAAAAAAAEAETEQUbH/2gAIAQEAAT8QBAtqLqWMH0I9jvBKbHZ//9k=","sizes":"(max-width: 1424px) 100vw, 1424px","src":"/static/7addc8c3b7e92bb4253ac9a7ce3c174d/771ce/JPA-N%2B1-postbg.jpg","srcSet":"/static/7addc8c3b7e92bb4253ac9a7ce3c174d/f8f18/JPA-N%2B1-postbg.jpg 930w,\n/static/7addc8c3b7e92bb4253ac9a7ce3c174d/771ce/JPA-N%2B1-postbg.jpg 1424w"}}},"author":{"id":"thxwelchs","bio":"thxwelchs","avatar":{"children":[{"fixed":{"src":"/static/bf7f9f29887116a6d496e42f356b60db/b3147/thxwelchs.png"}}]}}},"fields":{"layout":"post","slug":"/JPA-N+1/"}},"next":null,"primaryTag":"java"}}}