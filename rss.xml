<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Tech blog]]></title><description><![CDATA[끄적끄적]]></description><link>https://thxwelchs.github.io</link><generator>RSS for Node</generator><lastBuildDate>Sat, 20 Nov 2021 10:18:08 GMT</lastBuildDate><item><title><![CDATA[UML과 코드로 이해하는 의존성]]></title><description><![CDATA[의존성 의존성이란 무엇일까? 우리는 객체지향 프로그래밍을 하면서 의존성이란 의미를 정말 가슴 깊이 받아들이고 있을까? 적어도 난 그렇지 않았던 것 같다.. 그래서 맨날 보면서도 까먹는 의존관계 UML…]]></description><link>https://thxwelchs.github.io/UML과코드로이해하는의존성/</link><guid isPermaLink="false">https://thxwelchs.github.io/UML과코드로이해하는의존성/</guid><pubDate>Sat, 20 Nov 2021 11:31:54 GMT</pubDate><content:encoded>&lt;h1&gt;의존성&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;의존성이란 무엇일까?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;우리는 객체지향 프로그래밍을 하면서 의존성이란 의미를 정말 가슴 깊이 받아들이고 있을까?&lt;/p&gt;
&lt;p&gt;적어도 난 그렇지 않았던 것 같다.. 그래서 맨날 보면서도 까먹는 의존관계 UML 화살표 방향과 코드로써 의존관계를 명확하게 표현해보면 그래도 좀 덜 잊혀지지 않을까?해서 준비해보았다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;의존성&lt;/strong&gt;,
추상적으로 다가오는 이 단어를 구체적인 한 문장의 설명으로 이렇게 표현할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt;에 의존할 경우, &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt;가 변경될 때  의존하고 있는 &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt; 또한 변경될 가능성이 있음을 의미한다.&lt;/p&gt;
&lt;p&gt;변경될 가능성이란 여러가지의 형태가 될 수 있는데 구체적인 예를 들자면 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;클래스의 이름이 변경된다.&lt;/li&gt;
&lt;li&gt;메소드의 이름이 변경된다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;클래스의 메소드 구현부가 변경된다. (파라미터, 리턴타입 내부 로직 등)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;당연하게도 잘 생각해보면 내부로직 변경의 경우 반드시 A가 영향을 받는 것은 아닐 수도 있다. (설계가 잘 되어있다면)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;이 외 무엇이건 변경에 포함되는 것들&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이러한 의존성에도 여러 종류가 있고 일반적으로 객체지향에서는 네가지 종류로 분류하고 있다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;&lt;strong&gt;Association, 연관관계&lt;/strong&gt;&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// puml
@startuml
class &amp;quot;A&amp;quot; as a1
class &amp;quot;B&amp;quot; as b1

a1 --r b1 : Association
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML에서는 아래와 같이 실선으로 나타냄&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 210px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3f32225a06371ef41b0f1836d945e7da/9c4c6/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.38095238095238%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVQY03WQW0sCURSF/eU99xL0EEVhCZblraBGRLsgRZTkFa0ZnTQdQy0ix+aMo0XO1xmth6AWfHBYsNbZe/tsXSOb8JNJBDBbKSrJGCNnwtPzE0bHoNfv0+31aBttavU6hmHwPp3yOTDRjndJ7q/T1RJoJyG6zTa+kV5jZXOR5YM1KsUIF/EAwxcTXdUo5wrSK6NVb8ldZ2fclsoIYcPLK8ruKgs7S1xlw1wqG7Q0HZ+oq+hnISqne0y6GYrRIP16GyyHqSnmDATucAQS7/0xsLDUBp1MjEJqG+vhhMZpmOZdDd+gVEKUDpg00oxUhXxoC9MSeHL/wZPTe+b1MsbHQ1pmU9Tifu6rmpyw80jxKEJeiVJU5MrRKMK254XyVq7r/kZ6nj4tGzWtcHMYppyMcx4K0mnJG3o/CrmeNbR5kzjjybzsu+Av/fhj511mxCxr2/JE0v8CDRawoT3V2OcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/3f32225a06371ef41b0f1836d945e7da/9c4c6/Untitled.png&quot;
        srcset=&quot;/static/3f32225a06371ef41b0f1836d945e7da/9c4c6/Untitled.png 210w&quot;
        sizes=&quot;(max-width: 210px) 100vw, 210px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;어떤 객체 A에서 어떤 객체 B로 갈 수 있는 객체간의 그래프 경로가 있음을 의미 &lt;/p&gt;
&lt;p&gt;여기서의 그래프 경로는 런타임에서의 영구적인 경로를 의미한다. (컴파일이 되고 런라팀에서는 항상 A는 B로 갈 수 있는 경로가 있다.)&lt;/p&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A {
	private B b;
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;br/&gt;
&lt;p&gt;Association이 객체간의 그래프가 형성되어있는지 유무를 따지는지의 일반적인 관계를 나타내는 것이라고 한다면 더 구체적으로 다음과 같이 관계를 전체와 부분의 집합으로 명확하게 명시하고자 할 때 &lt;code class=&quot;language-text&quot;&gt;Aggregation&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Composition&lt;/code&gt; 으로 나누어서 볼 수도 있다. &lt;/p&gt;
&lt;p&gt;(개인적으로 가장 헷갈렸던 부분이다. 블로그나 글을 찾아봐도 차이가 되게 모호하다고 생각했는데, Aggregation, Composition은 Association의 관계표현 종류 중 하나인 것이다.)&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h3&gt;Association - Aggregation, 집약관계&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// puml
@startuml
class &amp;quot;A&amp;quot; as a2
class &amp;quot;B&amp;quot; as b2

a2 --ro b2 : Aggregation
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML로 나타내면 아래와 같이 실선과 칠해지지 않은 다이아몬드(?)로 표현된다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 215px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7c5af314760df17a79a8fbc115b8a0cc/61c66/Untitled%201.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.627906976744185%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVQY022RSU/CABCF+eHeTTyaeNCoB5EgajECihKEGFBcCoiKIIsLhaQulK2ldP0sigcTJ5lMZjLvzZsZn1qrcBlb5/zIj9KIc5+IYtgOsizz2mohtSXktzfanQ6NZtOrvTI2DZgYPKUEEuEV2vcxaqktOo0XfOpjhcW1eZb2l7nNB8mGA4z6Ix5KtxxGouQyWUr5AifHCa5zFxTFPN33T+yWTHpnjbmNBTK5IGexFZ7KVXyjaplqcpNyOoTeSiKGAiheM30N46OH3R1idQfYyhAGGm5fxfjso4gVpBOB/LGfXj1BMxWicVfBpxQLDAsCev2I4U2Yq6CfsWXzn7kzn5o5UPk4FZh4Z9LrcarCKrVS2VMotSlEdxEPBMTINufemoZl/RA4Dq7r/nXH/SE2TOrpJJeREMX4HpmtANKzd8MpcDw20LQJmjrBnKn7JfijcJb/RtNyPIz+jdO9J01HfQHPn7DxcfU4zQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/7c5af314760df17a79a8fbc115b8a0cc/61c66/Untitled%201.png&quot;
        srcset=&quot;/static/7c5af314760df17a79a8fbc115b8a0cc/61c66/Untitled%201.png 215w&quot;
        sizes=&quot;(max-width: 215px) 100vw, 215px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;어떤 객체 A에 어떤 객체 B로 갈 수 있는 객체간의 그래프 경로가 있음을 의미&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A객체가 소멸되더라도 B객체가 메모리에서 사라지지는 않음&lt;/li&gt;
&lt;li&gt;의존관계의 생명주기는 독립적임&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A {
	private B b;
	
	public A(B b) {
		this.b = b;
	}
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;br/&gt;
&lt;h3&gt;Association - Composition, 합성관계&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;//puml
@startuml
class &amp;quot;A&amp;quot; as a3
class &amp;quot;B&amp;quot; as b3

a3 --r* b3 : Composition
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML로 나타내면 아래와 같이 실선과 칠해진 다이아몬드로 표현된다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 217px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e4b96b9cd3f64979c08315674498a499/d6985/Untitled%202.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.336405529953915%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVElEQVQY03WR/UvCUBSG/fODKAiKQKgf0llIhUUfVISlqdXc1Kw1lbnQkWUzS1Yz9/F0NSgoOvBw33PgvgfeE3E7D/SKWbpyFrep8nR9hR+EEAp+VeAH39p3Rwy0Mg+FNE6tSL9SYGA/E3GbBquJWZa2FqlXk+RTcZz3IYZpULg4R1YVZKU44SST4Syfo2N3hTvUMltMx6ZIZ2OoB1H0coXI8K7J9to8qxtRrPoOl+txeuY9zn0Xu9kWus1jwxSvNemfjBbOo01jZg1tUyKamEPOJ4W5hF4ShgNdZ6CkcLR9POOQUlLipfcKnk848mCM0Ix+CEX/WhPLcru8abt45jHWkcRNURWG9QbGQQzzLImZlsisLOO4w0lOf1P8mYVeiHW6h3Ei0cqto8YXqMoKEf9jhHGloSuVCWatQRB8hR+Kw/zHuGyrw61cpl6qciv+9vt9PgH/l7BV6HXj4gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/e4b96b9cd3f64979c08315674498a499/d6985/Untitled%202.png&quot;
        srcset=&quot;/static/e4b96b9cd3f64979c08315674498a499/d6985/Untitled%202.png 217w&quot;
        sizes=&quot;(max-width: 217px) 100vw, 217px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;어떤 객체 A에 어떤 객체 B로 갈 수 있는 객체간의 그래프 경로가 있음을 의미&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;부분 객체가 전체 객체에 속해지는 관계&lt;/li&gt;
&lt;li&gt;의존관계의 생명주기 또한 의존적 ( B는 A에 의해서 생명주기가 결정됌)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A {
	private B b;
	
	public A() {
		this.b = new B();
	}
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;hr&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;Dependency, 의존관계&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;//puml
@startuml
class &amp;quot;A&amp;quot; as a4
class &amp;quot;B&amp;quot; as b4

a4 ..r&amp;gt; b4 : Dependency
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML로 나타내면 다음과 같이 점선과 열려있는 화살표로 표현된다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 218px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/561c849781deba477a7327d32df754ab/1a647/Untitled%203.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.19266055045871%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQY042Q21MBARSH/ft68VbTE4MuM5EwUVPNYMIWuyjkVrRGxCKxayu7X6vtoV6azpkz55yH73cuDrXTRsmlGBezaC2RcbPFf2ylvzGVBIZXKVSLm1REtNkCx6SUY9vnJHjmpibukDuJMl/qZDIZslcCWUFAsHIimaRQLCJKEsp0CoaBEPWw4XVyUwqQjmwj393jeLmV8PtdHJ94kcsh8uEj9MWS16HCsNtj1Oszs+pJ/5m5MvnqX4djRvEM+UMPm14XzXKEwpkfuWYJTqVrFqUwWv0UtRxFDIX4MKybDNO+zfyuf2bTZCEPUBIB1GqMVeeCZnyXTrWFQxFztM59tC8PqMfcpINBDGzIdn6HaQ8y9HfasX3uk3vIFpv1bdFZb6jPVZqFWxrFsvXDEk9y115sLfhHrG3w8PjFNNb8TQVN0/gEKoWxtpVnPisAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/561c849781deba477a7327d32df754ab/1a647/Untitled%203.png&quot;
        srcset=&quot;/static/561c849781deba477a7327d32df754ab/1a647/Untitled%203.png 218w&quot;
        sizes=&quot;(max-width: 218px) 100vw, 218px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;의존관계의 의존성이라는 것은 다음과 같은 특징중 하나에 속한다.&lt;/p&gt;
&lt;p&gt;예) A라는 객체에 B라는 객체의 의존관계가 있을 때의 특징&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A객체의 어떠한 함수(메소드)에서 B타입의 객체가 &lt;strong&gt;파라미터에 명시&lt;/strong&gt;됌&lt;/li&gt;
&lt;li&gt;A객체의 어떠한 함수(메소드)에서 B타입의 객체가 &lt;strong&gt;리턴타입에 명시&lt;/strong&gt;됌&lt;/li&gt;
&lt;li&gt;A객체의 어떠한 함수(메소드)에서 B타입의 &lt;strong&gt;인스턴스가 생성&lt;/strong&gt;됌&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A {
	public void method(B b) {
	}

	public B method2() {
		return new B();
	}

	public void method3() {
		B b = new B();
	}
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Association(연관관계)과 차이가 있다면 Association은 영구적인 협력이 되는 것이고, Dependency(의존관계)는 일시적으로 협력을 필요로 하는 어떠한 시점에 관계를 맺고 끊는 관계이다.&lt;/p&gt;
&lt;hr&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;Inheritance, 상속관계&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;//puml
@startuml
class &amp;quot;A&amp;quot; as a5
class &amp;quot;B&amp;quot; as b5

a5 --r|&amp;gt; b5 : Inheritance
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML로 나타내면 아래와 같이 실선과 칠해지지 않은 닫힌 화살표로 표현된다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 208px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f157e4b8ca8e458f5c94d4d1923ee2ac/7854c/Untitled%204.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.69230769230769%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVQoz42Pa2vTYBiG87f9AYLoFxndh00RWtaxEx7AuLqx7mDXFntwbdPaJc2paTdXZIYlJs00uXyTWgTxgzdc3M/74b6f95FCXSOyDPyRiqebxHHC/2h+6xKITJoNTB1f1fgxj5DOSs94/3odf1ZGKW0wu/nKrfuNTq+HbppcairqSMOwTGxnzPT6KisMDIPOcYFX2zm+mPtcilm76CE9ev6Qx3urtGubHG+tMhkaTMVPG2fntM7rND9UhdeolU/pNlo0S2XCmcv3Tp9C8SkP8k+oVDY52Vth0PqENDgp0j4oEt2corzJM2opYn0EXrjAn/9xQahNuBPMjiqY1V3qcgHPKeNUdujWG0h++yVBTyZU3nJRWGM8WZwUC5K/SPUzus/cHQxxazsiJxN8foe+u74o7Mt5+vtF1ENx8lqOse0sCuOYJEn+Sao7zWAob6Ck2aMtqi9ydD82kWzDxtStDNsaE0VRFlgGl1q+M0+LxTx1rjBGJtbvvOd7/ALqEvhJsYgqwwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/f157e4b8ca8e458f5c94d4d1923ee2ac/7854c/Untitled%204.png&quot;
        srcset=&quot;/static/f157e4b8ca8e458f5c94d4d1923ee2ac/7854c/Untitled%204.png 208w&quot;
        sizes=&quot;(max-width: 208px) 100vw, 208px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;상속관계에서도 의존성의 의미가 있는데, 그 이유인즉슨 Super &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt;가 변경될 때 Sub &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;도 변경될 가능성이 있다라는 것을 의미한다&lt;/p&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A extends B {

}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;hr&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;Realization, 실체화관계&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;//puml
@startuml
class &amp;quot;A&amp;quot; as a6
class &amp;quot;B&amp;quot; as b6

a6 ..r|&amp;gt; b6 : Realization
@enduml&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;UML로 나타내면 아래와 같이 점선과 칠해지지 않은 닫힌 화살표로 표현된다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 207px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ac04dfecc94db344a5373305eff0e96f/8b2ce/Untitled%205.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.850241545893724%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABg0lEQVQoz42R3U/TUBjG+497aWKiFyaIATEBpmMGiSGRLxkIm4HocGWz7dbB6frBFrcxNc6lXTNOf5527kZvfE+e8/Ge/J7kzaNFzjWx12YsrvjluCRJwv9UNBgSKiZlQ1co3uFuOkUrH6zwbvsZ48F7zIOX3PaHfO33sFstPN/jslbDDwK+GAZCCDrdbmY4ti0qxVXevn7KsHOo2DU8W6A9eH6fh1uL6B83OCks0nUCvvUH1Ks65+UPmaqfLjg7LVNTPaN0zmQ4YvS5ylLuEfeULiqbFAuPEZaN1jjNox/mifsljO11vKaAdOo7tUlmd/lHqiZ+j5/NgMHRCddnm1T2XjDplRBHBey6iTbW3xAau0TmDvXcMkHQyUCZSOWRZEqXTJLMexpNsv/v+iWjyhZRyjb3aGwsKUMLzdpdx9rPc1VUIy8/4WZuKGUW0D9iFtoPs0FjJ4eZssevKK8s0FI9zW/7uI6XyfcC4jjOgL/Tnr/np5QJN36HtnBnvOsRhiG/AYQZ+N5GI5OkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/ac04dfecc94db344a5373305eff0e96f/8b2ce/Untitled%205.png&quot;
        srcset=&quot;/static/ac04dfecc94db344a5373305eff0e96f/8b2ce/Untitled%205.png 207w&quot;
        sizes=&quot;(max-width: 207px) 100vw, 207px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;말그대로 추상화가 실체화되는 관계이다, 인터페이스와 구현체간의 관계라고 생각하면 이해가 쉽다.&lt;/p&gt;
&lt;p&gt;마치 코드로 나타내면 다음과 같다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class A implements B {}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;hr&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;p&gt;앞으로도 UML과 코드로 객체간의 의존관계를 명확히 이해해보고 더
좋은 설계에 힘써봐야겠다. &lt;/p&gt;
&lt;br/&gt;
&lt;p&gt;&lt;em&gt;puml 이라고 주석쳐있는 부분의 코드는 plantuml에서 그린 uml 코드이다.
관심이 있다면 plantuml을 찾아보기를 권장한다.
IntelliJ에서도 plugin을 지원하는 등 많은 기능을 제공한다.&lt;/em&gt;
&lt;a href=&quot;https://plantuml.com/ko/&quot;&gt;https://plantuml.com/ko/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[내 redis가 해킹당했다고? 심지어 local인데?]]></title><description><![CDATA[사건의 발단 어느날.. redis와 관련된 기능을 개발해야 할 일이 있어 redis를 local에서 docker 컨테이너로 실행 후 테스트를 해보고 있었습니다. 기능은 아주 간단해서 어떤 특정한 상황 때 hash 자료구조로 redis에 key…]]></description><link>https://thxwelchs.github.io/내redis가해킹당했다고심지어local인데/</link><guid isPermaLink="false">https://thxwelchs.github.io/내redis가해킹당했다고심지어local인데/</guid><pubDate>Sun, 29 Aug 2021 07:31:54 GMT</pubDate><content:encoded>&lt;h1&gt;사건의 발단&lt;/h1&gt;
&lt;p&gt;어느날.. redis와 관련된 기능을 개발해야 할 일이 있어 redis를 local에서 docker 컨테이너로 실행 후 테스트를 해보고 있었습니다.&lt;/p&gt;
&lt;p&gt;기능은 아주 간단해서 어떤 특정한 상황 때 hash 자료구조로 redis에 key value를 넣으면 되는 것이었는데, 특정한 시간이 지나면 자동으로 해당 key들이 지워질 수 있게 key에 TTL을 지정해주기로 했습니다.&lt;/p&gt;
&lt;p&gt;그래서 TTL을 5분정도로 주고 5분이 지나고 제대로 삭제가 되었는지 확인 해보기로 했습니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;redis 설치, 실행&lt;/h1&gt;
&lt;p&gt;먼저 redis를 로컬에 설치하기 위해 직접 redis-server를 설치해서 실행해도 되지만, 저는 환경의 이식성이나 편리함을 위해 docker를 사용하기로 했습니다.&lt;/p&gt;
&lt;p&gt;개발환경에서 컨테이너를 지속적으로 띄웠다 내렸다 할 것이기 때문에 다음과 같이 &lt;code class=&quot;language-text&quot;&gt;bitnami/redis&lt;/code&gt; 이미지를 사용하는 &lt;code class=&quot;language-text&quot;&gt;docker-compose.yml&lt;/code&gt;를 작성했습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;여러 redis docker image가 있겠지만 저는 bitnami에서 배포하는 이미지를 선호합니다. bitnami는 최신 버그 수정 및 기능에 대해 빠른 피드백과 반영이 이루어지기 때문에 그렇습니다.&lt;/p&gt;
&lt;/blockquote&gt;

        &lt;deckgo-highlight-code language=&quot;yaml&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis:
    image: &amp;#39;bitnami/redis:latest&amp;#39;
    environment:
      - ALLOW_EMPTY_PASSWORD=yes # 비밀번호를 생략하고 redis에 접근가능하게 하는 옵션
    ports:
      - &amp;#39;6379:6379&amp;#39;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;docker-compose 를 실행해주고 redis-cli로 접속해보면?&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;docker-compose up -d&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis-cli&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 432px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bdf92f978d83c3e3d0886e044533423c/7c246/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 13.310580204778159%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVQI12WMuW7CUBQF+QuggBAblGCbxQt+scBLghfZkdgLaNMnkdJE4j9QaOj5y+HZlClGc49GurUw32CICPe1IHrfSufYQYqQ2wkyLD9hmiyYpiVLNNvD2/+yOF5JP09k32eyrz+KnwtatKMmipQn4TEKQ3rWCw+6jTJ06RhORVuzKj8OJlVrPY/pmD5dkaFOYhTnDdWZV3dLd+XDeY7px1hBQpivMWcxq8MHdVWn0TX+0ewNaMhWV/rSJdrdcjdlvwFj32N3t7uS1gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/bdf92f978d83c3e3d0886e044533423c/7c246/Untitled.png&quot;
        srcset=&quot;/static/bdf92f978d83c3e3d0886e044533423c/8890b/Untitled.png 293w,
/static/bdf92f978d83c3e3d0886e044533423c/7c246/Untitled.png 432w&quot;
        sizes=&quot;(max-width: 432px) 100vw, 432px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;짜잔 이렇게 간단하게 로컬환경에 레디스를 설치해보고 접속까지 너무 짧은순간에 완성되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(redis에 직접 접근하기 위해서는 redis-cli 혹은 redis client tool 을 사용해야 하는데, 이 부분은 별도의 설치가 필요하니 각자 OS환경에 맞는 설치가 사전에 필요합니다.)&lt;/em&gt;&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;테스트&lt;/h1&gt;
&lt;h3&gt;hash 키 저장&lt;/h3&gt;
&lt;p&gt;다음과 같이 입력하면 hello라는 key에 있는 world라는 필드에 hellowrold라는 문자열을 value로 가지게하는 해쉬 자료구조를 저장하게됩니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;hset hello world helloworld&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;hash 잘 저장되었는지 확인 순서대로&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;hash key 확인&lt;/li&gt;
&lt;li&gt;hash key 어떤 필드들이 있는지 확인&lt;/li&gt;
&lt;li&gt;hash field에 어떤 value가 저장되었는지 확인&lt;/li&gt;
&lt;/ol&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;keys *
hkeys hello
hget hello world&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 287px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fa145fc973b3b2b7f5e6c03a379b0039/4af4d/Untitled%201.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 40.41811846689895%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVQoz1VRSXLCQAz0HxJCtiogYbcNBoxXDHjDAQwkBw75/0M606rYBQfVSKNRT3dLC7ISq90FEz9R5xnzKMc0SOClR0TFN0xvK/Vy+4XhIkR36uG1P6njpWfe1Zob72XIClPYm0KCOYdHywi9mS/5bJWha3lo6zaeu4ZEBXYLqoX5CYa7ge6s4acl3OQA04+l2TGXeBtM8T606kHmHcNGS19I7xaMueYpgCA7KcmxkrUXJmRIuenpisV6Bzc+oPj5lQ/ZT8orHPWWRMiUwHeAlEJAsnOUBfTxoTXAY3uIp48xGp2R5Bzgybq+Z/6pC7BIDvJSDKePgZJPMEomy1VxUSy28pmXHNFXfpIx34/sSHqV5yRFUFlKmJ/rTTI4xC0TiCCDeSCAHxNH7nRng766o+9WmMny6LcAGv/LqCSTJcENxbippFDaWA0wZzRUzbuqR9nNG8l/kPP9cp52r80AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/fa145fc973b3b2b7f5e6c03a379b0039/4af4d/Untitled%201.png&quot;
        srcset=&quot;/static/fa145fc973b3b2b7f5e6c03a379b0039/4af4d/Untitled%201.png 287w&quot;
        sizes=&quot;(max-width: 287px) 100vw, 287px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;hash 키에 expire time 지정&lt;/h3&gt;
&lt;p&gt;TTL 동작여부를 테스트 하기 위해 hash key에 expire 명령을 통해 TTL을 지정해줍니다.&lt;/p&gt;
&lt;p&gt;다음과 같이 명령하면 hello라는 키에는 300초의 ttl을 지정해 줄 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;expire hello 300&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;ttl을 지정해주고 다음과 같이 남아있는 ttl이 있다면? ttl을 반환하게 됩니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;ttl hello&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;ul&gt;
&lt;li&gt;ttl이 남아있으면 해당 값을 반환&lt;/li&gt;
&lt;li&gt;expire time이 설정되어있지 않았으면 &lt;code class=&quot;language-text&quot;&gt;-1&lt;/code&gt; 반환&lt;/li&gt;
&lt;li&gt;key가 삭제되었으면 &lt;code class=&quot;language-text&quot;&gt;-2&lt;/code&gt; 반환&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;저는 5분(300초) 로 지정했고 4초가 지나서 다음과 같이 반환되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 209px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c3a15bb4d0a72a2e02d041d1d7b26a10/fa79b/Untitled%202.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.138755980861244%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2ElEQVQY002P1w6CQBBF+Qvbi7EgYkFBECkqXUHAHk2MiYn//wvX3Uk0PpzszmT3zB1BdSOMTA8DYwnVjaEtY3QnJvozBxJDX28I08/Q6CmQ6V2E1thAT7MxtUPIusscazSHMwhedmayFRMlMLwtrDCnWrECukflDfpqg/T0QIcNUuwAbrKHpDkkOT7eNCDIr+yPD2HupZj7KawopyROUtLJE4qqheL2gh0XqHaGRK07IurimOpKe/DrcYTvOotwh+RwR3Z5YsJSSGwdTlhcKSkXfPmX/tecDx+Ng0EMEsuPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/c3a15bb4d0a72a2e02d041d1d7b26a10/fa79b/Untitled%202.png&quot;
        srcset=&quot;/static/c3a15bb4d0a72a2e02d041d1d7b26a10/fa79b/Untitled%202.png 209w&quot;
        sizes=&quot;(max-width: 209px) 100vw, 209px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;사라져 버린 key&lt;/h1&gt;
&lt;p&gt;그리곤 약 1분정도 지났을까요? expire time이 얼마나 남았나 확인을 해보니..&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 217px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0f062830ad7b56920b2bc371dc468e89/d6985/Untitled%203.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.050691244239633%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQI1y1O2wqCQBTsF3roRiS0ZV7KwrRM3TKVVpTS7gT1EPT/3zDtbj0M5zBnZs7Upn6MZH+DTXegrELIStCswsSL4GwYissLUX5G+XhDmwdSl+yvUG0fwe4AdnzASwqssyO62gw1IRJGIbBWMXSXwlxsONaSc6OMh2/lA2ItQKZLeVPMOXQnxCxI/97tL3DMhaJVerhLnJ4f5LzVMs7RM2xpEA/qyggd1UJ7OEGTmHJvDsZo9A20xCSG5L4gM2KuBVK8qAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/0f062830ad7b56920b2bc371dc468e89/d6985/Untitled%203.png&quot;
        srcset=&quot;/static/0f062830ad7b56920b2bc371dc468e89/d6985/Untitled%203.png 217w&quot;
        sizes=&quot;(max-width: 217px) 100vw, 217px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;br/&gt;
&lt;p&gt;…? &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;-2&lt;/code&gt;가 반환되었습니다..&lt;/p&gt;
&lt;p&gt;위에서 말씀드렸다시피 &lt;code class=&quot;language-text&quot;&gt;-2&lt;/code&gt;는 key가 삭제되었음을 의미하는데요 어찌된 일일까요?&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;알 수 없는 key&lt;/h1&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;keys *&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;key가 정말 삭제되었는지 의심이 되어 key 전체목록을 봐보기로 했습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 185px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ad2ea2ac3c9b45089480ae643666992c/b63e1/Untitled%204.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.891891891891895%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiklEQVQoz4WS6VLCQBCE8w54a8kN4b4SICEHgQTCfYglluX7P0abHgtKQMsfW7uT7PR+PTOK5ozhzXbQ+yEaVgAzWMAarVDvDWXVzCGC1R796Qtmu0/5lyhrsMdrudv2Jsg1DJTaDjL1LpSqMUAvWMoH3Q3RtAMRr3T7KOoOytFOEWM4R8ebRuelCLqTLfzlG8LtB8odF6pmIV3rQCFFw/Jxn61IEpNJzQQK9yIBOkhWdMTieVwnC7jLlOV8lVAlvkkVcZsuyXeFlvgyg4Jmwwk3IkwrzmSDwfxVqB/zNTzkqhf7+VKYbPhzuWCHa7jTrcSk4k5iiqotSygOiXT02zmy7IvFb0JLqLqDmVCTls1gWZ7U+kniX0uhNXu8EkLWiwLd4Syi2ol1UrOjuaYpj/4rWDMHQsjX2SnSMeYIHZrEppHwZ+KhhufUCmtl+gsJ2NnRei+2R+t3iVk/Ws9Gs3aoIUViifxR7KSGVcOT+WOQqrTFPsvQckZilYScURLFi60jHe88F5oXhF+wCUKPcsAUfwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/ad2ea2ac3c9b45089480ae643666992c/b63e1/Untitled%204.png&quot;
        srcset=&quot;/static/ad2ea2ac3c9b45089480ae643666992c/b63e1/Untitled%204.png 185w&quot;
        sizes=&quot;(max-width: 185px) 100vw, 185px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;정작 있어야 할 &lt;code class=&quot;language-text&quot;&gt;hello&lt;/code&gt; key는 없고 아까는 존재하지 않았던 backup1 ~ 4 key가 생겼네요? &lt;/p&gt;
&lt;p&gt;혹시 뭔가.. 잠깐 컨테이너가 내렸다 올라온건가? 내가 받은 &lt;code class=&quot;language-text&quot;&gt;bitnami/redis&lt;/code&gt; 도커이미지가 잘못되었나? 원래 redis에서는 일정 주기마다 백업을 하는 기본전략이 있나? 라는 생각에 redis 공식문서와 bitnami/redis github issues를 뒤져봤지만 해당 내용에 대해서는 찾을 수 없었습니다.&lt;/p&gt;
&lt;p&gt;이후로 반복적으로 더 테스트해보았고 다음과 같은 결과를 도출해냈습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;짧은 시간(1분 이내)이든 긴시간이든 랜덤하게 key가 갑자기 모두 삭제됌 (ttl 적용 여부와 관계없이)&lt;/li&gt;
&lt;/ul&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;redis 모니터링 해보기&lt;/h1&gt;
&lt;p&gt;그래서 key를 입력한 뒤 갑자기 삭제되기까지 대체 무슨 일들이 일어나는지 더 상세하게 살펴보기 위해 redis를 모니터링 해보기로 했습니다.&lt;/p&gt;
&lt;p&gt;모니터링은 다음과 같이 할 수 있습니다. &lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis-cli monitor&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 명령을 통해 redis에 어떤 명령들이 내려졌는지 로그를 확인 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;약 5~7분 정도의 모니터링을 진행하고 있었을 때 였을까요? 갑자기 이상한.. 로그가 올라왔습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/15372/Untitled%205.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 16.38225255972696%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVQI112NWQ6CQBBEuYX6YYwim8yArCM7aEbRRKP3P0zZM0Rj/Ki8Tld1tVHJB0p5R9qNyHoSMR+uWPMMM9PHfMuwsLjmvz7+b85oLk+04wtiuOkicZwYN2fsskbLDAXcpIaft2CiAz/0CIqBMhKMZrVb+QmWXgRDmR4dOUml5aY1rH0BJy6ppIJN3AQ57KjQs/KnR60uVoVhefrm3sbtXyUDwbquAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/463a7/Untitled%205.png&quot;
        srcset=&quot;/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/8890b/Untitled%205.png 293w,
/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/1f316/Untitled%205.png 585w,
/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/463a7/Untitled%205.png 1170w,
/static/fc1ee50bdf9d6e4cc17b50e5fd1874c2/15372/Untitled%205.png 1222w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;해당 로그를 분석해보자면 &lt;code class=&quot;language-text&quot;&gt;flushall&lt;/code&gt; 명령으로 모든 key를 지워버리고 &lt;code class=&quot;language-text&quot;&gt;backup1~4&lt;/code&gt; key에 알 수 없는 스크립트 실행문을 저장합니다.&lt;/p&gt;
&lt;p&gt;위 명령이 랜덤하게 제 로컬 redis에서 계속해서 실행되고 있어, 제가 저장했던 key가 모두 삭제되고 알 수 없는 &lt;code class=&quot;language-text&quot;&gt;backup1~4&lt;/code&gt; key들만 남아있게 된 것이었습니다. oh my god&lt;/p&gt;
&lt;p&gt;해당 keyword로 구글링 해본 결과 redis 기본포트 &lt;code class=&quot;language-text&quot;&gt;6379&lt;/code&gt; 가 열려있고 인증정보 없이 접근할 수 있는 환경 일 때&lt;/p&gt;
&lt;p&gt;크롤러봇이 해당되는 redis에 접근하여 모든 키를 지우고 스크립트를 심는거였습니다. 심지어 만약 제 redis docker image가 저의 루트 권한을 획득 할 수 있었다면 아마도 제 로컬은 더 심각한 해킹을 당하게 되었을 것입니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;해결 방법&lt;/h1&gt;
&lt;p&gt;위 문제를 어떻게 해결 할 수 있을까요?&lt;/p&gt;
&lt;p&gt;문제가 발생하는 원인을 다시 파악해보자면 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;redis 서버가 기본포트 &lt;code class=&quot;language-text&quot;&gt;6379&lt;/code&gt;로 열려있음&lt;/li&gt;
&lt;li&gt;인증없이 접근이 가능함&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;위 두가지를 만족 할 때 이러한 현상이 일어난다고 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;그렇다면 우리는 다음과같이 위의 두가지 조건을 만족하지 않게하면 될텐데요&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;redis 서버가 기본포트 &lt;code class=&quot;language-text&quot;&gt;6379&lt;/code&gt;가 아닌 다른 포트를 사용함&lt;/li&gt;
&lt;li&gt;인증을 필수로 redis 서버에 접근할 수 있게함&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1번째 방법은 실은 그렇게 좋은 방법은 아닌 것 같습니다. 시스템에서 대체적으로 많이 알려져있는 포트는 가급적이면 변경하지 않고 사용하는 것이 좋습니다.&lt;/p&gt;
&lt;p&gt;저는 2번 방법이 조금 더 합리적인 해결방법이라고 생각되어 redis 서버에 접근하려면 필수로 인증을 하게끔 설정했습니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;redis 패스워드 설정&lt;/h1&gt;
&lt;p&gt;redis에는 패스워드를 설정하는 방법이 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;requirepass&lt;/code&gt; option을 통한 패스워드 설정&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Redis ACL system&lt;/code&gt;을 이용한 username, password 설정(Redis 6.0 버전 이상을 사용하는 경우에만 해당)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;자세한 사항은 &lt;a href=&quot;https://redis.io/commands/auth&quot;&gt;공식문서 Auth&lt;/a&gt;에서 확인&lt;/p&gt;
&lt;p&gt;저는 &lt;code class=&quot;language-text&quot;&gt;bitnami/redis:lates&lt;/code&gt; 이미지가 6.0 이상을 사용하고 있기에 ACL system을 사용하기로 했습니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;requirepass 설정&lt;/h2&gt;
&lt;p&gt;ACL system을 사용한다고 하더라도 requirepass 옵션을 설정해주어야 레디스의 인증절차가 활성화되는데요,&lt;/p&gt;
&lt;p&gt;일반적으로 docker가 아닌 local에 직접 redis를 설치하셨다면 &lt;code class=&quot;language-text&quot;&gt;/etc/redis/6379.conf&lt;/code&gt; 파일에서 requirepass라고 쓰여져있는 라인을 주석을 풀고 설정하실 패스워드를 입력하시면 됩니다.&lt;/p&gt;
&lt;p&gt;저는 docker image로 실행하고 있기에 간단하게 도커이미지에 환경변수를 넘기는것만으로 requirepass가 설정 할 수 있습니다. (이런것 또한 도커를 사용하는 장점이라고 생각합니다.)&lt;/p&gt;
&lt;p&gt;기존의 &lt;code class=&quot;language-text&quot;&gt;ALLOW_EMPTY_PASSWORD&lt;/code&gt; 옵션을 비활성화 하고, &lt;code class=&quot;language-text&quot;&gt;REDIS_PASSWORD&lt;/code&gt; 값을 입력해줍니다.&lt;/p&gt;
&lt;p&gt;(참고로 REDIS&lt;em&gt;PASSWORD 값이 없고 ALLOW&lt;/em&gt;EMPTY_PASSWORD도 없다면 에러가 나면서 redis container는 실행되지 못하게 됩니다.)&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;yaml&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis:
    image: &amp;#39;bitnami/redis:latest&amp;#39;
    environment:
      - REDIS_PASSWORD=설정할패스워드
#      - ALLOW_EMPTY_PASSWORD=yes
    ports:
      - &amp;#39;6379:6379&amp;#39;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;기존의 컨테이너를 내렸다가 새로운 옵션으로 다시 실행합니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;docker-compose down &amp;amp;&amp;amp; docker-compose up -d&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;이제는 redis-cli에 접속해 명령을 내리려고 하면 &lt;code class=&quot;language-text&quot;&gt;NOAUTH Authentication required&lt;/code&gt; 라는 에러메세지와 함께 명령이 수행되지 않는것을 확인 할 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis-cli
keys *&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 411px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fb79e4ab15033e3ffd4f09d9de077a80/03a18/Untitled%206.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.77133105802048%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA60lEQVQY00WQW1LCQBBFswxQg1oFSh4oZBJCEkLME4OK+KPlBsRf/1wElgtwsYeZKcWPW327qrvPnTFE1pC2G6wgJSxXLNonpjctYtEwzVv8bMlkXhPXDyTNmqi6xxIR0esn7ccPxduOYruj3H5Rvn9juGlOcFtiRwlOkjAQM3qWh2lNMIdjji6u6A5GWv/e5XjocWIHmE4gq6+rKXtjVtz9pqgI8xXV+ll7kcrkyw22TH7qCM5HgQYpr3QmpYCdvkO37x5kqGU3zLj0Yv0cddzy59SPLwfQdVzoL1Bz46TU3pNABevIIyr5n/Y+CYPM4/K4gwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/fb79e4ab15033e3ffd4f09d9de077a80/03a18/Untitled%206.png&quot;
        srcset=&quot;/static/fb79e4ab15033e3ffd4f09d9de077a80/8890b/Untitled%206.png 293w,
/static/fb79e4ab15033e3ffd4f09d9de077a80/03a18/Untitled%206.png 411w&quot;
        sizes=&quot;(max-width: 411px) 100vw, 411px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;br/&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;auth 설정한패스워드&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 249px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/70a04fb49f751f05291fe637d17902fb/8b576/Untitled%207.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 14.056224899598394%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVQI102OWQ6CQBBEOQSKy4fKosCAoMgSQcAJSiIqGjXq/Q9SDhNI/Kik+nX1IiTHGqvkgF15Q+PtKEdIT6DnJ8r7F4f6A2UZYFtckFcPRLSCGxeMvzmLj1eeoZcXxgsHAglSyLYPY5NA92IoToj5esu95kacT4jHDu1BggwqY6af8iesMEMzr7OM4e8wmi/ZQgbFqQ5JIegzSa0635dNDFQLvZnBfdcT2/pfQ83GD1rsXyVjPLgyAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/70a04fb49f751f05291fe637d17902fb/8b576/Untitled%207.png&quot;
        srcset=&quot;/static/70a04fb49f751f05291fe637d17902fb/8b576/Untitled%207.png 249w&quot;
        sizes=&quot;(max-width: 249px) 100vw, 249px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;설정했던 패스워드로 auth 인증을 해주면 이제 더이상 명령을 할 때 에러메세지가 나오지 않고 명령이 정상적으로 수행됩니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h2&gt;ACL 설정&lt;/h2&gt;
&lt;p&gt;위 requirepass만으로도 실은 필수 인증정보입력이 활성화되었지만 저는 이왕 하는거 acl system까지 사용해보기로 했습니다.&lt;/p&gt;
&lt;p&gt;acl은 특정 키, 특정 커맨드에 대한 권한제어까지 가능하기 때문에 더 디테일한 인증과 인가를 부여 할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;User 만들기&lt;/h3&gt;
&lt;p&gt;다음과 같이 user를 생성하게 되면 &lt;/p&gt;
&lt;p&gt;모든 키, 모든 명령에 대해 권한을 가지고 비밀번호가 pass12345인 user2 username을 가진 user를 생성하게됩니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;ACL SETUSER user2 on &amp;gt;pass12345 allkeys allcommands&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;ACL list&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;생성한 User로 인증하고 명령&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;auth user2 pass12345
keys *&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;redis 모니터링&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;redis-cli --user user2 --pass pass12345 monitor&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;결론&lt;/h1&gt;
&lt;p&gt;위 해결방법에 따라 redis에 인증시스템을 활성해주고 나니 더이상 key가 이유없이 삭제되거나 이상한 스크립트가 삽입된 key가 생성되거나 하는 현상은 사라졌습니다.&lt;/p&gt;
&lt;p&gt;실은 상용, 베타, stage 환경의 레디스 서버 인스턴스라면 당연히 기본적으로 인증시스템을 활성화해주어서 이러한 현상은 일어나지 않았겠지만, 일반적으로 로컬에서 실행하는 레디스 서버를 굳이 인증을 신경써야하나? 라는 생각에서 비롯된 상황인 것 같았습니다.&lt;/p&gt;
&lt;p&gt;앞으로는 비록 로컬에서 실행하는 환경일지라도 더욱 보안에 신경써야 할 것 같습니다.&lt;/p&gt;
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://redis.io/commands/auth&quot;&gt;https://redis.io/commands/auth&lt;/a&gt;
&lt;a href=&quot;http://redisgate.kr/redis/server/acl.php&quot;&gt;http://redisgate.kr/redis/server/acl.php&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Embedded Tomcat과 Tomcat의 차이]]></title><description><![CDATA[…]]></description><link>https://thxwelchs.github.io/EmbeddedTomcat과Tomcat의차이/</link><guid isPermaLink="false">https://thxwelchs.github.io/EmbeddedTomcat과Tomcat의차이/</guid><pubDate>Sat, 28 Aug 2021 08:42:30 GMT</pubDate><content:encoded>&lt;p&gt;이번 포스팅에서는 내장톰캣과 설치형으로 사용하는 외장톰캣이 무엇이 다른지, 그리고 내장톰캣으로는 해결 할 수 없는것이 있는지
간단하게 알아보았습니다.
포스팅 내용을 작성하기 전 이 내용을 조사해본 것은 전 직장 동료분과 오랜만에 만나 개발 담소를 나누다 내장톰캣, 외장톰캣과 관련된 이야기가 오갔고, 좀 더 확실하게 알아보기로 했습니다.&lt;/p&gt;
&lt;p&gt;거의 대부분의 Spring 개발자라면 알고 있을 사실이지만, Spring Boot에는 &lt;code class=&quot;language-text&quot;&gt;tomcat&lt;/code&gt;이 내장되어 있어, 애플리케이션을 빌드하고 실행하는 것만으로 웹애플리케이션을 서비스 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;즉 스프링부트는 실행될 환경에 톰캣을 설치할 필요없이 애플리케이션을 바로 실행 할 수 있다는 것을 의미합니다.
그렇다면 과거 스프링 레거시에서는 어떻게 웹 애플리케이션을 실행 할 수 있었을까요? &lt;/p&gt;
&lt;p&gt;먼저 내장톰캣이 없던 시절의 스프링은 서블릿 컨테이너가 없기 때문에, 실제로 자바로 작성된 코드와 상호작용할 다리역할의 시스템이 필요했습니다. 그렇기 때문에 서블릿 컨테이너가 필요했고 우리는 일반적으로 그 중 대표격인 톰캣을 선택하여 설치하고, 자바로 작성되어있는 자바 웹애플리케이션을 톰캣에 포함시켜주어야 했습니다. &lt;/p&gt;
&lt;h1&gt;애플리케이션 실행방법 차이&lt;/h1&gt;
&lt;p&gt;간단하게 다시 정리해보자면 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;내장톰캣을 사용하는 스프링부트 애플리케이션 실행&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;build된 스프링부트 애플리케이션 jar, war 를 java 명령어로 실행한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;외장톰캣을 사용하는 스프링 애플리케이션 실행&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tomcat을 설치한다.&lt;/li&gt;
&lt;li&gt;tomcat 설정 파일을 구성한다.&lt;/li&gt;
&lt;li&gt;tomcat webapp 디렉토리에 build된 스프링 애플리케이션 war 파일을 포함시켜준다.&lt;/li&gt;
&lt;li&gt;tomcat을 실행해준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;한눈에 봐도 어떤것이 더 복잡한지는 알 수 있습니다. 물론 무조건 내장톰캣이 좋다 나쁘다를 따지려는 것은 아닙니다만. 적어도 실행 절차만 본다면 내장톰캣을 사용하는것이 훨씬 간단하다는것을 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;저는 이러한 이유로 환경이 허락된다면 내장톰캣을 사용하여 애플리케이션을 실행하는 방법을 선호했고, &lt;/p&gt;
&lt;p&gt;심지어 내장톰캣이든 외장톰캣이든 큰 차이가 없다라고 생각하고 있었습니다. &lt;/p&gt;
&lt;p&gt;그래서 가끔 내장톰캣에 대한 부정적인 인식( “내장톰캣은 외장톰캣보다 성능이 좋지 않을거야” 등 ..) 을 가지고 내장톰캣을 사용 할 수 있음에도 외장톰캣을 설치해서 배포하는 것을 볼때면 의문이 들 때가 많았습니다 &lt;/p&gt;
&lt;p&gt;실제로 스프링에서는 외장톰캣 구성요소를  보통 &lt;code class=&quot;language-text&quot;&gt;server.xml&lt;/code&gt; 을 작성하여 구성 할 수 있고&lt;/p&gt;
&lt;p&gt;스프링부트에서 또한 내장톰캣의 구성요소를  application.properties(yml)에서 구성 할 수 있기 때문이었는데요&lt;/p&gt;
&lt;p&gt;애초에 스프링부트가 스프링에서의 많은 xml 기반 설정들이 너무 불편하고 알아야 할 요소가 많았기에 이런 구성 요소들을 대신 해주기 위해 탄생한 것이기에 위와 같은 생각을 했습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server&quot;&gt;https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server&lt;/a&gt; application.properties에서 톰캣 구성 설정을 담당하는 부분&lt;/p&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;h1&gt;외장톰캣 vs 내장톰캣 다른점&lt;/h1&gt;
&lt;p&gt;그렇다면 정…말!? 전혀 다른게 없을까요?&lt;/p&gt;
&lt;p&gt;결론만 말씀드리자면 &lt;code class=&quot;language-text&quot;&gt;NO&lt;/code&gt; 입니다.&lt;/p&gt;
&lt;p&gt;물론 많은 부분이 다르지는 않지만, 대표적으로 내장톰캣으로는 할 수 없지만 먼저 외장톰은 가능한 기능이 하나 있는데요 바로 tomcat의 virtual host라는 기능입니다.&lt;/p&gt;
&lt;h2&gt;virtual host&lt;/h2&gt;
&lt;p&gt;virtual host라는 기능은 이런겁니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQElEQVQ4y2WUS28bVRSA5/cgsUFCYtHQAJEQm9IFG1Ygsa0QUlRRRGmFCC3QpkrTvCrShKAClQJViUuKq5g6E2zHsRqcxLHsNI6buPErdjx+zMsz9sedG9IFHenqaO459zuPe85V2o6B27FeWI5rCmlgtJpUi1Uah3Vc91j3f2k+X0rbMel2nRcUna6L9zVrFnvJQ3LpCqbREvsWHWF7LF3p+OisF5xyoO2gtQo4jk0XW252hAOtkqZcDFGrxqjVljGaWYHvYLcNdLOFYem0hLSFvWE2MK2mBCum3SBX3mBzK4quN7wjMjJ1ZZDxv3qYCZ3i5qOTRB4PS6AvssnHY39z7laEM6NLzIWfUKnkKRT3seyWSFl49FIu1zKspVQOqnkJDC5f4/rDk3y/eJqRwFs8WrlKx9W4cW+J3k//5MPBIK+fnWd0Lo5lNcjuZgT0GYpDW/h1JMR0NDL5mEjfYDFynaEHPUwG3+WGv5fo6k1pk3xaYFZNMx/NMLuYIrVXEvY6lWqJRvMQZT+V4NlWklIuS63ibVbRmrv4gp/xxQ9vMPDTKS782Es4NiaBoY0sQ3dXmfCtce3Xx4QSezJlDyhvuZLepJSIk19dIRtWKcejlKNxpiY+on+8jzPfnubsRC8L/q+hesDgdIAeker7lwOc6L8voaZZJ5PdplDaP0q5iyvSdmXRC+U8K/EDbv/2FeenXuPCrXekVMMjMsLFtR0u/RJj/P4al+/EUNd3MQyNvKif1qii2G1dNigC/CST4YG6gWV2WQhe5fPJV/juTh8Xp18lEByWwD8iKQZ+jnFldpWLM8tEkjnRVkWKIjrTu2XL1oWZRTKdxq8mRU825MF78wN8MvKSiO6ESP1l7s59g6npfDml8vZ5Px9cCdLT72Pan8C2m2zvbJEv5FAQfbezm8O/lBTN6k2IIYELD4cZGHuToZn3uDTRR0idPOrP9SzjvnVuB5KM/h5nfaeAx6g3DmnpGkq5qhH+Z0+Ea0qFN4qdro0l6vJ0O0l6M04mnaAl6uN2bWmDrLcjZbdjClAd3aiLiWmiFCuCLGb0GCYfBTn0Airqa1ot4Ux//hB4o2a3TSFNoTf++9fllHjl+xe/hdjDQfFQNwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled&quot;
        title=&quot;Untitled&quot;
        src=&quot;/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png&quot;
        srcset=&quot;/static/bc5d1bc3deb6351584193a1ddfce0d4f/8890b/Untitled.png 293w,
/static/bc5d1bc3deb6351584193a1ddfce0d4f/1f316/Untitled.png 585w,
/static/bc5d1bc3deb6351584193a1ddfce0d4f/1bed9/Untitled.png 640w&quot;
        sizes=&quot;(max-width: 640px) 100vw, 640px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 그림처럼 도메인 host에 따라 각각의 다른 루트 컨텍스트를 갖게하여 하나의 웹애플리케이션 배포만으로 마치 여러 애플리케이션을 운영하는 것처럼 할 수 있는 것입니다.&lt;/p&gt;
&lt;p&gt;이 기능을 사용하기 위해서는 위에서 잠깐 언급한 스프링 외장톰캣 구성요소 파일인 &lt;code class=&quot;language-text&quot;&gt;server.xml&lt;/code&gt; 을 손보면 됩니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;xml&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;lt;!--...--&amp;gt;
&amp;lt;Host name=&amp;quot;a.thxwelchs.com&amp;quot;  appBase=&amp;quot;/webapps/weba&amp;quot; unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot; xmlValidation=&amp;quot;false&amp;quot; xmlNamespaceAware=&amp;quot;false&amp;quot;&amp;gt;
&amp;lt;/Host&amp;gt;

&amp;lt;Host name=&amp;quot;b.thxwelchs.com&amp;quot;  appBase=&amp;quot;/webapps/webb&amp;quot; unpackWARs=&amp;quot;true&amp;quot; autoDeploy=&amp;quot;true&amp;quot; xmlValidation=&amp;quot;false&amp;quot; xmlNamespaceAware=&amp;quot;false&amp;quot;&amp;gt;
&amp;lt;/Host&amp;gt;
&amp;lt;!--...--&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 처럼 구성하게 되면 &lt;a href=&quot;http://a.thxwelchs.com&quot;&gt;a.thxwelchs.com&lt;/a&gt; 으로 접속시 weba 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보일 것이고 &lt;a href=&quot;http://b.thxwelchs.com&quot;&gt;b.thxwelchs.com&lt;/a&gt; 으로 접속시 webb 루트컨텍스트를 기준으로 작성된 뷰 메인페이지가 보이게 될 것입니다.&lt;/p&gt;
&lt;p&gt;이처럼 multiple host 웹애플리케이션을 단일애플리케이션으로 구성하는 이유는 관리포인트를 줄이기 위함입니다. (하나의 애플리케이션에서, 여러 사이트의 역할의 코드를 모아서 작성하고 관리 할 수 있거나 버전관리 측면을 보자면?)&lt;/p&gt;
&lt;h2&gt;Embedded Tomcat Mutlple context&lt;/h2&gt;
&lt;p&gt;이 기능은 확실하지 않지만 내장톰캣으로 구성하기에는 상당히 까다로운 것 같은데요, 가능은 한 것 같습니다.&lt;/p&gt;
&lt;p&gt;예를 들면 다음과 같이 서블릿컨테이너팩토리 빈을 다시 재구성하여 multiple context를 등록하는 방법도 있습니다 (직접 해보지는 않았습니다.)&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Bean
public ServletWebServerFactory servletContainer() {
    return new TomcatServletWebServerFactory() {
        protected TomcatWebServer getTomcatWebServer(Tomcat tomcat) {
            System.out.println( &amp;quot;tomcat.getServer().getCatalinaBase() =&amp;quot; + tomcat.getServer().getCatalinaBase() + &amp;quot;=&amp;quot; );
            new File(tomcat.getServer().getCatalinaBase(), &amp;quot;/webapps&amp;quot;).mkdirs();
            try {
                Context context2 = tomcat.addWebapp(&amp;quot;/weba&amp;quot;, new ClassPathResource(&amp;quot;/home/thxwelchs/playground/weba.war&amp;quot;).getFile().toString());
                Context context3 = tomcat.addWebapp(&amp;quot;/webb&amp;quot;, new ClassPathResource(&amp;quot;/home/thxwelchs/playground/webb.war&amp;quot;).getFile().toString());
                context2.setParentClassLoader(getClass().getClassLoader());
                context3.setParentClassLoader(getClass().getClassLoader());
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            return super.getTomcatWebServer(tomcat);
        }
    };
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;/br&gt;
&lt;/br&gt;
&lt;h2&gt;웹서버를 활용한 reverse proxy&lt;/h2&gt;
&lt;p&gt;하지만.. 잘 생각해보면 굳이 이럴 필요가 있을까요? virtualHost라는 기능은 일종의 웹서버 기능으로써 WAS의 책임에는 조금 벗어나는 범위입니다. 물론 WAS가 웹서버의 기능을 할 수 도 있지만, 일반적으로 WAS는 서블릿 컨테이너의 역할로써 소스코드의 파일을 해석하고 데이터를 로드하여 동적인 자료를 기반으로 정적인 자료로 전달해주는 것이 목적입니다.&lt;/p&gt;
&lt;p&gt;그렇다면 실제 웹서버를 사용하고 WAS는 서블릿컨테이너의 역할만 하게끔 구성하는건 어떨까요?&lt;/p&gt;
&lt;p&gt;그러기 위해서는 먼저 우리는 내장톰캣이 구현된 애플리케이션 하나를 서비스 하나의 단위로 생각하는 것이 좋습니다. &lt;/p&gt;
&lt;p&gt;하나의 서버에 여러 애플리케이션을 운영하는 것보다는 하나의 애플리케이션이 VM 혹은 Linux Container(Docker)로 하나의 서비스로 구성하고 여러 서비스를 운영하는 것이 효율적이기 때문입니다.&lt;/p&gt;
&lt;p&gt;그렇다면 우리는 이렇게 구성해볼 수 있습니다. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.31399317406143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz5WSu07DMBSG+y4sIAYGxIJgRDwBElOHDkzAws4GQ5+Bi4R4AgZGoIIBhJBAAlEQGwpt06a1ncSOb8ccp1VJLwtHVuL89v/5nBOXnHPWWLDgRgNgisJ6AVg9VErW2UQmQSOghPYRuMlYgxNj7QCRPwnpPFwdU9JhLB6Y+y9EUE4znQ0Paf20jDH9T+00DqUVi3kxH29O05RRxgVXoJRTGIdH1fm95a3qbtgOkYv6gKIFgP0zgzFJj9AoSijVQqD0+vU2V1naqGzOlhfPLs9RUVw4Y2i3/XR7wmiUcjGSttYqyzKb19wIW6vb6zPlhZWdtZvHO19U3gIheBB847ZhOd4chlGz2SGESwlae3/9s75/enB9X8NmSOUrnholpOBa8b9gtxAPmdVSYZPyvBDqW/PxfJHEPSnVSNpoyUcB4YFQWHWUkveXWprGUsoxs5u8EpP3ZDxt97+AIvQXk21wuWG4WtEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;제목 없는 프레젠테이션.png&quot;
        title=&quot;제목 없는 프레젠테이션.png&quot;
        src=&quot;/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png&quot;
        srcset=&quot;/static/818872d9e4cb157ec0ad2b8e07ee29eb/8890b/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 293w,
/static/818872d9e4cb157ec0ad2b8e07ee29eb/1f316/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 585w,
/static/818872d9e4cb157ec0ad2b8e07ee29eb/7d769/%EC%A0%9C%EB%AA%A9_%EC%97%86%EB%8A%94_%ED%94%84%EB%A0%88%EC%A0%A0%ED%85%8C%EC%9D%B4%EC%85%98.png 960w&quot;
        sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 구성하는 것을 reverse proxy라고 부릅니다.&lt;/p&gt;
&lt;p&gt;이렇게하면 웹서버의 역할과 WAS의 역할을 정확히 구분시킬 수 있습니다.&lt;/p&gt;
&lt;p&gt;여기서 아까 외장톰캣을 쓰는 스프링 애플리케이션처럼 하나의 스프링 애플리케이션에서 여러 애플리케이션의 코드를 작성하고 관리하고 싶다면? 물론 가능합니다. 스프링부트 애플리케이션에서 여러 애플리케이션 코드를 작성하고 스프링부트 애플리케이션을 실행 할 때 컨텍스트 구성 설정 값을 argument로 넘겨주게끔 구성하면 됩니다.
(예를 들어 view  resource root path, server port, context path와 같은)&lt;/p&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;h1&gt;마지막 정리&lt;/h1&gt;
&lt;p&gt;조금 두서 없이 포스팅이 길어졌지만 마지막으로 간략하게 정리해보자면 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;내장톰캣&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;내장톰캣으로 실행하는 스프링부트 애플리케이션은 그 자체가 하나의 프로그램으로 서블릿컨테이너가 하나의 포트를 독자적으로 점유함 그렇기 때문에 여러 호스트를 분기 할 수 있는 기능을 사용하기 매우 복잡함&lt;/li&gt;
&lt;li&gt;jar든 war든 톰캣이 내장된 애플리케이션은 톰캣 구성에 대한 부분의 관심사를 분리하여 개발자에게 애플리케이션단의 코드 작성에 더 집중할 수 있게해줌(필요에 의하면 server.xml에서 작성했던 구성요소를 application.properties 에서 바인딩되어 내장톰캣에 설정됌)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;외장톰캣&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;외장톰캣은 Apache HTTPd 에서 사용하는 Virtual Host라는 main host 하위에 가상의 호스트를 소프트웨어적으로 둘 수 있는 기능을 제공하는데, 외장 Tomcat에서도 Host설정으로 이 apache virtual host를 설정할 수 있음 ( 즉 여러 애플리케이션을 하나의 포트로 서비스 할 수 있음 )&lt;/li&gt;
&lt;/ul&gt;
&lt;/br&gt;
&lt;/br&gt;
각각의 조직이 가지고 있는 애플리케이션 실행환경에 따라 맞는 애플리케이션 구성을 고민해보면 좋다.
&lt;p&gt;하지만 현재의 모던 환경에서는 일반적으로 여러 애플리케이션을 하나의 포트로 서비스 하지않고, 웹서버를 앞단에 두는 리버스프록시 구성환경이 많이 사용되고 있음&lt;/p&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;/br&gt;
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper&quot;&gt;https://stackoverflow.com/questions/54308472/multi-context-spring-boot-application-how-to-define-standard-spring-boot-proper&lt;/a&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat&quot;&gt;https://stackoverflow.com/questions/31374726/spring-boot-how-to-add-another-war-files-to-the-embedded-tomcat&lt;/a&gt;
&lt;a href=&quot;https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html&quot;&gt;https://www.ramkitech.com/2012/02/understanding-virtual-host-concept-in.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[JPA 양방향 Entity 무한재귀 문제해결]]></title><description><![CDATA[JPA ORM으로 개발하다보면 꽤나 많은 양방향 참조가 필요한 모델들이 있습니다. 그런데 문제는 이런 양방향관계를 가진 객체를 직렬화 하려고 할 때 무한참조가 되어 StackOverFlow를 발생시키는데요. 그렇다고 해서 ORM…]]></description><link>https://thxwelchs.github.io/JPA 양방향 Entity 무한 재귀 문제 해결/</link><guid isPermaLink="false">https://thxwelchs.github.io/JPA 양방향 Entity 무한 재귀 문제 해결/</guid><pubDate>Fri, 06 Mar 2020 22:47:00 GMT</pubDate><content:encoded>&lt;p&gt;JPA ORM으로 개발하다보면 꽤나 많은 양방향 참조가 필요한 모델들이 있습니다. 그런데 문제는 이런 양방향관계를 가진 객체를 직렬화 하려고 할 때 무한참조가 되어 StackOverFlow를 발생시키는데요. 그렇다고 해서 ORM이 가진 장점을 포기하고 단방향으로만 구성 할 수는 없을겁니다. &lt;/p&gt;
&lt;p&gt;이번엔 양방향 참조를 가짐에도 불구하고 직렬화를 해결하는 해결 법을 살펴보겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 이 문제에 대한 해결방법은 다음과 같다고 볼 수 있습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Entity로 반환하지 않고, DTO를 적극 활용&lt;/li&gt;
&lt;li&gt;Json으로 직렬화 할 속성에서 무시 해버리기 (&lt;code class=&quot;language-text&quot;&gt;@JsonIgnore&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;직렬화할 대상 객체의 toString override하여 재정의하기&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;@JsonManagedReference&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@JsonBackReference&lt;/code&gt; 어노테이션으로, 직렬화 방향을 설정을 통해 해결&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;&lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;@JsonIdentityInfo&lt;/code&gt;을 통해 순환참조될 대상의 식별키로 구분해 더이상 순환참조되지 않게 하기&lt;/strong&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;저는 &lt;strong&gt;5번째&lt;/strong&gt; 방식인 &lt;code class=&quot;language-text&quot;&gt;@JsonIdentityInfo&lt;/code&gt;를 통해 해결 해보겠습니다. 참고로 이 방식은 &lt;code class=&quot;language-text&quot;&gt;Jackson 2.0&lt;/code&gt; 이상부터 사용가능합니다.&lt;/p&gt;
&lt;p&gt;먼저 해결하기 전 무한 순환참조 된 JSON을 살펴보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 537px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/77f490e295d72a567c645767acde1df5/55137/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.76109215017064%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB20lEQVQ4y52U23KbMBCG/RwNOkucwQZkG4PjNLlJptOrvv+7/F1p7DaT2onpxSIGaT/28K9WxhiYtIB2KSpn0BUp6tRCSwnO+WJbhUe1m1ENI1IlkGsJpxU440gYo0MMjN1vKyEElNYw1iJbe9iiRp1b7NoyglmELohQUmpSElQp1LtH1H7EMHrsDx7Omngo/PReixGKCJVQxmJ4+YlqO6PLHXyVY0011Uqe0+dgX0V4IUty4uSU1ms0mwGhWYp+omnPUgbindOXNYxAcg4rT5L4XvoZadWgb3IcfAtN9fz2kPyp6a3a/gOMUCFR+QnD8w/4pyfsthvUmUNmFCTtf9aoq8AIpc1mPKFoe5QkpYa0WbjQJPG3nuc07wNGORlKlYRPUhK0Bp22mY1NupX6TWC0eEiiO71ivT/ieDrgOHsCKiRUa34F+jnwbNqmaKdnFJstWpJTGM+wBhWwD3K6Cxic2v0jimYDR40xFGGQk/wQ3VXZ3DLOkriWJHqXlxiaDFNXx3o+hPSXRPjearpIGhrR/jBi3TWwpE91Fv6iCC9NUtZh+/oLDc18R5dIT/UM4xnug2QxMOqTQdPMhxtKKB2boembi/7/kfIFKqRC//0NNc39PPU4TkMcz99kVfZQcJVW3gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/JPAInfinityRecursion/Untitled.png&quot;
        title=&quot;img/JPAInfinityRecursion/Untitled.png&quot;
        src=&quot;/static/77f490e295d72a567c645767acde1df5/55137/Untitled.png&quot;
        srcset=&quot;/static/77f490e295d72a567c645767acde1df5/8890b/Untitled.png 293w,
/static/77f490e295d72a567c645767acde1df5/55137/Untitled.png 537w&quot;
        sizes=&quot;(max-width: 537px) 100vw, 537px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;계속해서 서로를 참조하며 깊이 파고들어가고 있습니다. 빨리 해결 해야겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 양방향 관계의 엔티티에 어노테이션을 달아줍니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
@JsonIdentityInfo(generator = IntSequenceGenerator::class, property = &amp;quot;id&amp;quot;) // 추가
class Menu(
        var name: String = &amp;quot;&amp;quot;,
        var price: BigDecimal = BigDecimal.ZERO,
        @ManyToOne(fetch = FetchType.LAZY)
        @JoinColumn(name = &amp;quot;restaurant_id&amp;quot;)
        var restaurant: Restaurant
): MutableEntity()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
@JsonIdentityInfo(generator = IntSequenceGenerator::class, property = &amp;quot;id&amp;quot;) // 추가
class Restaurant(
        var name: String = &amp;quot;&amp;quot;,
        @OneToMany(mappedBy = &amp;quot;restaurant&amp;quot;)
        @OrderBy(&amp;quot;name asc&amp;quot;)
        var menus: MutableSet&amp;lt;Menu&amp;gt; = TreeSet()
): MutableEntity() {

        internal fun addMenu(menu: Menu) {
                menus.add(menu)
                menu.restaurant = this
        }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;@JsonIdentityInfo&lt;/code&gt; generator 속성에 들어갈 수 있는 객체의 타입은 &lt;code class=&quot;language-text&quot;&gt;ObjectIdGenerator&lt;/code&gt;를 상속받고 있는 서브클래스입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 416px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a0165680d9a3a7ede3a2db4600abbd97/c762c/Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 7.50853242320819%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeklEQVQI1yXMQQ6DIBRFUdcjImBFgQ+I1Zim+9/PrbGDl/NGt3PlyxQPrCmIPajTSXMXzhfUWRj225LR1/b/W0a1zOAzoxWWOfCplbdkjlzoTLwwvqF1Yh4rq2lEs2Oc0BdByW1IT7SPiX5Nj8rd0wH/CrSUCT4hi/ADyf9B4itm/aAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/JPAInfinityRecursion/Untitled%201.png&quot;
        title=&quot;img/JPAInfinityRecursion/Untitled%201.png&quot;
        src=&quot;/static/a0165680d9a3a7ede3a2db4600abbd97/c762c/Untitled1.png&quot;
        srcset=&quot;/static/a0165680d9a3a7ede3a2db4600abbd97/8890b/Untitled1.png 293w,
/static/a0165680d9a3a7ede3a2db4600abbd97/c762c/Untitled1.png 416w&quot;
        sizes=&quot;(max-width: 416px) 100vw, 416px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 594px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3d51ce62c47b8c825bda354dadc766ae/d369c/Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 35.49488054607508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeUlEQVQoz32RT3PSYBCH82GU/xRoA9EmEECURJI0JCGhkqQUWqoHPelUbevVj/24CR0PHjw889vZmffZ3XkVexLhTBP86QesSYw1u2TmJZjLiKHrM3J8xpaPMXQ4Nxz04f9R2i2N/skIvTvltDOiM3hDo2egz0LWuyeC7CdR9sAqFSQjyXAjpMf6X5RmW6PW1qk0NapCo/WaSlXFGAdsv/xms31gI+Js/0S6f2Sd/+DyuZff/JJ8JMm/E6f3xNk9SrU+oN0dc9qf01XfSm1Sb52jGQuCzSdcL8Pzr1iGO/zguqToze0176xEUpAsa0GpNQac9Cb0/grHNEWojnzc/CtBeEOwOrBKPpYZxXcE0QH34hprkfHezbEdSScva6UuZ9aKc+sqldoZxYAXL3to+pz46rNstCdK7ghF5F5sZVMZEN2K+FCm6xfiVIRZiZzcl08xS151xqgdk+aZiTEJ8PNvhNFxw+Kh58vZz8Kl4C135Xa2CO3FMf8AOJUIx2XoABkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/JPAInfinityRecursion/Untitled%202.png&quot;
        title=&quot;img/JPAInfinityRecursion/Untitled%202.png&quot;
        src=&quot;/static/3d51ce62c47b8c825bda354dadc766ae/d369c/Untitled2.png&quot;
        srcset=&quot;/static/3d51ce62c47b8c825bda354dadc766ae/8890b/Untitled2.png 293w,
/static/3d51ce62c47b8c825bda354dadc766ae/1f316/Untitled2.png 585w,
/static/3d51ce62c47b8c825bda354dadc766ae/d369c/Untitled2.png 594w&quot;
        sizes=&quot;(max-width: 594px) 100vw, 594px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;보시는 것처럼 Property를 설정할 수 있는 &lt;code class=&quot;language-text&quot;&gt;PropertyGenrator&lt;/code&gt; , &lt;/p&gt;
&lt;p&gt;숫자형 ID로 설정하는 &lt;code class=&quot;language-text&quot;&gt;IntSequenceGenerator&lt;/code&gt;, 문자열 ID로 설정하는 &lt;code class=&quot;language-text&quot;&gt;StringIdGenerator&lt;/code&gt; UUID 형태의 ID로 설정하는 &lt;code class=&quot;language-text&quot;&gt;UUIDGenerator&lt;/code&gt; 등이 있습니다.&lt;/p&gt;
&lt;p&gt;저는 현재 숫자형 ID로 모든 엔티티가 이루어져 있어, IntSequenceGenerator 사용하고, &lt;/p&gt;
&lt;p&gt;property 명을 따로 명시하지 않으면 기본값 직렬화 시 객체의 id가 &lt;code class=&quot;language-text&quot;&gt;@id&lt;/code&gt; 로 설정되기 때문에 저는 property명을 명시해주었습니다.&lt;/p&gt;
&lt;p&gt;변경 후 테스트 결과는?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 368px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4d2916175b22a7a8f99d84eb88219c31/b86bf/Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 145.05119453924914%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVRIx51WWXbaQBDkGDFIaLTvC0ggs9tgO17yk5fc/yqV7gZhKWxOPvqNEKhmuqq6RM/zPChlwjAMDIdDKU3XpfRDNfe/Uj1FQMqyMVo8IMoyBIEH1zIRODZsU8GxeLPhEfxW9RhVmRbqp3eU6yfEYYBJFmNeJJikoZTrOF8+aY93V6aJbDJDPp3DJQoMZeCu38dA006AbgH3Gu50etgkIINOG6Q5HGrZsi0BHWjEqfbJ5zVQAZRSim7osBwP988/kFU1ktBH7ruokxAJrfy7S2DN/U9APindtD0f5WqHbLqE7zl4ed1g/TBDNRmdCHB0goAeROkA0heW64niLNB4tcV4sUaSJYjjEAY9wLRY1A27g1f+PBTg4ekJeQfTcQlsJ20vf/xGmJfIqN3VOMM4DpCRrXjNiY6S1oI3alHRATRJbZM8WczWyO+XKOYbuEEk/HFpLVH01nqRwzRN5fiD/h0Gg76suq51Jubc2r4+2kYRH7ZlwbQdRNSm47qwyTpsm9Mx1G+rrA5EM4f17h0p2SaNAkzTCLM8Fu6u2ebE2A2gRYDV5hlZvYIf+GKb5abGqMyP5tauzTIDyQlZELoW25AY1cE2xWxFtomRJBEU2+oQGGwZvubqpg2fjP3E/BEoG5tPKLb5+IVkPEUR+dhUBSpqvyAaSpqcEVlGbBSF8lxDXYdDFoWT52gbWh2fx46EoqlpwuLvls/PMlWSJPKD/t03skyf1jsJDe1G0HY4bANaxE1jG9dz4bGZtYN59X9Nm4MlWJT66YPy8Z7SxiPbhBK2PGr/lTYMWD28ICf+/DDEZrfEYl2joFnWLnB4MinttOGWWQxJm+UWeT1HRJaJSV22jVjrkDJcShmXT9i0PF4+Yrp9xfztJ6KionY9PE6KfbpQ6xXbhqwkqUMbnaQNX/AqtqHKycxZvRDr7G3jyluwP9BEpP1rYV/8ua20AEobZE6LwIQjSpqmOG0azowrtjmqzMnhUJvlfC2Atq2E/P0Lf9gR4NofgGPLEgwUqtxiSbNbb78jGlXUoiV24THLiEPmjUeQ+WTeeNzOWWj/z4G+ZEWnuzfxYDyeICXeOLrairbrksF7vu8fX6NShurwdS2qzoH+AWd4MsyZmROxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/JPAInfinityRecursion/Untitled%203.png&quot;
        title=&quot;img/JPAInfinityRecursion/Untitled%203.png&quot;
        src=&quot;/static/4d2916175b22a7a8f99d84eb88219c31/b86bf/Untitled3.png&quot;
        srcset=&quot;/static/4d2916175b22a7a8f99d84eb88219c31/8890b/Untitled3.png 293w,
/static/4d2916175b22a7a8f99d84eb88219c31/b86bf/Untitled3.png 368w&quot;
        sizes=&quot;(max-width: 368px) 100vw, 368px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;변경하기 전 처럼 서로 순환참조되지 않고, &lt;/p&gt;
&lt;p&gt;정상적으로 한번 직렬화 된 객체는 id값으로만 직렬화 되어지고 있습니다!&lt;/p&gt;
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;양방향 참조 객체 직렬화 해결하기 &lt;a href=&quot;https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion&quot;&gt;https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Kotlin JPA Entity 모델링하기]]></title><description><![CDATA[최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요, 특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다. Entity 모델링 먼저 코틀린에서 Entity…]]></description><link>https://thxwelchs.github.io/Kotlin JPA Entity 모델링하기/</link><guid isPermaLink="false">https://thxwelchs.github.io/Kotlin JPA Entity 모델링하기/</guid><pubDate>Fri, 06 Mar 2020 22:28:00 GMT</pubDate><content:encoded>&lt;p&gt;최근 스프링부트를 개발 할 때 Kotlin으로 많이 개발하고 있는데요,&lt;/p&gt;
&lt;p&gt;특히나 이 포스팅에서는, JPA Entity 모델링 을 할 때 주의해야 할 점들을 살펴보겠습니다.&lt;/p&gt;
&lt;h1&gt;Entity 모델링&lt;/h1&gt;
&lt;p&gt;먼저 코틀린에서 Entity 클래스를 작성할 때는 &lt;code class=&quot;language-text&quot;&gt;data class&lt;/code&gt; 로 선언 하는 것보다는 일반 클래스로 선언하는 것이 좋습니다. 그 이유는, &lt;code class=&quot;language-text&quot;&gt;data class&lt;/code&gt; 는 &lt;code class=&quot;language-text&quot;&gt;open&lt;/code&gt; 혹은 &lt;code class=&quot;language-text&quot;&gt;abstract&lt;/code&gt;와 같은 키워드를 허용할 수 없으므로 다른 클래스의 부모클래스가 될 수 없기 때문입니다.  그래서 자바에서는 클래스 구분이 없어 신경쓰지 않았던 상속성을 가져가기 위함과, 연관되어있는 다른 Entity가 있다면 지연로딩을 위해서라도 일반 &lt;code class=&quot;language-text&quot;&gt;class&lt;/code&gt;로 선언 후 &lt;code class=&quot;language-text&quot;&gt;open&lt;/code&gt; 키워드를 붙여주어야 합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;JPA에서 지향하는 Entity 객체는 Entity끼리도 상속성을 이룰 수 있어야 합니다.&lt;/li&gt;
&lt;li&gt;지연로딩 시 데이터 클래스에서 작동하지 않는 문제&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;Entity가 되기 위한 클래스 표준 (Entity POJO Model)&lt;/h2&gt;
&lt;h3&gt;JPA에서 말하는 Entity POJO Model이란? (JPA는 그저 java에서 정의한 ORM 표준)&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Entity는 final 클래스이면 안된다. ( 메소드나, 인스턴스 변수 또한 마찬가지 )&lt;/li&gt;
&lt;li&gt;Entity는 최상위 클래스여야 한다.&lt;/li&gt;
&lt;li&gt;Entity는 추상클래스, 구체클래스 모두 될 수 있다. (Entity는 Entity class뿐만 아니라 Entity가 아닌 class도 확장 할 수 있으며 Entity가 아닌 class는 Entity class를 확장 할 수 있습니다.)&lt;/li&gt;
&lt;li&gt;Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)&lt;/li&gt;
&lt;li&gt;Enum 또는 interface는 Entity가 될 수 없다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Hibernate에서 말하는 Entity Model이란? (Hibernate는 JPA의 실질적인 구현체)&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Entity는 public 또는 protected 접근제한자를 가진 인수없는 생성자(no-arg) 가 있어야 한다. (추가적으로 생성자를 정의 할 수도 있음)&lt;/li&gt;
&lt;li&gt;Entity는 최상위 클래스 일 필요는 없다.&lt;/li&gt;
&lt;li&gt;기술적으로 hibernate는  영속 클래스 혹은 비영속 클래스 상태의 접근 방법(getter, setter 메소드)을 사용하여 최종 영속상태에 접근할 수 있다.
그러나 이것은 Hibernate가 Entity의 lazy loading을 위한 프록시를 생성할 수 없게 하므로 일반적으로는 좋지 않다. &lt;strong&gt;즉 하이버네이트에서는 final 클래스가 아닌 클래스를 선호한다! 왜? 영속 상태를 관리하기 위해 proxy를 사용하고, lazy loading을 proxy 객체로 처리해야 하기 때문에&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;위와 같이 Entity 클래스가 되기 위해 권장되는 규칙이 꽤나 있는데, 저런 규칙을 지키지 않으면 어떤 문제를 일으키는지 코드로 살펴보겠습니다.&lt;/p&gt;
&lt;p&gt;다음과 같은 양방향성을 가진 두 엔티티가 있습니다. ( 최근 연습중인 도메인 모델이 식당입니다. ㅋㅋ)&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 280px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz32SaW/TQBCG/f9/C4iPiKqtBBTRhtKQ017HR3wkTnwkdXwkjpM8rN1CW1ox0sjj1ew7z+yMoq0iboKIr37IRMZaEmGsY/pRQrE/0NjpdJLeRjy3l38PBwong5vY4Z1QUQcf6Q4vKEsVM7WJy/0zwYfr5nrDe8PjzJxyZ4/p2ILuVOPKnjDLtyi9MEFzbRbriLQqSYqMvCpQk5TVtn4laKxXXM5sOr7ORL+kN7hAiM8MnFu8vEBRFzG9sUq82bYt7B/pzbQmKZ8Ej4+C3bDkV5Aw1IaEWclOnjVZXl7hpDuUzizFmIeoloM+9RiZLqaMf3oJ2YFXNkgqdAmhWxarYk9enyirgxSTgpsK5bsdoRsWEyHwXZdFsCANF/T9mCvhtdTNcLb1kY28+Gmacu7l2BKiN1Txo1Wb4+f7VlT5EpT4iwhT6ETJ6i9JU81b521cH0+tN3a3LLgOCpZhhO84zOZzdnlGcF/IodQo4r7CcmZYhkFVP/XoSsG0Oj5txJ83lILnbsZsscSaCISu49kWbnTPvDigfJPVnFmAoU+YBwGhrHyodrIFOZTt66Fcz3M+mClj0+G2N6TT7TFWNX7oLk4mCS+9DD+MEarcQ+m6blDKFhr8t9bGk+T9qESLMtRwg4hzhIz7YU4s85UziS9sn/FoyJ2sNjFNlpLU2exfrM3z7/9MuZVvosVl6/p6x2gpC6y2jJJtO9l/CY+P7b/lTc5vjTuKy4ma6AgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntity모델링하기/Untitled.png&quot;
        title=&quot;img/KotlinJPAEntity모델링하기/Untitled.png&quot;
        src=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png&quot;
        srcset=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled.png 280w&quot;
        sizes=&quot;(max-width: 280px) 100vw, 280px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 309px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 178.15699658703073%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEfElEQVRIx52WaXPiRhCG/UdSe9hGHAZzCSTrRAIJSYC4JOylWBfejbdclcr///ame0BexRx28qGrh2H0qmf6mW5dFMsdHDOpJOPUf+fWXpxbwP7quolrqb23Fq7YCq3dmHyh+Hst28WptxaKbdTqGsJRDNf14Tie8P3+EAMvgNv34ZFX7+z3I8wE6y0Tm/Ucs0mINE2xXMyxXC6QrlJMJ2MkyYJe4Im1HxCUKUIVj4mDJF3CtB3c6SZUMt2y4QwoYjLddPYRyu8LVmsKHuY+lqsHGFYfhumiR1vXyDuDAH0vhKL1Pp4Utq8FSkyhiS9XDfTMIf7evohxkdbwS/NrTyblLTIljpjmqpUOGjddMc5nNrOjEf5Gpp1b3BYiFTqnG7JMsHyjvNrZCJmvgRdhPosxGo0Rx1OMxxPEkxgTMh6HQQBNM4SZpoXarSqO4IxggHQ2FILTKYmMRsLH8QSj8ZhEI+i6LsyySLB+d1rwkhLhOzqev7mYLldIH9Z43G4xXy6hEDaMS98bwgtCDIYBBv7wvOC1JONONRB5Dj04ptsyxzCaIiKbhDHx6BJ/A2iGK8bsbwixo2eYJeWa3na5R4bv8x+fq9DVPl7WP/Dpsg6pKIsbktnRLEtvcMjoF3NkFZ6jFxRKh8i8i02lqqBSU8l3hZWJvzptq0HZrJDnM8vslozROYkNH+50NscqiTFfLLBKE6TJEgsqDgkVhygKKbvaa5YNQ0ezpZ1Iigi/g2DoYzpyRDbDKMKQuPM8HwF734dumDAJl8w326cE6dyuSwrmoY5f30Ostz8FMj9+veDpaQvD7glUvCCiAuHDD0cCn2ZbPxMheVnWoagmAj/G03oLWbFxp7lod0w0ZYNg9vA9XaPe1CB3LcJGPTxDab9djpLf9vmyga5sYzP7hk9fantEZHwljNpNE4/zNb5S5clXnYuzTYmqS5nma1ITpUr3YCdVnsvNiwjzDHHjYeNIGOwyRdvYP5BFkRmXtM3mGdVb7XgL4Emr58OmiqwbPWo+FjS6fipZVzHoPA10uoaIdCcoo87jfbSHghRZOE0wmi5wv0oQhVSeiDVmbMccmyGA53pYpmduK51/FducIKFS7CAOLCRxH+FkhojKlmH1hPX6A1FhTNsVNyIT5AgLb87+VfBS6mA5poymPh42WyT391AN2rZpw3YH6PsBzF5fXMEsmnrl5JcDC3axii2CeYTN0zPGVEhdvhl0S7jeMby2M3i9s9I+wpOCzF+3S9WXWqRm+lAUCx1zDKU3E1AzvC15lxTe5k2FzzDXsDLBPMyMylWhvcenLcpUga6hVNEgVS2Bjuh+9GBrv3XpVFJ2oofXsMRwVwhudYwyZZhhr1M5q5Kg+H3q6+vYTWE2my0dMfUVbkzz+Yy63oQa1K5xaZr5sc+5vGCDBBmjAWEzDIaE0whhGJExp9b/E/xrbeD+IcH255/UsCJYTl9knTGSSv9BkBdyWepZVERtDz03hKo56BAB7LmU5RNzVjCfvV33a+Fy/zUriofUPvh65fE/4gOQAzuy6aEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntity모델링하기/Untitled%201.png&quot;
        title=&quot;img/KotlinJPAEntity모델링하기/Untitled%201.png&quot;
        src=&quot;/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png&quot;
        srcset=&quot;/static/33bdc4b207ba3415ae591fd36af777cc/8890b/Untitled1.png 293w,
/static/33bdc4b207ba3415ae591fd36af777cc/c3c11/Untitled1.png 309w&quot;
        sizes=&quot;(max-width: 309px) 100vw, 309px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
data class Restaurant(
        var name: String = &amp;quot;&amp;quot;,
        @OneToMany(mappedBy = &amp;quot;restaurant&amp;quot;)
        @OrderBy(&amp;quot;name asc&amp;quot;)
        var menus: MutableSet&amp;lt;Menu&amp;gt; = TreeSet()
): MutableEntity() {

        fun addMenu(menu: Menu) {
                menus.add(menu)
                menu.restaurant = this
        }
}

@Entity
data class Menu(
        var name: String = &amp;quot;&amp;quot;,
        var price: BigDecimal = BigDecimal.ZERO,
        @ManyToOne(fetch = FetchType.LAZY)
        @JoinColumn(name = &amp;quot;restaurant_id&amp;quot;)
        var restaurant: Restaurant
): MutableEntity()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;보시는 것과 같이 두 엔티티는 &lt;code class=&quot;language-text&quot;&gt;@OneToMany&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;@ManyToOne&lt;/code&gt; 으로 양방향을 가지고 있고, &lt;code class=&quot;language-text&quot;&gt;LAZY fetch&lt;/code&gt; 되게 되어있습니다. (&lt;code class=&quot;language-text&quot;&gt;@OneToMany&lt;/code&gt;에서 fetch 는 default가 LAZY 방식이므로 생략 하였습니다.)&lt;/p&gt;
&lt;p&gt;앞서 말씀드렸다시피 data class는 &lt;code class=&quot;language-text&quot;&gt;open&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;abstract&lt;/code&gt;가 될 수 없고 기본적으로 &lt;code class=&quot;language-text&quot;&gt;final&lt;/code&gt;로 선언되어집니다. 위 두 클래스를 자바 코드로 변형해보면 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 427px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68.94197952218431%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQ4y5WT6W6bQBRGeZXW68CwDjDMAGYHx3Gj2q0T1eom9f2f4es1iaOolWr642gkNPrm3AUjlhUsrsCdFNwm3BSWrWE5+vm84rw5Ry53/75nHPrvOA7fsOvO43nffsGx/Yph/wPN4Rf27RlP/U/shjPyzycUT48oTidsPj2i2T+gqA7IyyM2Lxh+UCL60EIfesRDDetqaKsR00peYfxPJNjl+xsMEddQUY0q7qCTFjbhb+5RpRlKnWO+irBi0zFM6p+4q6AeWkRdBdPNwMiMUY9MsrBtSXaSLsdYm7cxuJMhIcsy6qBkg2j7EYIM/XwHGecolUIQaCzp9UmBNgWyJgPva3AydPVz/0ZTsrR4Ds7TsZyJhinY3IcTNPDI0rJyeKqHn20RXCzDLYTfkGE4MZB2z9EK64Ca6kdggvq1CjCbB5jTQ7NFgMVKjJevjb8ZyKhMr+/hth28IkecaIgoRUCEcQrXV/9XsjnzYbs1bI+mzCSihAaV5pAqo3CqwE1eA28b0lCcmppf0CC0xHItMKMHRhYC7+YC75ch7WM4KdSwqGRVtmiHO2T1AEdR2YSbdPBFhlzqkVRmNHF52/Dykztr2jWWwbVofUQJO6zAwxKOpxELBUlEQr8s+L8DfwPmdb+B22ZB2QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntity모델링하기/Untitled%202.png&quot;
        title=&quot;img/KotlinJPAEntity모델링하기/Untitled%202.png&quot;
        src=&quot;/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png&quot;
        srcset=&quot;/static/8fd149d918a4c43790e050369251249f/8890b/Untitled2.png 293w,
/static/8fd149d918a4c43790e050369251249f/e15b6/Untitled2.png 427w&quot;
        sizes=&quot;(max-width: 427px) 100vw, 427px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 517px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.43344709897611%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABz0lEQVQoz31TW5KjMBDjMhPAGIMJxphnAoFkJvna+99FK5NNDVu7mQ9hU2B1S2oHTk+w1RmmPKFSA+p0RFrOyJorVL3A5Cf0+QxlOoixQ9IRbQupKkSxQSi4CkNUG4IkdehuK4ZlQUbSVI+wpoXKG0RJDZFYJMJyzwNyB/GGUCiHqp9g2jPyYWInJzjTIE0tDlGJ0B96gxfJfh/4yqLuoK8P6OkGKWsUVYPKdbBEnPx9YI898WsN4sTQD4s4ZVeUKdKa3RGZ3ciiH8j+22GcO6hfE9KvAdq2MGZCIWm8fN/Zi0TSLqkaWrP3kBKHccFpXJnsDGcbhsKf4m9JYcSfo9d7+Y+H+yJBzE0uKDeidzm9zNgxA4nZoZe8eZiVOBBh+rRGSLcRHEjwERLRd4FAcDT8LJbVgqpcUeYXdMUXrL3C1Xc09Q3N+oC5fKKkkiPn07oZth6gtIM+PiGkfXZ4oISEPgzDHadpQXe+oJ3v6JsHpa/IszNKveLIQlr3kJzbVNXIdQNFNbpsUOwJ/UNlLUZ3JdEAexuhlh7HYUBWOCRMXPBWmKxHwRC8TB+Cn1G/bpLDvWSG4iffh/CxwX+kb3+mP+ZNiYTdVrHtqx+T/w3wq3sXVMLHQwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%203.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%203.png&quot;
        src=&quot;/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png&quot;
        srcset=&quot;/static/51269c629f86405c63734256224f326a/8890b/Untitled3.png 293w,
/static/51269c629f86405c63734256224f326a/70dcc/Untitled3.png 517w&quot;
        sizes=&quot;(max-width: 517px) 100vw, 517px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 코드는 IntelliJ에서 kotlin → kotlin bytecode → decompile java code 한 결과라서 가독성은 떨어집니다.&lt;/p&gt;
&lt;p&gt;이제 간단한 repository test를 통해 Menu Entity를 조회 하고 Restaurant Entity를 지연로딩 해보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;코드&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 623px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.549488054607508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQY022Q207CUBBF+zXa1tJz6b2nV1AUsC0ICVH//zuWQ3gx0YeVmXMm2bNne6YZSWxLkXfYpEOZDmM78qynkHcptSp6Mum1zGJ1oyWO/7KSmfc2LpynD077he/jzOdJOE5czzOHy5GL1K9l4TTP9NOM2y2U40z1Ot3Z3qlf3nH9Ac+EDqMHYqEs1uKsE8fiQjtsXpKkJVVWEekK24rQ5kqUDDyolEeV39E5vs4IogwvVCVRWrPKHbF1cnKDThqet2v2uw3j2GOMk3NbtB0ljoEgFBE/w//Foy9/QY7nq4IgrQhuLqSPVSVZiKumpR0kx7rhaVXLohZlbzk2+KEIiKj/Dz94qaYBX8NS2gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%204.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%204.png&quot;
        src=&quot;/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png&quot;
        srcset=&quot;/static/c52bb4a495e7a2eba3686514cc5a7fea/8890b/Untitled4.png 293w,
/static/c52bb4a495e7a2eba3686514cc5a7fea/1f316/Untitled4.png 585w,
/static/c52bb4a495e7a2eba3686514cc5a7fea/5dd04/Untitled4.png 623w&quot;
        sizes=&quot;(max-width: 623px) 100vw, 623px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;strong&gt;결과&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;정상적으로 초록막대와 함께 query 로그도 한번만 찍힌 것을 확인했습니다. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 9.897610921501707%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAdUlEQVQI1y2MWw6EIBAEPZKoCCgPWbIqunv/45Sj8aPS00lNN7n8ieWH9V+cFWJlCAc6nQxuJaSDlE/icjD5jSnsT9p5RZsPbZ9QL20XaULcCblipoIRwYVNBitqzHR6kcHK7fiXWca8OM8teXfjCqP8qj5yAa+IRNWZwuohAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%205.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%205.png&quot;
        src=&quot;/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png&quot;
        srcset=&quot;/static/4d8d3ec05c6b7a77bbcd0c873245762f/8890b/Untitled5.png 293w,
/static/4d8d3ec05c6b7a77bbcd0c873245762f/1f316/Untitled5.png 585w,
/static/4d8d3ec05c6b7a77bbcd0c873245762f/463a7/Untitled5.png 1170w,
/static/4d8d3ec05c6b7a77bbcd0c873245762f/e1fbe/Untitled5.png 1755w,
/static/4d8d3ec05c6b7a77bbcd0c873245762f/a7eef/Untitled5.png 1803w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1146px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.597269624573375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQY02VQ2XKDQAzjc9qchDRJCezNvQTKtDP9/y9Rbe9jHzSW7ZUsyJrxF6FdYNwM3yyw4YW23+DCIn1oV2gXBY52ykz0NsqONcpO0HYSnhcambYRgZbajlIZY/xB062CftzocTLhw7UehLfdl1RFvTIjLPG33T0Z+uYlQ658eZi+kyGl64ZNhNZH6UXsZzJcpWqTEjriu8NnMmSxFdGclvRpxqZULsyoVC/gpGyoCcw5bVl1qOpOZsfzExn/kycNbg+P683ictWCw6nE+/4hV/fH8h94f77UwvNCofgwOOUV/gBGgq9v8Hjm2AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%206.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%206.png&quot;
        src=&quot;/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png&quot;
        srcset=&quot;/static/b83ee2aa872e5a085123fb2f2d9838b4/8890b/Untitled6.png 293w,
/static/b83ee2aa872e5a085123fb2f2d9838b4/1f316/Untitled6.png 585w,
/static/b83ee2aa872e5a085123fb2f2d9838b4/601e5/Untitled6.png 1146w&quot;
        sizes=&quot;(max-width: 1146px) 100vw, 1146px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그럼 정말로 문제 없는걸까요? 더 확실히 테스트해보기 위해 직렬화가 필요한 controller 테스트를 해보았습니다. ( 이 테스트는 service를 mocking하는 단위테스트로 작성하지 않고, 실질적인 테스트가 필요하여, 통합테스트로 진행했습니다. )&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;코드&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 786px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.96245733788396%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+klEQVQY01WQaW6EMAxGOQ3DkgDDkNVJ2IqQqkqVRnP/q3w10Fbtj6fYUfK8ZMv2grxHNMpDCINHZ0Eck/bwfJqHO+MDzXFRKUZ/o3Ar9Z9cI1v3F0QT0HcOlgUDfzSOEGxAMAHOeIwUQIa4mMGNJXl5iNQ/0a9wnJ+oGo+au+tah2qOqJcIEQm9W6DUhPZhIe4WudQ8hYWU7nx/iPPikv+QjcsTNQuLiqsXGnJNaLaEdmdSRPAzfEiI8wg5RQx8mmmGDRM+PjdQSihrfXJ1yELR0pmUTO0Jgi4kjz8MvA5F5xoGXkPP45fe8875zkRoF7G/r3jbZ1RC4wsiuaIY3bS/sQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%207.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%207.png&quot;
        src=&quot;/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png&quot;
        srcset=&quot;/static/1a3bfb85dd69a1e72e47a3eeaf800704/8890b/Untitled7.png 293w,
/static/1a3bfb85dd69a1e72e47a3eeaf800704/1f316/Untitled7.png 585w,
/static/1a3bfb85dd69a1e72e47a3eeaf800704/dc666/Untitled7.png 786w&quot;
        sizes=&quot;(max-width: 786px) 100vw, 786px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;strong&gt;결과&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;테스트의 결과는 초록막대인데.. 찍힌 로그가 뭔가 이상합니다&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 934px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.470989761092156%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQoz1VR2W7DMAzLH21t4+byGTuu3RwDhv3/r3C0M3TbA6GmlCjSanz+QkyfcP6ACwds2GHdDmme0G6DmfdaVYElzFohNXl+1x72lz7D381JZEj14ECGMB5mTLi2BqOM0CajUwlCZ7TTA5ebIjTeLhKimymcoIhSrX+i0XaFXw4YVus39D7CqxXi7ugkY/Y7BnI9XXRc3gqLllwR7ccFdt7giFJ9PNCM8lHdDdOCkbWV3DrE6rAfQuXudCaIlgJXCp0OVXVYUkzUKDrKJDSTOi1XQnNIzVB9rINVkJyYIhcl3Ch4uSq8EzUynf4K8nksBbVbEZYPPujKozDen8jaPnms7V/kmzB/IgcecH1FDiVycVgevmyR5QA6QE+pDp1bM3r2dCrjzp7y/0vwJ4GqyLX3G2AW83caeuYMAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%208.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%208.png&quot;
        src=&quot;/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png&quot;
        srcset=&quot;/static/439971cdb4b4dfdb354a47926869f71c/8890b/Untitled8.png 293w,
/static/439971cdb4b4dfdb354a47926869f71c/1f316/Untitled8.png 585w,
/static/439971cdb4b4dfdb354a47926869f71c/ca463/Untitled8.png 934w&quot;
        sizes=&quot;(max-width: 934px) 100vw, 934px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.501706484641637%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVQY002QWQ6DMAxEOVCrbrQBsrMEKFSI+x9maptS8WFNZM+8xMlubsJZNXB+RIiTqHUDKpNg7ICiaqVK3cFQn7XUiTwjKlJVNFDlNr/nHtnFjDg9goBcGCVkbA9NsFDPcokPbzmnYRWNzQepX0lnWMp58nD/qSKyKwPzKANHQQFSaYKykXvuF2q75b9JmxZR3oL97MtfYQcGWZPNO+wItEcgv3YH1huQ5zzT9E1fJwGMjbUIB58AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%209.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%209.png&quot;
        src=&quot;/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png&quot;
        srcset=&quot;/static/ac5077b77b8167a014b9f2cbf86f34b9/8890b/Untitled9.png 293w,
/static/ac5077b77b8167a014b9f2cbf86f34b9/1f316/Untitled9.png 585w,
/static/ac5077b77b8167a014b9f2cbf86f34b9/463a7/Untitled9.png 1170w,
/static/ac5077b77b8167a014b9f2cbf86f34b9/d2c4c/Untitled9.png 1592w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;객체를 직렬화 하기전까지는 서로 참조하는 값을 계속해서 참조 할 일이 없지만, 직렬화를 하기 위해 참조하는 과정에서 뭔가 하이버네이트 엔진이 HIkariProxyResultSet으로 부터 결과 값을 가져오는데 무한적으로 재귀호출을 하는 것 같습니다. ( 개발환경에서 허용된 메모리만큼 재귀호출이 되다가 결국엔 StackOverFlow가 발생합니다. 내부적으로 예외처리가 되있어 직접적으로 에러로 표시되진 않는 것 같습니다. )&lt;/p&gt;
&lt;p&gt;로그를 자세히 보시면 HikariProxyResultSet의 HashCode가 계속해서 바뀌고, 계속해서 새로운 객체를 참조하여 DB 데이터의 결과값을 가져오려고 시도합니다.&lt;/p&gt;
&lt;p&gt;이 문제를 해결하기 위해 제가 시도한 방법은 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;data class&lt;/code&gt; 를 &lt;code class=&quot;language-text&quot;&gt;일반 class&lt;/code&gt; 로 변경 후 &lt;code class=&quot;language-text&quot;&gt;Hibernate&lt;/code&gt;가 &lt;code class=&quot;language-text&quot;&gt;Lazy load 객체&lt;/code&gt;를 가져올 때 정상적으로 작동 할 수 있게 open 키워드 달아주어 상속 가능하게 만들기&lt;/li&gt;
&lt;li&gt;직렬화 시 무한 재귀에 빠지지 않게 하기 위해 &lt;code class=&quot;language-text&quot;&gt;HibernateModule&lt;/code&gt;을 빈으로 등록하여 jackson에configuration 하기&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Data class → class 로 변경 후 open 키워드 달기&lt;/h3&gt;
&lt;p&gt;먼저 data class를 일반 class로 바꾸기&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
class Menu(
        var name: String = &amp;quot;&amp;quot;,
        var price: BigDecimal = BigDecimal.ZERO,
        @ManyToOne(fetch = FetchType.LAZY)
        @JoinColumn(name = &amp;quot;restaurant_id&amp;quot;)
        var restaurant: Restaurant
): MutableEntity()

@Entity
class Restaurant(
        var name: String = &amp;quot;&amp;quot;,
        @OneToMany(mappedBy = &amp;quot;restaurant&amp;quot;)
        @OrderBy(&amp;quot;name asc&amp;quot;)
        var menus: MutableSet&amp;lt;Menu&amp;gt; = TreeSet()
): MutableEntity() {

        internal fun addMenu(menu: Menu) {
                menus.add(menu)
                menu.restaurant = this
        }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;아까 위에서 소개해드렸던 JPA 표준 POJO Model 객체가 되기 위해 &lt;/p&gt;
&lt;p&gt;일일이 entity 마다 open 키워드와 빈 생성자를 작성하긴 귀찮으니,  kotlin jpa plugin 을 사용하여 자동적으로 모든 entity에 적용 시켜주겠습니다.&lt;/p&gt;
&lt;p&gt;적용하는 방법은 &lt;code class=&quot;language-text&quot;&gt;build.gradle&lt;/code&gt;(groovy dsl) 혹은 &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt; (kotlin dsl) 에서 설정 할 수 있습니다. &lt;/p&gt;
&lt;p&gt;저는 kotlin dsl을 사용하고 있으므로 다음과 같이 작성했습니다.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;build.grade.kts&lt;/em&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;plugins {
        ...
    kotlin(&amp;quot;plugin.jpa&amp;quot;) version &amp;quot;1.3.61&amp;quot;
}

noArg {
    annotation(&amp;quot;javax.persistence.Entity&amp;quot;)
    annotation(&amp;quot;javax.persistence.MappedSuperclass&amp;quot;)
    annotation(&amp;quot;javax.persistence.Embeddable&amp;quot;)
}
allOpen {
    annotation(&amp;quot;javax.persistence.Entity&amp;quot;)
    annotation(&amp;quot;javax.persistence.MappedSuperclass&amp;quot;)
    annotation(&amp;quot;javax.persistence.Embeddable&amp;quot;)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위와 같이 작성하고 나면 &lt;code class=&quot;language-text&quot;&gt;Entity&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;MappedSuperclass&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Embeddable&lt;/code&gt; 의 어노테이션이 붙은 클래스에 빈 생성자와 open 키워드가 자동으로 정의됩니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;open&lt;/code&gt; 키워드를 코드에서 정의하지 않았는데도, 자바로 변환한 코드에서는 원래의 &lt;code class=&quot;language-text&quot;&gt;final class&lt;/code&gt; 에서 &lt;code class=&quot;language-text&quot;&gt;일반 class&lt;/code&gt; 로 변경되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 841px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.58361774744027%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVQoz51T23KbMBTkY+qYOxLohgCBuDh2Mm5Tp86kM/3/39gecJrkqdPpww5iVqz27Iqg9VfY+oR+/Inx/gV+/gF//IVuvMC0Z2h7giZe1Q+omyO8/4pxuaIdT7DdEULPG/9nXzAdX9GYB2ShRJIZZIVFltcIY4m7sCKId+z2HNrMcPMFyeSQiBpRrLGPJPbE7yOBwC+vkN0BETPYkegHKRFGb+8kHsZqO0CbA7r+CSnrwMoBedETv3JyQ3B+vEJID171kLxFXjpktI5Tg5AQpeQiMe+CUt8EY+bAKgurFLTQqKWBpWdwuif7qUWcaZTOIbcTGLkomwXCncCFR0yCt5FLKBp58BewogVjDSrtoEQHYVpw2yA4UBG88ijqHuY4oxk8bVpgx0eYZiYXHZK8oWxbythu4Tv3BGkHGDch5T0q4kPKf8/I4Xx4gab2ynaG6hZqakSllg1cTChXyBt4NVKzZzTdN5S1g/Uzck0cjZ6lirKnDHv/jJRO2N2Vt7E+tbq29rGW+EJ7JLl3/XdkoqGIJhIcUcgRJXfbnmAYn2mcbvt4Df5v2EqhfFfBmBskpqORLdItjma7apvDNZ/VxT8JvrUcFgqx7pAzBcYVierbtfkfwdVhPdAFX+hPMWveHoIcF0WN35iwZkc1tYO4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%2010.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%2010.png&quot;
        src=&quot;/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png&quot;
        srcset=&quot;/static/49db6c6a6dd1eca5723f0a9bfcba3127/8890b/Untitled10.png 293w,
/static/49db6c6a6dd1eca5723f0a9bfcba3127/1f316/Untitled10.png 585w,
/static/49db6c6a6dd1eca5723f0a9bfcba3127/20595/Untitled10.png 841w&quot;
        sizes=&quot;(max-width: 841px) 100vw, 841px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Jackson configuration&lt;/h3&gt;
&lt;p&gt;아직 lazy 로드 되기 전의 proxy 객체 또한 직렬화 하려고 하면 에러가 나기 때문에 다음과 같은 솔루션으로 직렬화 시 문제를 해결합니다. ( lazy 로드 되기 전의 proxy 객체는 null 처리 해줌 )&lt;/p&gt;
&lt;p&gt;저는 hibernate5 버전을 사용하고 있으므로 다음과 같이 작성 했습니다.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;build.gradle.kts&lt;/em&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;dependencies {
    ...
    // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 직렬화를 가능하게 해준다. (jackson ObjectMapper support)
    implementation(&amp;quot;com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:2.9.8&amp;quot;)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;em&gt;JacksonConfig.kt&lt;/em&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Configuration
class JacksonConfig {

    @Bean
    fun hibernate5Module(): Hibernate5Module {
        // Hibernate5Module이 지연로딩 되는 객체의 프로퍼티 값이 비어있더라도 직렬화를 가능하게 해준다.
        // 이 모듈을 bean으로 등록 안하면 hibernateLazyInitializer 라는 하이버네이트 프록시 객체의 프로퍼티를 직렬화 하려다가 에러남
        return Hibernate5Module()
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 처럼 변경해준 뒤 다시 테스트를 돌려보면&lt;/p&gt;
&lt;p&gt;정상적으로 테스트 통과 후 한번만 쿼리하는 것을 볼 수 있습니다&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.74744027303754%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVQY0z2Pa5KDIBCEvU92NaIgMCKoQUzMPir3v0vvOKnaH10NNHz0VCE/QG4DhR0+HtDpCza/YNITIR1Y849ouX0jlxevf2H9ht4sUH2C0gltF3FlNWpCpcMCrRL0wE4bal/QUMGFw8GtCPGOMRTxOB/8cRFNvBelh+Sqj7h8WlQ2Zgx6lseGgS3tUOMdDZ85n/8hnjPrbnCUuWEWgOJWbTeh45an6iu9gaafYewKy2OfwJZHqvnyCTibOdoEOk67wGQaM7+dJbCG8FF7/AHWzIiV94XDhAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%2011.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%2011.png&quot;
        src=&quot;/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png&quot;
        srcset=&quot;/static/db10cb8de14458109af3d0b7d44c30ad/8890b/Untitled11.png 293w,
/static/db10cb8de14458109af3d0b7d44c30ad/1f316/Untitled11.png 585w,
/static/db10cb8de14458109af3d0b7d44c30ad/463a7/Untitled11.png 1170w,
/static/db10cb8de14458109af3d0b7d44c30ad/e1fbe/Untitled11.png 1755w,
/static/db10cb8de14458109af3d0b7d44c30ad/363b9/Untitled11.png 1796w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.15699658703072%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQ4y41U2XKjMBDkL9YGDAgQ92HA+I6DXescm71q9/+/pbelBCeVSmr90KWRkFrTPSOMKIogPA+e62gIwVgIOFwboea+718FIwh8HhKQWQmZVxCBROi5aKIQXSLRxSEiXmLPZphdAcNjBsLn4eMTlve/kBQVsiTC47DCcdNq9O0cruteBUNJDGSCZn9Gtd6jXO5RtC1un05otwv0hyWatoFlMwPHgeP8h9CjPE/4yNs16u0R88MD2uERWbdGlaYoma3kpUkYIKI9IWPHmRHOh9CSVTCzLQgZoTv9QL0bELJYXRbh2Ba4W80xNAX2dY5VlSEksfJLn/vIQ5Wqw4kf5egf/qA9nBEXNQoZ4JZEWRzBtOxLYT7L7pLhKyG9HL6xMCQpYvje87r6PpLZI+w38Qs+yDBBsbzRXi6Ge3p5B5lmSEOf0ktsKXdTpujyBDvK31Qp+ixGz7lac8n16uHMJmGKlh4uzz/Rf+X48BtxnqNmP57oZUzvfO4PWBjpCw1VpEBDQHEZKrtQSvhctCyLDT5nVoVu9CBOdfZRIJAQ6uL30t/HhstNMqZ36xv4IYk9C7Y5gTn5wgtMTFmMiWlpqF40bZvjM1SsivW2UIbHDDy+lHp3Yi+yiddb1CQPk0zLaelRm0aYU7bycs64iiUKPk0Vq29KxUiqJav3my926IYnevgdy8e/yJsFPRM49zWLkaLhwTJ+JmleSBVZxwvVT+FCqJ6e43qoNkdW94Ryc4tqO+gMc/bhSlWPG5X0UfIoW8l9K1l7GLMgNl+JZU5hTScX6DUSTN959BnGPf8As5LKhBpuTWoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/KotlinJPAEntityModeling/Untitled%2012.png&quot;
        title=&quot;img/KotlinJPAEntityModeling/Untitled%2012.png&quot;
        src=&quot;/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png&quot;
        srcset=&quot;/static/32366886ed6e3611e910d59884b9e7ce/8890b/Untitled12.png 293w,
/static/32366886ed6e3611e910d59884b9e7ce/f2d49/Untitled12.png 300w&quot;
        sizes=&quot;(max-width: 300px) 100vw, 300px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;실제로 데이터가 조회되었고, lazy fetch 모드로 설정되있고, 아직 꺼내지 않은 객체 restaurant.menus에 대해서는 null 처리가 되어있습니다. &lt;/p&gt;
&lt;p&gt;하지만 여기서 끝이 아닙니다. 현재까지는양방향관계에서  &lt;code class=&quot;language-text&quot;&gt;@ManyToOne&lt;/code&gt; 를 가진 쪽의 엔티티 조회에서 문제를 해결했는데요, &lt;/p&gt;
&lt;p&gt;아직 &lt;code class=&quot;language-text&quot;&gt;@OneToMany&lt;/code&gt;의 관계를 가진 엔티티를 lazy load 조회 할 때 문제가 있습니다.
&lt;br/&gt;
이 부분까지 해결하기 위해서는 여러가지의 솔루션이 있는데 그 중 하나를 다음 포스팅에서 소개하겠습니다.
&lt;a href=&quot;https://thxwelchs.github.io/JPA%20%EC%96%91%EB%B0%A9%ED%96%A5%20Entity%20%EB%AC%B4%ED%95%9C%20%EC%9E%AC%EA%B7%80%20%EB%AC%B8%EC%A0%9C%20%ED%95%B4%EA%B2%B0/&quot;&gt;JPA 양방향 관계 무한재귀 해결 포스팅 보러가기&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;감사합니다.&lt;/p&gt;
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;하이버네이트 공식 엔티티 모델링 가이드 &lt;a href=&quot;https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#entity&quot;&gt;https://docs.jboss.org/hibernate/orm/5.4/userguide/html&lt;em&gt;single/Hibernate&lt;/em&gt;User_Guide.html#entity&lt;/a&gt;
kotlin compiler-plugins(no-arg, all-open) &lt;a href=&quot;https://kotlinlang.org/docs/reference/compiler-plugins.html&quot;&gt;https://kotlinlang.org/docs/reference/compiler-plugins.html&lt;/a&gt;
코틀린 JPA &lt;a href=&quot;https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa&quot;&gt;https://github.com/spring-guides/tut-spring-boot-kotlin#persistence-with-jpa&lt;/a&gt;
객체지향적 상속성 활용한 엔티티 설계하기 &lt;a href=&quot;https://victorydntmd.tistory.com/209&quot;&gt;https://victorydntmd.tistory.com/209&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[ES2020]]></title><description><![CDATA[2020년이 되면서 javascript 표준 규격인 ECMA script 에도 몇가지 추가된 사항들이 생겼습니다!
 어떤 것들이 있는지 한번 살펴보겠습니다. 널 병합 연산자 (Nullish coalescing operator…]]></description><link>https://thxwelchs.github.io/ES2020/</link><guid isPermaLink="false">https://thxwelchs.github.io/ES2020/</guid><pubDate>Sat, 29 Feb 2020 22:31:55 GMT</pubDate><content:encoded>&lt;p&gt;2020년이 되면서 javascript 표준 규격인 ECMA script 에도 몇가지 추가된 사항들이 생겼습니다!
&lt;br&gt;
어떤 것들이 있는지 한번 살펴보겠습니다.&lt;/p&gt;
&lt;br/&gt;
&lt;h1&gt;널 병합 연산자 (Nullish coalescing operator)&lt;/h1&gt;
&lt;p&gt;널 병합 연산자란 왼쪽에 대입되어 있는 피연산자 값이 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt; 이거나 &lt;code class=&quot;language-text&quot;&gt;undefined&lt;/code&gt; 일 때 오른쪽에 대입되어있는 피연산자 값이 반환되게 하는 연산자입니다.&lt;/p&gt;
&lt;p&gt;이 널 병합 연산자가 제공되기 전의 ES버전에서라면 아마도 논리연산자 OR &lt;code class=&quot;language-text&quot;&gt;||&lt;/code&gt; 를 통해 기본 값을 설정하거나, &lt;code class=&quot;language-text&quot;&gt;삼항연산자&lt;/code&gt; 혹은 &lt;code class=&quot;language-text&quot;&gt;if else&lt;/code&gt;문을 통한 null 처리를 하셨을 겁니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const iamNull = null
const iamUndefined = undefined


const hello = iamNull || &amp;#39;world&amp;#39;; // OR 연산자로 기본값 처리
const hello2 = iamNull ? iamNull : &amp;#39;world&amp;#39; // 삼항연산자로 기본값 처리

let hello3 = iamNull // if문으로 null 일때 기본 값 처리
if(!hello3) {
    hello3 = &amp;#39;world&amp;#39;
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 예시코드에서는 큰 문제가 하나 있는데요. 그것은 &lt;code class=&quot;language-text&quot;&gt;iamNull&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;iamUndefined&lt;/code&gt; 의 값이 &lt;code class=&quot;language-text&quot;&gt;0&lt;/code&gt; 이거나 &lt;code class=&quot;language-text&quot;&gt;&amp;#39;&amp;#39;&lt;/code&gt; 과 같은 값일 때도 &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt; 로 강제 변환되기 때문에  반드시 nullish 한 값 일 때만 처리하고 싶은 경우는 주의 하여야 합니다.&lt;/p&gt;
&lt;p&gt;그런데 ES2020에서부터 제공되어지는 &lt;strong&gt;널 병합 연산자&lt;/strong&gt;를 사용하면 반드시 &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;undefined&lt;/code&gt;인 값 의 default 값 처리를 할 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const hello = 0 ?? &amp;#39;world&amp;#39;
// hello: 0 
const hello2 = &amp;#39;&amp;#39; ?? &amp;#39;world&amp;#39;
// hello2: &amp;#39;&amp;#39;
const hello3 = null ?? &amp;#39;world&amp;#39;
// hello3: &amp;#39;world&amp;#39;
const hello4 = undefined ?? &amp;#39;world&amp;#39;
// hello4: &amp;#39;world&amp;#39;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h1&gt;선택적 체이닝 (Optional chaining)&lt;/h1&gt;
&lt;p&gt;또한 이제는 알려지지 않은 속성 값에 대해 null safe한 object의 체이닝도 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를들면 이런 것 입니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const a = {
    b: {
        c: 0	
    }
}

// Uncaught TypeError: Cannot read property &amp;#39;c&amp;#39; of undefined
// a밑에 d가 undefined이므로 c 속성을 읽으려고 하면 에러 발생
console.log(a.d.c)

// 그래서 보통 이러한 처리를 &amp;amp;&amp;amp; 연산자로 처리하기도 했음
console.log(a.d &amp;amp;&amp;amp; a.d.c)

// 그러나 널 병합 연산자로 더욱 깔끔하게 처리
console.log(a.d?.c)
// 결과: undefined&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;Promise.allSettled ( 안정적으로 모든 promise 작업 처리하기 )&lt;/h1&gt;
&lt;p&gt;순차적이지 않은 비동기적인 작업을 수행 할 때 &lt;code class=&quot;language-text&quot;&gt;Promise&lt;/code&gt; 패턴을 통해 콜백 지옥을 해소시키고, 여러개의 &lt;code class=&quot;language-text&quot;&gt;Promise&lt;/code&gt;를 처리 할 땐 &lt;code class=&quot;language-text&quot;&gt;Promise.all&lt;/code&gt; 함수를 통해&lt;/p&gt;
&lt;p&gt;처리하셨을겁니다.&lt;/p&gt;
&lt;p&gt;그런데 &lt;code class=&quot;language-text&quot;&gt;Promise.all&lt;/code&gt; 의 큰 단점은 처리 할 여러개의 &lt;code class=&quot;language-text&quot;&gt;Promise&lt;/code&gt; 중 하나라도 &lt;code class=&quot;language-text&quot;&gt;reject&lt;/code&gt; 되는 작업이 있다면, 나머지 성공되는 작업들의 결과 값을 처리 할 수 없다는 것인데요, 이것 또한 예시로 보겠습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const promise1 = new Promise((resolve, reject) =&amp;gt; setTimeout(resolve, 100, &amp;#39;성공 1&amp;#39;))
const promise2 = new Promise((resolve, reject) =&amp;gt; setTimeout(reject, 100, &amp;#39;실패!!!&amp;#39;))
const promise3 = new Promise((resolve, reject) =&amp;gt; setTimeout(resolve, 100, &amp;#39;성공 3&amp;#39;))
const promise4 = new Promise((resolve, reject) =&amp;gt; setTimeout(resolve, 100, &amp;#39;성공 4&amp;#39;))
const promises = [promise1, promise2, promise3, promise4]

/* Promise.all */
Promise.all(promises)
.then( results =&amp;gt; { 
    console.log(results)
})
.catch( err =&amp;gt; {
    // 2번째 프로미스가 reject 되므로 catch 함수로 들어오게 됌
    // 그럼 나머지 1,3,4는..?
    console.error(err)
})
// 결과: 실패!!!

/* Promise.allSettled*/
Promise.allSettled(promises)
.then( results =&amp;gt; { 
    console.log(results)
})
.catch( err =&amp;gt; {
    console.error(err)
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Promise.allSettled로 처리한 결과&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 252px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8e4e316cb8fd15e01f576bad45c0a6dc/019e0/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACpElEQVQ4y42U627TQBCF8w4g1Caxvb6t7fXdsR3Hl8RNAoWCkBAS7/8mh9kJLRRS4MdonE32+Ow3Z7OI0hxpUWE+HtF0O5TNFl6ouIb9jHY3YNuPMB0PbT+gnw7oxglBnEJGMQ6nM6p2S3t7lHWLxVo4yKsNyvEMVdSYDgcSGGitRk0/coOINxu2B4eefZUiTDI4MqA1F4oMsbiK4fgBFktTwPZ8iLjCyo+RNTts+gOSsoEXBBCODYvK9V04nkPd4TW9b2XZuDWsp9Jr7HClv6Qu8g5WfYSR9bCiggXGLkFbK5RFiK5RmIcEKpa02Ybe+3uxIL9NuBDFALOaud/ShiIP8OltgV1LTKVH7jxyYrMzNmL9fH4S1GIqzeAnJQwZo9vfYTvOPKgkv7gUrssvuCEx3X8V/MOhXhSuD0tGMIMUSTOg6CbEZc0MtTMZ+PCpR0oiinyY9nWxpyMzQ5qYlRFDOvI62xHDHLbrYL9LcBxT9FuF8z7FlnheO+pzQUtgTbEQRQ+7u2eOJg1FT/O8z/BwylkoSeQzd1ePrBnGxDCoRxhexGHuqXRIdegNQbEhhhdXDnN8nPDVoegFUx83SGCqEmE9IG7pJmQbuFIiJGYy8KhLSGkjiV1+/mtsHnPIDCmHZt4zQyld3BG/XRsjTVx8+/oRXz6fiK1gt1cFtZChPzg+589ujrDLkfImKIchPhxzCnRM4gLvHx4w3b3D65slX7sXc6gZhs0EwyeG44jxMKNqWsR5yaFf/uD3+naNVzdrPs36hUkvLtZtGkgIK97ArycekJdUdMc9nqxSl8rJ8ZauX6T8fzDUb6LYaIaCGFqaYUj/KqGH05TyHa7KEBsq3XXY/0tQkJBdz3CqEUtimGcB7ucMdRWxU30F36wuCF6KzXehD+95uZxmfwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ES2020/Untitled.png&quot;
        title=&quot;ES2020/Untitled.png&quot;
        src=&quot;/static/8e4e316cb8fd15e01f576bad45c0a6dc/019e0/Untitled.png&quot;
        srcset=&quot;/static/8e4e316cb8fd15e01f576bad45c0a6dc/019e0/Untitled.png 252w&quot;
        sizes=&quot;(max-width: 252px) 100vw, 252px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위와 같이 처리된 결과의 상태와, 값 그리고 실패하였을 경우에는 그에 대한 값이 reason 프로퍼티로 들어오게 되어, 비동기의 성공한 결과뿐 아니라 실패한 결과와 같이 처리 할 수 있게 됩니다.&lt;/p&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;globalThis&lt;/h1&gt;
&lt;p&gt;globalThis는 Javascript의 최상위 객체인 global 객체에 access 하기 위해 ES2020에서 추가된 방식입니다.&lt;/p&gt;
&lt;p&gt;최상위 객체라면 브라우저에서는 window 객체를 의미하고, &lt;/p&gt;
&lt;p&gt;Node.js 에서는 global 객체를 의미합니다. &lt;/p&gt;
&lt;p&gt;이러하듯, 자바스크립트가 실행되는 런타임 환경이 달라지면 global 객체에 접근하는 방식이 달라져 불편하기 때문에 이제는 globalThis 라는 객체를 사용하여  어떤 런타임에서든 동일하게 접근 할 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;globalThis.Array() // window.Array() 와 같음
globalThis.alert(&amp;#39;Hi!&amp;#39;) // window.alert(&amp;#39;Hi!&amp;#39;) 와 같음&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;br/&gt;
&lt;br/&gt;
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator&quot;&gt;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Nullish&lt;em&gt;coalescing&lt;/em&gt;operator&lt;/a&gt;
&lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled&quot;&gt;https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled&lt;/a&gt;
&lt;a href=&quot;https://dev.to/carlillo/es2020-features-in-simple-examples-1513&quot;&gt;https://dev.to/carlillo/es2020-features-in-simple-examples-1513&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Spring 중복코드 줄여보기]]></title><description><![CDATA[Spring 다형성, 상속성을 이용한 중복코드 줄여보기 스프링부트를 활용하면 상당 부분 설정이 편리해진 부분이 있었지만, 흔한 MVC 패턴에서(물론 실제 개발은 MVVM…]]></description><link>https://thxwelchs.github.io/SPRING-DUPLICATION/</link><guid isPermaLink="false">https://thxwelchs.github.io/SPRING-DUPLICATION/</guid><pubDate>Tue, 25 Feb 2020 12:51:55 GMT</pubDate><content:encoded>&lt;h1&gt;Spring 다형성, 상속성을 이용한 중복코드 줄여보기&lt;/h1&gt;
&lt;p&gt;스프링부트를 활용하면 상당 부분 설정이 편리해진 부분이 있었지만, 흔한 MVC 패턴에서(물론 실제 개발은 MVVM 패턴으로 개발중) 엔드포인트 혹은 엔티티가 늘어 날 때마다 반복되는 코드들이 생기는게 불만스러웠습니다. 그래서 고민을 하게 되었습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;객체지향스럽게(?) 다형성과 상속성을 지키는 구조로 중복되는 코드들을 줄여보는게 어떨까?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;공통이되 중복되는 부분 제거&lt;/h1&gt;
&lt;p&gt;먼저 저의 스프링부트 구조에서 중복을 없앨만한 요소들을 찾아 보았습니다.&lt;/p&gt;
&lt;p&gt;저의 스프링부트 프로젝트의 모듈구조는 싱글모듈 구조 였고, &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;controller&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;model&lt;/code&gt;(entity), &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;repository&lt;/code&gt; 를 주요 레이어로 가지는 구조였기에&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;entity&lt;/code&gt;가 늘어나면 늘어난 entity 기반으로 &lt;code class=&quot;language-text&quot;&gt;controller&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;repository&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt;를 생성해주어야 했습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 123px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/eb9cd826c2f454a0edfebb81e2a80baf/44f7a/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.41463414634146%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVQ4y3VTyW7aQBjmgZqqlyopwRvBLMZ431iMjQFjsxmKSBelyiGKlCqHHqo+QO99x68zhlBctYdZrPH8/7fMV2J4GZvtRwzDFGVBRvrWwH3Fx219BFF2oZtDGNYQfjCD149hmANE4yV6A7K3A1RrGvgbFQJZ6SgxfAfTWQbHG4EROvAuVXzr7/Er+wrVDuGHcwRBimSeYTjOEIYzTKcrzFe3CMIEXFU5FcsL0umy3ECZkSCIGmq8Ak0w0K4Z4EjnqqjnCOhFTlDy/d9DOENZYsmPFL6i98ETtG80G696AzCOjxtSTGxauKkbqNVNtDsemm0XjZZJGvyhWaBc4dr48Oke43gNhpNxoVqQdrfo/fgOu59ilWaYrfaYzLbY7j5js96TwjbYc6rnBelE6VAtqcBXYgdXpgveC3J0YsOApHRzdJQFXYWaWkBVQEg/6EWqFVeVIWkxZH0OQSCXSCP22IwlhtEXUdT1Hxpes23cfXlAnG5RrjThxs+wxo+wp0/QnRGS5D1myQrhNMtdXS53iOINglGKUZSg3rILTucIVX1AxHbIQQeyOYdir6F4O0hqD447wTRewPNjuN0I3d4YljeB7Y4QRCkaTTNHXdCQPhmKtEq0YUQD5VaPGCSBJRTfkbP8/PhPmWmBGkll4M+onihXyKXsmBSWbeHCv8Pl4hm1xSOakg3bi+B0x4R+CIskwyQytDvO/015SYpNksKR6L0215A3TzAefkLR+nmzMFqSlCwwHCaYJBtY1iA36VCEGnNYT5Svcwpy/mxYkpCqFqKp+qfOVPTDXicOa8eEaIXIvYzfDN/4XhFuKZcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled/Untitled.png&quot;
        title=&quot;Untitled/Untitled.png&quot;
        src=&quot;/static/eb9cd826c2f454a0edfebb81e2a80baf/44f7a/Untitled.png&quot;
        srcset=&quot;/static/eb9cd826c2f454a0edfebb81e2a80baf/44f7a/Untitled.png 123w&quot;
        sizes=&quot;(max-width: 123px) 100vw, 123px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
그래서 controller, repository, service의 공통되는 부분을 묶어서 중복을 제거하고자 했습니다.&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;Service 공통 부분 중복 제거&lt;/h2&gt;
&lt;p&gt;중복되는 부분은 예를 들어 &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt;에서 단순히 &lt;code class=&quot;language-text&quot;&gt;repository&lt;/code&gt;를 통해 처리 한 뒤  &lt;code class=&quot;language-text&quot;&gt;controller&lt;/code&gt;에게 전달해주는 그런 로직들이 대상이 될 것 입니다.  예시 코드입니다. &lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Service
class MenuService(private val menuRepository: MenuRepository) {
        // 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?
        fun save(menu: Menu): Menu { 
        return menuRepository.save()
        }

    fun findAll(): MutableList&amp;lt;Menu&amp;gt; {
        return menuRepository.findAll()
    }

        ...
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;물론 controller에서 바로 repository를 DI하여 작업을 수행 할 수도 있겠지만
가능하면 &lt;code class=&quot;language-text&quot;&gt;controller&lt;/code&gt; -&gt; &lt;code class=&quot;language-text&quot;&gt;service&lt;/code&gt; -&gt; &lt;code class=&quot;language-text&quot;&gt;repository&lt;/code&gt; | &lt;code class=&quot;language-text&quot;&gt;other service&lt;/code&gt; 의 레이어 형태를 지키는
것이 바람직하지 않을까? 라는 생각 하고 있습니다.
그래서 위 예시코드에 기본적으로 제공되는 메소드들을 굳이 직접 service에 작성하지 않고 호출하는 구조로 만들고 싶어서 다음과 같이 entity를 다루는 service라면 반드시 상속받게 할 BaseEntityService를 생성했습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;/**
    * Entity 공통 Service
    * Generics description
    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태)
    *
    * SimpleJpaRepository는 JpaRepository의 실질적인 구현체 클래스입니다.
    * SimpleJpaRepository를 상속받기 위해선 반드시 super생성자로 클래스를 초기화 해주어야 하는 것 같은데,
    * 그 super 생성자는 찾아보니 두개의 생성자로 오버로딩 되어 있고, 저는 그 중 하나인 
    * entity의 클래스 타입과, entityManager를 받는 생성자로 슈퍼클래스 상속받게 했습니다.
    */
abstract class BaseEntityService&amp;lt;E : Any, ID : Serializable?&amp;gt;(
        clazz: KClass&amp;lt;E&amp;gt;,
        entityManager: EntityManager) : SimpleJpaRepository&amp;lt;E, ID&amp;gt;(clazz.java, entityManager) {
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;저는 JpaRepository가 어떤 구현체로 이루어져있는지 관심도 없었는데 이번에 처음 관심 갖게 되었고, 살펴보게 되었습니다. &lt;/p&gt;
&lt;p&gt;다음과 같이 두가지 생성자가 있는데 저는 두번째 타입의 생성자를 통해 상속하고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/739946555da520379ebceb0d8d474aeb/44507/Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68.25938566552901%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUElEQVQ4y11T13ajMBTkY7I2TYAqYJrBTrOTs7vJtv//kdmRHJzyMGdA92puVZSXA5J8h0J0qIis6pHJgTwgFS0yf1b0Aenbd05Wglz2F3/6+jtJ5hAV5YiUTrqa4Ko9hJog9B4ZUdC5LCcUcubl8SJGFuTG+8oJuRqvSPMa0UvzA7W8Q21OAUrfodK36PQRz+4JnbmjcIdNrD/hZquw2eqAb2/f28QicnJB4Q4X6BnCMLJdoOwB0h4vpWcNhM+M7fFIPdOes5qCdmnmEHSbUjBzO6iGGdaPUG6Grg8BhaajHWFqlrcbULcjmm6EawbaiWYMLArf5zaUGwRj1zDCATVLlXqCYaYVGyxVB206CvXY9QNs3cE2PGMCxu4ghKOIQ0yRTWxCuXHCoWhBZ9WgplNrO5SMKDi9kqUUFPZRbzaKfTKEDryJbRBYEacuIGTYqwMWltK3C9rxDNs/sJ/sK/tiOBzDzD0kpyjZX0VkvrzEvQt9EI1i/qSpj2Rw4yN6Q1YHY5o2YSAefscSnqfelqxlmqvYylEu90i4V4pTdNzFPEx5RkZOS5bPM8E9FNw7/wg8+7NSLYF9kE8Z1lybstxDkzUvlob/HE7LCyqI8IXkLV8T4bN94/V/zW5FdHbPsPKWQ+CqVDMmc49eHrHT/OeT9Bc26xLH5jrRrwO5ZnicXzE9/cV4/oPx9AvT4yv643eMywvm5Tcm2sdb2h/+YTr8RNufuI8X2OaBe/kZkfZ9aQfkzTsy7pzUC6y+D5PWhH85ir31q1TIPrwM37+v+A93tMIbg/5eUQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled/Untitled%201.png&quot;
        title=&quot;Untitled/Untitled%201.png&quot;
        src=&quot;/static/739946555da520379ebceb0d8d474aeb/44507/Untitled1.png&quot;
        srcset=&quot;/static/739946555da520379ebceb0d8d474aeb/8890b/Untitled1.png 293w,
/static/739946555da520379ebceb0d8d474aeb/1f316/Untitled1.png 585w,
/static/739946555da520379ebceb0d8d474aeb/44507/Untitled1.png 750w&quot;
        sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그럼 &lt;code class=&quot;language-text&quot;&gt;BaseEntityService&lt;/code&gt;가 완성되었으니 사용하게 될 Service에서 상속만 하면 되겠죠? &lt;/p&gt;
&lt;p&gt;그 구조는 다음과 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Service
class MenuService(
        private val menuRepository: MenuRepository,
        private val entityManager: EntityManager
) : BaseEntityService&amp;lt;Menu, Int&amp;gt;(Menu::class, entityManager) {

        // 이런거.. 일일이 굳이 코드로 작성 할 필요는 없지 않을까?
        // BaseEntityService에 이미 구현되어 있으니
        // 이제 이런 JpaRepository에서 정의된 함수들은 없어도 됌
        /*
        fun save(menu: Menu): Menu { 
        return menuRepository.save()
        }

    fun findAll(): MutableList&amp;lt;Menu&amp;gt; {
        return menuRepository.findAll()
    }
        
        ...
        */

    fun findAllJoinRestaurant(): MutableList&amp;lt;Menu&amp;gt; {
        return menuRepository.findAllJoinRestaurant()
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;이 서비스는 &lt;code class=&quot;language-text&quot;&gt;Menu&lt;/code&gt; 엔티티의 비즈니스로직을 처리하는 &lt;code class=&quot;language-text&quot;&gt;Service&lt;/code&gt;이고, Entity 타입과, Entity의 기본키가 될 자료타입을 제네릭으로 넘겨주고 Entity의 클래스와 DI 받은 EntityManager를 슈퍼클래스 생성자에 인자로 전달해주는 구조입니다.&lt;/p&gt;
&lt;p&gt;위처럼 구조를 갖춘 이유는, 사실 아직 제가 잘 몰라서..ㅋㅋ 도 맞지만&lt;/p&gt;
&lt;p&gt;BaseEntityService에서 받을 제네릭타입의 클래스를 런타임에선 얻을 수 없다는 걸 알았습니다.&lt;/p&gt;
&lt;p&gt;Spring에서 제공하는 어떤 Util이 있다는 자료를 보긴 했지만, 일단은 포기하고 저렇게 인자로 전달해주는 방식을 선택했습니다.&lt;/p&gt;
&lt;p&gt;어쨌든.. 저 형태를 갖추게 되면 MenuService에 직접적인 find, save, delete 등 JpaRepository에 정의되어진 spring data jpa의 기본 메소드들을 사용 할 수 있게 됩니다. 혹시 메소드의 재정의가 필요하다면 override하여 재정의 하면 됩니다.&lt;/p&gt;
&lt;p&gt;그 다음은 controller 차례입니다.&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;Controller 공통 부분 중복 제거&lt;/h2&gt;
&lt;p&gt;먼저 controller에서 항상 공통이되 중복되는 부분이 어떤걸까요?&lt;/p&gt;
&lt;p&gt;주로 &lt;code class=&quot;language-text&quot;&gt;전체조회하기&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;id로 하나 조회하기,&lt;/code&gt; &lt;code class=&quot;language-text&quot;&gt;삭제하기&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;수정하기&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;등록하기&lt;/code&gt; 정도가 될 것 같습니다.&lt;/p&gt;
&lt;p&gt;그래서 이것들을 제거하기 위해 다음과 같은 BaseAPIController를 작성했습니다.&lt;/p&gt;
&lt;p&gt;저는 Restful 한 구조의 엔드포인트를 관리하는 controller를 생성할 것이기 때문에 &lt;code class=&quot;language-text&quot;&gt;@RestController&lt;/code&gt; 전용 슈퍼클래스를 생성 했습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;/**
    * Rest API 공통 컨트롤러
    * Generics description
    * E: Entity, ID: Entity Primary Key (직렬화 할 수 있는 형태의 자료 형태), S: 해당 엔티티의 비즈니스 로직을 처리하기 위한 서비스 클래스 (BaseEntityService를 상속하는 객체 여야 함.)
    */
@RestController
abstract class BaseAPIController&amp;lt;E : Any, ID : Serializable, S : BaseEntityService&amp;lt;E, ID&amp;gt;&amp;gt; {
    @Autowired
    lateinit var service: S

    @GetMapping(&amp;quot;/{id}&amp;quot;)
    fun getOneByID(@PathVariable id: ID): ResponseEntity&amp;lt;E&amp;gt; {
        return ResponseEntity.ok(service.findById(id).orElseThrow { EntityNotFoundException() })
    }

    @GetMapping
    fun get(): ResponseEntity&amp;lt;MutableList&amp;lt;E&amp;gt;?&amp;gt; {
        return ResponseEntity.ok(service.findAll())
    }

    @PostMapping
    fun create(entity: E): ResponseEntity&amp;lt;E&amp;gt; {
        return ResponseEntity.ok(service.save(entity))
    }

    @PutMapping
    fun update(entity: E): ResponseEntity&amp;lt;E&amp;gt; {
        return ResponseEntity.ok(service.save(entity))
    }

    @DeleteMapping(&amp;quot;/{id}&amp;quot;)
    fun deleteById(@PathVariable id: ID) {
        service.deleteById(id)
    }

    @DeleteMapping
    fun delete(entity: E) {
        service.delete(entity)
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;상속받을 슈퍼클래스를 만들었으니 상속만 하면 슈퍼클래스에서 제공하는 엔드포인트는 모두 코드 작성 없이도 얻을 수 있을 것 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@RestController
@RequestMapping(&amp;quot;$API_VERSION_PREFIX/menus&amp;quot;) // ENDPOINT: localhost:8080/v1/menus
class MenuController(
        private val menuService: MenuService
) : BaseAPIController&amp;lt;Menu, Int, MenuService&amp;gt;() {
        // 여긴 분명.. 비어 있는데?
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;다음과 같이 슈퍼클래스에서 제공하는 엔드포인트에 정상적으로 요청하여 응답받아오는 것을 보실 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 926px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6818db4932de6dc846a786978921974e/96b7d/Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.26621160409556%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz5WSSVbDMAyGfQ/qZm4GZ3BGpylNgbYs2HAMdhyMW3CyH8nQvEfZ0MX3LMmypF+JeHh8xG63wzzPOB6POJ/POJ1OOBwOMMYsTNOEcRx/xdgfR4POTAjePnD3/gnxNO/Rdy2GYcDQ9zCU1JsBPdlt26LrOnsaMy6xpmksWmvUNUF2cf+CfP8KMRt6UNdI0/QPeZ6jqqrFz7LMcrFrene5z5IIKg4hsryAUgpxHCNJkgX2uSBPcH13gVVx0e/71CIMyS3LkjpplLqyHdkviuKH0vrXcKGyraEbmvIH3WiI5+MTttstRl7ydiR7sgvn2EQL72uSRPKUyhbJmfUVMkJdIRLeDyXkuiGJFEwThGFoiSI6Ax+u68LzvF/YmOtZ2L4gHMeBXK2gWgNFRVUUYENFfNfBWkqsVhJS/h/x3d1HWmhU/YBNGMClJh7FHWeN9fo2BD8M6es0uwPqgn4Jkhl4LnyCO3KSvKWg75M82ldME0bRBoHL0zl2Sik5Sd404ReeLEf2Bga8xwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled/Untitled%202.png&quot;
        title=&quot;Untitled/Untitled%202.png&quot;
        src=&quot;/static/6818db4932de6dc846a786978921974e/96b7d/Untitled2.png&quot;
        srcset=&quot;/static/6818db4932de6dc846a786978921974e/8890b/Untitled2.png 293w,
/static/6818db4932de6dc846a786978921974e/1f316/Untitled2.png 585w,
/static/6818db4932de6dc846a786978921974e/96b7d/Untitled2.png 926w&quot;
        sizes=&quot;(max-width: 926px) 100vw, 926px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;음.. 이걸론 뭔가 부족한 것 같아서 덧붙여 AOP로 request 정보를 logging하는 것도 추가해보겠습니다.&lt;/p&gt;
&lt;h2&gt;AOP request logger 추가&lt;/h2&gt;
&lt;p&gt;먼저 저는 Kotlin에서 사용하는 KotlinLogging을 통해 logging을 할거라서 의존성을 하나 추가해주었습니다. java나 기존 slf4j를 사용하실거라면 이 의존성은 필요 없습니다.&lt;/p&gt;
&lt;p&gt;그러나 org.springframework.boot:spring-boot-starter-web 에서 제공하는 Aspect를 이용할 것이기 때문에 해당 의존성은 필수입니다. 아마 스프링부트 프로젝트라면 따로 추가하실 필요는 없습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;//logging
implementation(&amp;quot;io.github.microutils:kotlin-logging:1.7.6&amp;quot;)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;다음과 같이 Aspect logger를 작성해주고 pointcut과 around전략을 세웠습니다.&lt;/p&gt;
&lt;p&gt;보시다시피 그냥 request를 받는 controller 메소드들에 한해서 request 정보를 로깅하는 용도입니다.&lt;/p&gt;
&lt;p&gt;추후 APM(애플리케이션 성능 관리 툴)같은 것을 활용해서 로깅 추적 같은 것을 할 때 도움이 될 것 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Component
@Aspect
class RequestLoggerAspect {

    private val logger = KotlinLogging.logger{}

    // 해당 패키지 하위에 있는 컨트롤러의 모든 메소드에 적용
    @Pointcut(&amp;quot;execution(* com.example.demo..controller.*.*(..))&amp;quot;)
    fun requestPointCut() {}

    @Around(&amp;quot;requestPointCut()&amp;quot;)
    @Throws(Throwable::class)
    fun requestLogger(joinPoint: ProceedingJoinPoint): Any {
        val result = joinPoint.proceed()
        val request = (RequestContextHolder.currentRequestAttributes() as ServletRequestAttributes).request

        // TODO mapper를 빈으로 등록 해버리고 싱글톤 형태로 관리할까?
        val mapper = ObjectMapper()

        val logMap: MutableMap&amp;lt;String, Any&amp;gt; = HashMap()
        logMap[&amp;quot;sessionID&amp;quot;] = request.requestedSessionId?: &amp;quot;&amp;quot;
        logMap[&amp;quot;requestURI&amp;quot;] = request.requestURI
        logMap[&amp;quot;requestMethod&amp;quot;] = request.method
        logMap[&amp;quot;sourceMethod&amp;quot;] = joinPoint.signature.declaringType.simpleName + &amp;quot;.&amp;quot; + joinPoint.signature.name
        logMap[&amp;quot;params&amp;quot;] = request.parameterMap

        logger.info(mapper.writerWithDefaultPrettyPrinter().writeValueAsString(logMap))

        return joinPoint.proceed()
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;자, 이제 AOP 적용 후 요청을 해보면?&lt;/p&gt;
&lt;p&gt;다음과 같이 로깅됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 731px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/eeed86cb0f82fee8b5d989908965342b/9f2f1/Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.795221843003414%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqUlEQVQY03WO2xKCIBRF/ZkCIw0BQVMB05rpMtP/f80OSB9q6mHNGc5h1t6Z8zdM5yfceIe1Vxg7g6sBhnsUvINpZyjtIaQDqyxKPSWKhbKZwYQF3WmwokUma59kx+6CQ9XDNBOEckFqEW9Kj9jtG2yIBKEKNK8T2/SWy1QgYRfJdBD40yM0sOBiSJKS9+8PITXOmL5CFugfUsMqyGKLlZx9itb0790v4Qus/n8Y8tZBiQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Untitled/Untitled%203.png&quot;
        title=&quot;Untitled/Untitled%203.png&quot;
        src=&quot;/static/eeed86cb0f82fee8b5d989908965342b/9f2f1/Untitled3.png&quot;
        srcset=&quot;/static/eeed86cb0f82fee8b5d989908965342b/8890b/Untitled3.png 293w,
/static/eeed86cb0f82fee8b5d989908965342b/1f316/Untitled3.png 585w,
/static/eeed86cb0f82fee8b5d989908965342b/9f2f1/Untitled3.png 731w&quot;
        sizes=&quot;(max-width: 731px) 100vw, 731px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;Repository 공통 부분 중복 제거&lt;/h2&gt;
&lt;p&gt;예를 들어 createdAt 컬럼에 인덱스가 있고 범위 조회를 해야 하는 조건과 같은 것이 될 수도 있겠습니다. (&lt;code class=&quot;language-text&quot;&gt;SELECT * FROM entity WHERE createdAt BETWEEN &amp;#39;YYYY-MM-DD&amp;#39; AND &amp;#39;YYYY-MM-DD&amp;#39;&lt;/code&gt;) 혹은 2차캐시를 적용하거나 locking이 필요한 경우에도 공통되는 부분들을 이 &lt;code class=&quot;language-text&quot;&gt;BaseEntityRepository&lt;/code&gt;에 정의 후 각각의 엔티티 &lt;code class=&quot;language-text&quot;&gt;Repository&lt;/code&gt;에서 상속받게 하면 중복되는 부분들이 제거 되고 한결 깔끔해진 코드를 볼 수 있을 것 같습니다.&lt;/p&gt;
&lt;p&gt;아 이 공통 repository는 상속용 interface이므로 스프링부트 애플리케이션이
처음 로드 되면서 컴포넌트 클래스(Controller, Repository, Component)들을 빈에 등록 할 때 이 인터페이스도 포함하면 안되므로 반드시 &lt;code class=&quot;language-text&quot;&gt;@NoRepositoryBean&lt;/code&gt; 어노테이션을 달아주어야 합니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@NoRepositoryBean
interface BaseEntityRepository&amp;lt;T, ID : Serializable?&amp;gt;: JpaRepository&amp;lt;T, ID&amp;gt; {
    fun findByCreatedAtBetween(start: LocalDateTime, end: LocalDateTime): MutableList&amp;lt;T&amp;gt;

    @Query(&amp;quot;SELECT t FROM #{#entityName} t WHERE t.id &amp;gt;= :id&amp;quot;) // 이런식으로 T로 받은 제네릭을 JPQL에서도 활용 가능합니다.
    fun findByBiggerId(id: ID): MutableList&amp;lt;T&amp;gt;

    @Query(&amp;quot;SELECT t FROM #{#entityName} t WHERE t.id = :id&amp;quot;)
    @Lock(LockModeType.PESSIMISTIC_WRITE)
    fun findByIdWithExclusiveLock(id: ID): T

    @Query(&amp;quot;SELECT t FROM #{#entityName} t WHERE t.id = :id&amp;quot;)
    @Lock(LockModeType.PESSIMISTIC_READ)
    fun findByIdWithSharedLock(id: ID): T
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;글이 너무 길어져 쓰고보니 많이 장황하네요, 어쨌든 앞으로 이런 중복되는 코드를 제거해가며 확장성 있는 구조가 될 수 있게 하는 연구를 많이 해 봐야겠습니다!&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
코드링크 -&gt; &lt;a href=&quot;https://github.com/thxwelchs/springboot-starter-with-kotlin&quot;&gt;https://github.com/thxwelchs/springboot-starter-with-kotlin&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JPA N+1현상 삽질]]></title><description><![CDATA[JPA N+1현상 querydsl fetchJoin 삽질한 경험 공유 Kotlin SpringBoot(2.2.4) querydsl(4.2.1) 문제 JPA로 쿼리를 하다보면, N +…]]></description><link>https://thxwelchs.github.io/JPA-N+1/</link><guid isPermaLink="false">https://thxwelchs.github.io/JPA-N+1/</guid><pubDate>Mon, 24 Feb 2020 02:08:55 GMT</pubDate><content:encoded>&lt;h1&gt;JPA N+1현상 querydsl fetchJoin 삽질한 경험 공유&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Kotlin&lt;/li&gt;
&lt;li&gt;SpringBoot(2.2.4)&lt;/li&gt;
&lt;li&gt;querydsl(4.2.1)&lt;/li&gt;
&lt;/ul&gt;
&lt;br/&gt;
&lt;h1&gt;문제&lt;/h1&gt;
&lt;p&gt;JPA로 쿼리를 하다보면, N + 1 문제를 마주하게 될 수도 있는데요.&lt;/p&gt;
&lt;p&gt;사실 저의 문제는 정확하게 말하면 N+1 문제는 아닙니다. N+1이란
@OneToMany의 관계에서 One에 해당하는 엔티티를 조회하면 Many의 해당하는 엔티티가 지연로딩 되어 그 갯수만큼 더 조회한다고 하여 One+N(Many) N+1현상이라고 하는데 저의 경우엔 @ManyToOne의 조회인데도 One에 해당하는
엔티티가 영속성 컨텍스트에 존재하지 않으면 쿼리하게 되는 현상입니다.&lt;/p&gt;
&lt;p&gt;저는 보통  &lt;code class=&quot;language-text&quot;&gt;@Query&lt;/code&gt; 어노테이션에 JPQL 쿼리를 작성해서 해결하곤 했었습니다.&lt;/p&gt;
&lt;p&gt;근데 querydsl에도 fetchJoin이 있다는걸 최근(?)에서야 알고 사용해보려고 하는데 문제가 해결이 되지 않았습니다. 그 이유는.. 참 어처구니가 없었는데요 혹시나 이런 경우를 겪고 있는 분이 계실까 해서 공유차 포스팅합니다.&lt;/p&gt;
&lt;p&gt;이유는 저처럼 join 함수를 잘못 이해하고 사용하면 매개변수 타입에 따라 fetchJoin 함수를 호출하여도 N + 1 문제가 해결이 안될수도 있다는 것인데요 ㅋㅋ&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 241px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4aaedf67b06c9852ae700e6f222a2bbf/e27e9/Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 86.72199170124482%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAETklEQVQ4yyWUaVNTZxiGz/9qZ/o32g/tOJ3aaREHaQUaRAraalEU2StrxIQAScjKFiALSwIEshGWAGHNBgQQQVw7Vx+PH85kcuY993tvz6Pkz3Js762yFJ1leTXIXnqNYGgG/7yXmYCXkYlhxr0umtuaeNZcx8iYk0GrEfuQFa2+m+4XbawkQrgm7aysL6FEYktEYgtsJCPEVhbwz3lJbMXR971kyGVnMTbHlAC/6NXiHLPi83sw2YxM+MYZdJjlv1t9QvEAsbUgSigSJH24SSjqZ2snzmLEj3fWjW3Ypn4UjAYEdJ4BSz/umQn8i7MYrQM4Rx2Mu12sbEbIne6ROdnhIL+Dcn5xwsn5PkenuxyebpM62mI+NIuuXyc3e1WG8USUDm0Hja31XwAtA5gsRl7qe1hPRskJ2J6QSp3toXz4dMXR2S5ZeZnJb5O/SDE64aDf2IvLMyZSFrA5LXQKYE3dP9iGLDiG7XRpO5kVe/Kv9sWiKAfZLdYEXHn7/kIFzOSTQn2XnWyC3r4eLDYTg+KVa3KEltZG2jr/5UHt39Q1POF5ewuVVRUCbOHsIi0BTpLcXcXtHUX5+N87Xl1lOX2T5ujVAclUQuT0Y+jX0zdg4PHTGjQVZdx/WM2T+sc0tTZQdb+SgsJf6NF1ElsVBQ6j+DnEYtiPks7usyCeWZ1GAovTZIVleHkBXW8PHd0d6Ad0kq4Di9OMwWRQk/XPzzDhHuOFrovl9aBY5JRqjbIh9VNW15flwJTcXC8SrKxsxOgz6TGa++RmqyTuodeok6oMMDw+xPTclNpBg1zUK+d20gnO3x1jthsxi0XK8UmOiDBy+1wcn6YJRgI0ND8TOd1MeseISVk7etrpMWhZ346znAgLSxOOUTuTU+Nkj7dZ2wgzt+Bjdz+BcpjPsr4ZJSppZo6lS4dJ+kVac0sjswEfW/vrIivGUmwRX8Aj0k14ZtxSdh9j7hEJc0f8G2HU5eAgs4HyiQ+cv8mqSZ9eZtQOPmuso6GpXoLRsbwWFtYLdPZ00CC2aPVa9EY9k1J6rwDvS10OT/ZI5b78Ku8+XpF/nSKd3+Ly/bFUxUBhcSGPnj5SuxiQAJZkmmrqarhTVU71g3vq1JhlntvaW5kLenl9lZNyJ9WWKG8/F1u6lJIpyb8+ICzzXHqnhNLyEnUJTM948ExPqgzNdpMajFuY9Uoofz2oloUQZvtglZPLtAxFGuVKGGbPUxycbKuT4pWP6yWUkrLfeFInLM0GrI5Bhl1OdUkEQ/OMuIZobKmnQhi3dT3nRtGvPKy9Tzguy+G9FDt/mSMjc3j+NifyAvxRXkpR8U0qKjWU/6mh5XkT2pddKkuL3Uyt2FFYdIOfC36iuKRIzpfw9TdfyYprlpRPc2xKIeMS/ednxGWjsvou5RUaqu7dpUTzO9eu/8CNWwWUlN+muOwWmrtl3C4tRnOnlJtFBdTV1/Lj9Wt8+/13/A/eaTr2CfhIZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled.png&quot;
        title=&quot;JPA%20N%201/Untitled.png&quot;
        src=&quot;/static/4aaedf67b06c9852ae700e6f222a2bbf/e27e9/Untitled.png&quot;
        srcset=&quot;/static/4aaedf67b06c9852ae700e6f222a2bbf/e27e9/Untitled.png 241w&quot;
        sizes=&quot;(max-width: 241px) 100vw, 241px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h1&gt;예제 구성&lt;/h1&gt;
&lt;p&gt;먼저 상황을 설명하기 위해 &lt;/p&gt;
&lt;p&gt;제가 구성한 예제 구성은 다음과 같습니다. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Restaurant(식당)&lt;/code&gt;과 &lt;code class=&quot;language-text&quot;&gt;Menu(식당의 메뉴)&lt;/code&gt;를 표현하는 다음과 같은 ERD와 엔티티가 있습니다.&lt;/p&gt;
&lt;h2&gt;데이터베이스 ERD&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 280px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.92857142857143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz32SaW/TQBCG/f9/C4iPiKqtBBTRhtKQ017HR3wkTnwkdXwkjpM8rN1CW1ox0sjj1ew7z+yMoq0iboKIr37IRMZaEmGsY/pRQrE/0NjpdJLeRjy3l38PBwong5vY4Z1QUQcf6Q4vKEsVM7WJy/0zwYfr5nrDe8PjzJxyZ4/p2ILuVOPKnjDLtyi9MEFzbRbriLQqSYqMvCpQk5TVtn4laKxXXM5sOr7ORL+kN7hAiM8MnFu8vEBRFzG9sUq82bYt7B/pzbQmKZ8Ej4+C3bDkV5Aw1IaEWclOnjVZXl7hpDuUzizFmIeoloM+9RiZLqaMf3oJ2YFXNkgqdAmhWxarYk9enyirgxSTgpsK5bsdoRsWEyHwXZdFsCANF/T9mCvhtdTNcLb1kY28+Gmacu7l2BKiN1Txo1Wb4+f7VlT5EpT4iwhT6ETJ6i9JU81b521cH0+tN3a3LLgOCpZhhO84zOZzdnlGcF/IodQo4r7CcmZYhkFVP/XoSsG0Oj5txJ83lILnbsZsscSaCISu49kWbnTPvDigfJPVnFmAoU+YBwGhrHyodrIFOZTt66Fcz3M+mClj0+G2N6TT7TFWNX7oLk4mCS+9DD+MEarcQ+m6blDKFhr8t9bGk+T9qESLMtRwg4hzhIz7YU4s85UziS9sn/FoyJ2sNjFNlpLU2exfrM3z7/9MuZVvosVl6/p6x2gpC6y2jJJtO9l/CY+P7b/lTc5vjTuKy4ma6AgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled1.png&quot;
        title=&quot;JPA%20N%201/Untitled1.png&quot;
        src=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled1.png&quot;
        srcset=&quot;/static/0458039850fbca4e9e1332d4825576ee/f1fc5/Untitled1.png 280w&quot;
        sizes=&quot;(max-width: 280px) 100vw, 280px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;엔티티 ERD&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 251px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b427b48566fd34333afd6904d51cd61d/fe9a0/Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 203.58565737051794%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAApCAYAAAA1bQl+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFsElEQVRIx41X2VbbSBDNf8yeBIIXbONd1i4v8iZZtlkNXlgTIBCSeZkzmTMfMD9953bLIsY4OA91utSmq6u7b91bvNqKF7Fo72IFxJMlJFMKrYzkdmlhLMkxsR2O22mFVpFrovWvlgNuvMuhULJwdj5Fr+djMBjA9zzs7e0i6PcxHA5xsDfELr97vgddt7G5tSZgtmDjfByg166iP9zF7rCP/qCPoBegz6D9nge/10MQ9GAYNjZeCri5lcdOTsPxwOKiLupuC6WKhopuQqVVNAO65cCgmU6V8866DBkwr+NuWsPV+wvsH464yIJqWCgpGoPU4ba68Hp9tLseN1kTMHwUPkJa5eWX5cVvJYrouj3cnn7ARiyH9I4qHyOVqcjHW/koYjL6Qfo8uvyOFfHbmwyaTheXBzP8/jo9v5qCtMVgwn8VOYvjNxMBuUj8xseKb2SkL+ajBBbtWYbRo0RBHh+K3wkeO8ur2IyFc7FE6Yk9yTBaJADc6vTgVF04Tg2WVYVt1+jXUas1pIk58ZvK11bV0DS+fr6gyyt4kmF8W8H1+ymOhy4msxlurq8wGZ9gOhnjdDbGdDbF4f6e9NutJhRFgaZpMHQNheJSQHHUJF+u5Tpo1Awo3Lmi6jITzRAYZDaaLnEo8GhYNnTTgmHaMOkXSsZyhnnEUyoeJhY+nbUwu7rB/edP+Hh3h7//+YpdZqYRzF1WSMcPrd310fZ8XlMXhbK56shlVCqsBlVURI0ZNJhdHYpWRdV2EXT6yPFo5YpNkFvSigwkRoHNlbB5y0qRtpnD242srJyffk1i0N7F19s/6Sfk34n5RYuq5RlsYonnJuZTpLQcTyDgFFuqrheBLdhGVsEcrMIXbBKnnxG1Pq+QVfYswxTrVuHd5YsGcvkKsrR8UaOvolBQUaYv5ool/dEKtFLZ4Lz2HDbZgoW721OM9ro4mc4wORnh4myKCXF4dLiP8XiE0egIlkkKI/YiM00dSsV4HjCT09HzXDSqBky7ysqo0eqwHYdWhdtsotlsMYioDp1mSDMM4rayDBt+pHZ03J9oGB92MT69wPnlBSanZ7i6ucXoeERitWHXG2i0OmgSe267gzo3cFttwsyWSS0F1HDgmwj8No5OTkn9+5SAA+wdHBO8PnFZhcU6t6qsabvOmm7A4GjXXInFpwEjtokpeLOZRzpVwX9//Stp6w3xKH4XrCLI9+c/Uvhy+RFnhzP8Ql/Mid++w4chXJLEXL/uI8vxEWsRX3KTttmEVnK4ee5JQgsZhgtCsgwZ+TWZOkdgx+f0JnHK+bzYZDPLisqtBvbiDlLQt4uSGxO0LC0t/LngCx3JJktYXrdSpETtNjsBBvuH8HxfCvlgEKBLoffn3zrVT2QYW2L1lQE3eIxak3QU7MkAntdlhzCU3UMQBPzuMKAZHnl9QDLNVhF1x8Ao0OA0mpLnHNK+JFTbkaRqUBJ+KKBgkNebBQRtB19mNqYXH/Dw5TOOT45hV2u8Ck+SqsBcjncYi//AkSVcKAPJtBY+CjPZ0QcsSVMShyDRVEaVjxJbKbvFbzj8JqMFifhI7OO5Bt4lFDkXUll+nmHxMcPvtnPPd+TClP4IeGECj2liM5UIsbm11CSs7G1kphK0DJg25aJI0N9xLsVS20mWpf9ihtGRxX25bZ+UVScJUKxE9yVlNTRtbkJipR6vC5jOKDiaXaBL7AmRn1HYLUN0CSp0CrumqdKEwJfK+svtnLh88Zpug1RlmRT8kEgjUTcex1DgS4q5pj8UHURGw8PYwPW0jfPre9zdf0SHgl4WXQNLrypB76FJgl0bUGS4TawNPBvtpo2WF8hO1WSDpDGYJrKjPAizKQ8/FpBS8DAx8OlygJv7B1x9eI9aw0XXZz2zcRfth5CAFjdSVHt9SywqJF8UEmnKfzGErGbZruUKlFchsdLX5byonEXY/A+ERUtEixPhaQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled2.png&quot;
        title=&quot;JPA%20N%201/Untitled2.png&quot;
        src=&quot;/static/b427b48566fd34333afd6904d51cd61d/fe9a0/Untitled2.png&quot;
        srcset=&quot;/static/b427b48566fd34333afd6904d51cd61d/fe9a0/Untitled2.png 251w&quot;
        sizes=&quot;(max-width: 251px) 100vw, 251px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Restaurant 엔티티 코드&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
data class Restaurant(
        var name: String = &amp;quot;&amp;quot;
): MutableEntity()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;Menu 엔티티 코드&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Entity
data class Menu(
        @ManyToOne
        var restaurant: Restaurant,
        var price: BigDecimal = BigDecimal.ZERO,
        var name: String = &amp;quot;&amp;quot;
): MutableEntity()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;데이터&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 323px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/85c053342824f6bf2604fdfa924dd1af/bfd06/Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.621160409556317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVQY033Me2uCUByHcd//O2qwW6spaFNz07xO8xpUnrlkLIsnjQ02aPvjw3Pg9+VIXrXBdBxekxQlWPUKtLhiYVnEccKubanrGiEG4qLmTVCta67tEsmOcizHx40ydC9FNhweNIuJrKJoJnMnIFxWhElJ8A8/LnnyMqRi01JuPxiargS2nzCWZ4xuH5n2H99MVGbPIfm6/bL78f6t2rZI++7Ivjv0OkTzTpblTBUF3ZzjLFxczyeKl3zuO7rDsD2ee8lwk6JCEPaGvkQVhh0yGqvcyTpXfe8VE8VwicrmvPve/uUE9LNuaYri7EAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled3.png&quot;
        title=&quot;JPA%20N%201/Untitled3.png&quot;
        src=&quot;/static/85c053342824f6bf2604fdfa924dd1af/bfd06/Untitled3.png&quot;
        srcset=&quot;/static/85c053342824f6bf2604fdfa924dd1af/8890b/Untitled3.png 293w,
/static/85c053342824f6bf2604fdfa924dd1af/bfd06/Untitled3.png 323w&quot;
        sizes=&quot;(max-width: 323px) 100vw, 323px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 358px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10da870a8839e8ed23d6f9a223d2c6fc/46af1/Untitled4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.170648464163826%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFElEQVQozz2S7XKiQBBFff8X2n+bTVlJ1I0gH6KiiCIoiIAIqCHGsw2WO1VT1XXm9p2Z7u6Y3o7Z1GLi7VGcLb2pi2EY6JqGNhrhzG2MlZwtfAbrCFM3WDoOw6XEqwDV2WDpGstdwh91RsdyAiwRG/aGobVCsVz6qsV4EWDON5i2x5vl8TlZ0xsa/O4O+KvNMJchpmgmyx2jicvrh8LrQKdTnGvK6400r4jTE0X1RbhPWlZcbpzKK3ZUEBxOqNoYZWSy2oRUzbloG10iubph4awDOvHxzCG/sJMET559OF3b3fD4eJFLSnQ/wwmPDD5H9Ic6c/lqLDlxVrXabZwzUHQmi/XT8MpO4CZMSf6bPS7apwVjMXSjh2G3N2TmBmRl3Ro2+iZP0S2mUs9OVlzJq5ooyQmitI0b9uQHKYO2jvGTAlU3eRPDgaKJWcmxbDRfbPcpo8aweeEuqQizs3w3ZenHRBI37Mn9MKO/iLC3RxRjJo0x6fZV3G3SasP03MYDdYwuE9IpL7UU+FuKfyY9lm3csCfPTxW2mIZZwXRmy7dVKb7P7Y405cpZNIcsZzK1WXrSlLV0cBOXzL24HQE/rlhHJxruCXeDhHdbRkRm8aXb49fLBx/qFMuNRJO3uU6Q8vquoIwdOiBXyarrL6qq4rHuPPntu2YrLz+dLwSBj7OwsedzNkHA/efnob7/sNsGRPs9/wDaF+D/CSWjdQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled4.png&quot;
        title=&quot;JPA%20N%201/Untitled4.png&quot;
        src=&quot;/static/10da870a8839e8ed23d6f9a223d2c6fc/46af1/Untitled4.png&quot;
        srcset=&quot;/static/10da870a8839e8ed23d6f9a223d2c6fc/8890b/Untitled4.png 293w,
/static/10da870a8839e8ed23d6f9a223d2c6fc/46af1/Untitled4.png 358w&quot;
        sizes=&quot;(max-width: 358px) 100vw, 358px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;문제의 코드&lt;/h2&gt;
&lt;p&gt;문제의 코드 입니다. (어떤게 문제인지 바로 아시겠나요?)&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class MenuRepositoryCustomImpl: MenuRepositoryCustom, QuerydslRepositorySupport(Menu::class.java) {
    override fun findAllJoinRestaurant(): MutableList&amp;lt;Menu&amp;gt; {
        val m = QMenu.menu
        val r = QRestaurant.restaurant
        return from(m)
                .leftJoin(r)
                .on(r.id.eq(m.restaurant.id))
                .fetchJoin()
                .fetch()
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;함수 호출을 위해 테스트코드를 작성하고 실행했습니다.
( 테스트의 결과값 보다는 N+1 쿼리가 수행되는 것을 보기 위함이므로 일단 테스트는 통과하게끔 했습니다. )&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;@Test
fun `Menu 만 조회했는데, Restaurant 가 조회되는 N+1 현상 테스트` () {
    val menus = menuRepository.findAllJoinRestaurant()

    assertTrue(true)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 681px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ca29f3317ce1b991208902715823f9f7/ad007/idea64_xOWUXfJUQM.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 96.24573378839591%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC9klEQVQ4y62UW3PaSBCF9V8SjC4Ig3VBVyQkhLiDJITtOLGTvDn5/88nZ0Z4zSa7D1u1D191q3t01GeaQolnR5hZAiOOMJiGGDkRRncpLHcGY+xDnwTEh2GHuHVzDCdzjOwMhjHBjWajrzlQdVfGvuZCibMjBmUCfUbBLIbp+7iNQlheCNMMoZoedMeH5vpQHQ+aF8Bw2XMzjCxyG1PIlqKq7kBJ1xWsOCMpbC+FPo4xcFNON5XobgCNgsNxiPFthOGIwqYLzeT0A36Ik75NKQVnqxqWGcEexIhGOTynQDKdY5bmCMME42mO8WwFOyhhjRKYhgdV2nvnb5aj+AB9OEHPdPBRtfHxxsKHnoVeX2Cjd0P6Dj4wl33SUx3eXydwLSZyJStqGEPa8WLcjT1M/QjrWcJJA4xHHms+AtqeRzFcy8eUd5sGEVyb1g33YvUdJc0raEzGhg/f4kErwHIaoYxDZEEAlwu64/Y9Ls1ibRL6UnjEjxkD3qUQldvuUMr9F+jFK/TND+iHVwx2r7DKn9AWP6EWF5j3ix/vz0XX18s/UZKswYC/O3UYQ7tCvYrqb7Xr+u8oaXbCPHvAIn9CkX9CktTIZ/esPcqaiAXJZmf2n5ClLXKeL/JHxNMDgmiL8AoKNsiK8/+GslidkOR7JNmfpPl/R6mrJ2zKGnNSLJsO5vmi+seP/DsHCh645WWNetNitW6xZCzXJ6y299jueYecvli+0bDXytq8bC498XHWV7zXRX0R5KH9loLbM9Zkyeem/Yr24TtO5684M7b331GfXmStffiGqnmWedV8Qd2+yDPLzVlOqgiB/aabbsWiaBx5sDo9y1gzCgHxshATz7vDJ/aecag/Y199loL741M3oRh5s6IF2ippY0EbG9rd8iURxctbyaOc5kCBNa9kvXuQfZHvKLZ7ExQiR1peXyyLKYW90/03KSBiQ+ud5S6vpIMX6UIgzzKKe+SfQ4U5yQWLjm7bp6vY5X8tqWzefxGXM2IXQvAX1omhAyscfFUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled5.png&quot;
        title=&quot;JPA%20N%201/Untitled5.png&quot;
        src=&quot;/static/ca29f3317ce1b991208902715823f9f7/ad007/idea64_xOWUXfJUQM.png&quot;
        srcset=&quot;/static/ca29f3317ce1b991208902715823f9f7/8890b/idea64_xOWUXfJUQM.png 293w,
/static/ca29f3317ce1b991208902715823f9f7/1f316/idea64_xOWUXfJUQM.png 585w,
/static/ca29f3317ce1b991208902715823f9f7/ad007/idea64_xOWUXfJUQM.png 681w&quot;
        sizes=&quot;(max-width: 681px) 100vw, 681px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/529686da0e8c95478ee8f7bb8c2acff1/d33d3/Untitled6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 4.778156996587031%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOklEQVQI12OwsnH/b2Pn8d/S2vW/tS2EbQ0Us7Jx+29r7wnGMD5IDqQerM7WA0yDxHX1rf7r6FmBaQBpSSJeAjFzHAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled6.png&quot;
        title=&quot;JPA%20N%201/Untitled6.png&quot;
        src=&quot;/static/529686da0e8c95478ee8f7bb8c2acff1/463a7/Untitled6.png&quot;
        srcset=&quot;/static/529686da0e8c95478ee8f7bb8c2acff1/8890b/Untitled6.png 293w,
/static/529686da0e8c95478ee8f7bb8c2acff1/1f316/Untitled6.png 585w,
/static/529686da0e8c95478ee8f7bb8c2acff1/463a7/Untitled6.png 1170w,
/static/529686da0e8c95478ee8f7bb8c2acff1/e1fbe/Untitled6.png 1755w,
/static/529686da0e8c95478ee8f7bb8c2acff1/d33d3/Untitled6.png 1783w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
해당 함수를 호출해서 query하면!? N + 1현상이 발생합니다.&lt;/p&gt;
&lt;p&gt;첫번째 쿼리인 menu left outer join restaurant 를 했는데도 불구하고, 밑에 세개의 추가 쿼리가 실행되었습니다.&lt;/p&gt;
&lt;p&gt;왜 이럴까? 하고 querydsl의 &lt;code class=&quot;language-text&quot;&gt;leftJoin&lt;/code&gt; 함수가 정의된 &lt;code class=&quot;language-text&quot;&gt;JPQLQuery&lt;/code&gt; 인터페이스를 추적 해보았습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 460px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7cd075e617306d11657e6ed3c7d8ad5a/b3f9e/Untitled7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 42.32081911262799%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYUlEQVQoz4WR63KCMBCFeZh6Qe6EJAZBRBBQlNZLO/by/q9xukRrdaYz/fHNybJZcnbXYGKFkFfwWAnHz+BHK312g1yrFy7h96q/LRCKNSxnhpEZYTwRmpHJbximHSOgS5HaEVuI+BlMrqmwAVcdoulWI2Z70hac8jzuEPD6auBipteJrWD0rzn0U8uawiIdW/L2Wn/WaCfyioBJhT19bFKdRscChuOmeI1P6GQHEVZwnVRf+GlrOGYPLf2H4XkZ3tMzDmoPJVqoKbUpN5DJgWZXwPbmdy7FnVvxJ4ZlJ0j9EqmTwaXzmJxZbkYtJLD9Jc0px2AY4mkQXFQTaB2MetgDRlYekNZvSDYfmDdnZMUeVdFiW3VYr1pklMvWn8i3X1hURyyKI8r6jKo+Yb54gUp2iNNfDMZz2l4FnrSI4oY2XELKJbVeIFYFbb4GU81FBcWC8hRLtQLjBY0lR8CWN74Bfn4FeUGF4c8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled7.png&quot;
        title=&quot;JPA%20N%201/Untitled7.png&quot;
        src=&quot;/static/7cd075e617306d11657e6ed3c7d8ad5a/b3f9e/Untitled7.png&quot;
        srcset=&quot;/static/7cd075e617306d11657e6ed3c7d8ad5a/8890b/Untitled7.png 293w,
/static/7cd075e617306d11657e6ed3c7d8ad5a/b3f9e/Untitled7.png 460w&quot;
        sizes=&quot;(max-width: 460px) 100vw, 460px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;언뜻 보기에 함수의 주석 설명에는&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;주어진 target 매개변수를 기반으로 left join이 생성되어 질 것이고,&lt;/li&gt;
&lt;li&gt;fetchJoin을 사용하기 위해서는 fetchJoin 파라미터를 해당 join 에 추가 (&lt;strong&gt;정확하게는 파라미터로 이해하기보다는, fetch join 할 join 함수 뒤에 fetchJoin 함수를 추가해주면 됩니다.&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;하라고 되어있습니다. 이렇게만 보면 제 코드에서 &lt;code class=&quot;language-text&quot;&gt;leftJoin&lt;/code&gt; 함수에 매개변수로 넘겨준 target이 restaurant이니 맞는 것 같기도 합니다만 현재 문제에서 안되는 이유를 찾기 위해 코드를 추적하다 querydsl fetchJoin은 다음과 같이 동작하여 JPQLQuery를 생성한다는 것을 알게되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 834px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b1ffa0c14526d6534fbf70eab3e727c2/7df40/idea64_G1UvBO54eI.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 69.96587030716725%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB/ElEQVQ4y4WSWXPaQBCE988kIEwibgoMSFrdoPsO4NiObYhdectL/n1nVgTKRQJ5+GpmS7u93bNimp5hMDQgSyN8lscY9kboUW00e2g0ukTvjO5VmO2UmNp3uOHfMAz26BfPmEav9VrSHtDSHut6RKyvwXQjx/jWQ0tW0f6kotVR0JTnkGQFUkf9i6asXIXVkUcm5PYE/ckcM+7CdlIo2gq3MxuzuXNivnBx0x7ROPpoSgM0RT2DBHMMxxY+0MwkaQhVD1BtXhCldzDdDKaTwbBTWG4OzQjRao/xsTlAgwRFPYdxijyZehgpLrpTnZz5tViUfkWYbE8k+T2JZuj0FMjdyzCFp+BGCce9h2lvyGF4EYUHUHkCbhZ05t8wm6KIzQtyJhCHNCM6oVvJQZDTN82rE6h6dPFS5nolwqCih6B5uWk9p/NNQthcbmE4FfXB1RRMIwfF+gkZCXteAcOKalEBN0TMg+t0+wt+9gML1asvEC7fJznCbBLJvjxh45coqXeXGZx36FZMcQPM1SWJrU6OLzrUlyny9TPWfgV/VcAhUYeqS5j0u3AzJgHC/IMRXYVxO0ZWPWDj5eQwR7zKYVohOaMHMcmN7h9i1w/yf5gdPqJ6/Iky3SMnCiLL35AU35GWrwiLN8T5Hn66g5eISlA99l6ywyre1b2ovwGCq/XLCwAGBgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled8.png&quot;
        title=&quot;JPA%20N%201/Untitled8.png&quot;
        src=&quot;/static/b1ffa0c14526d6534fbf70eab3e727c2/7df40/idea64_G1UvBO54eI.png&quot;
        srcset=&quot;/static/b1ffa0c14526d6534fbf70eab3e727c2/8890b/idea64_G1UvBO54eI.png 293w,
/static/b1ffa0c14526d6534fbf70eab3e727c2/1f316/idea64_G1UvBO54eI.png 585w,
/static/b1ffa0c14526d6534fbf70eab3e727c2/7df40/idea64_G1UvBO54eI.png 834w&quot;
        sizes=&quot;(max-width: 834px) 100vw, 834px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;디버그 된 변수를 살펴보시면 &lt;code class=&quot;language-text&quot;&gt;self&lt;/code&gt;에 &lt;code class=&quot;language-text&quot;&gt;JPQLQuery&lt;/code&gt;가 텍스트 로 표현되고 있습니다. &lt;/p&gt;
&lt;p&gt;가만살펴보니 뭔가 이상합니다. 흠 네.. 지금껏 멍청하게 target을 잘못 전달하고 있었던 것이었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 708px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/44460dcff0f905267982c0ab1e966588/6106f/Untitled9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 76.79180887372013%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUUlEQVQ4y22TS0vyURDGz2ds7VLoG7hpE7Ro4UdwEQhRtMlI1NTQIlIRkSxUvEXmpfJ+17ImfvNyfF00MJzzP2fmmXmeM3/z8/Mj1rHv728pFAqyWCzk6+tL1uu1rFYr+fz8lOVyqfvZbCaDwUBjiL+9vZVwOCzxeFyMbJkFbbVammALAMwKKAWIY53P5+rEHx0dKaixQDhJ2Gg00iCCSaQj9gBPJhMpl8tSLBalUqmoY/f393JyciJmm641kt/f36XRaMjZ2Zm4XC5JJpPaYalUkoODA9nd3ZVAICD1el1zkOn8/Pw/ZasNK512Oh3p9XoSiUTE7XarPtlsVu+r1ap4PB7tihgMYLo1luJ0Ot1Qwvv9vozHYz0D5Pn5WRMoRrxlRh731gzJdLb9KFC2HdqXZm+74X44HOors7eAgBsu/jIKoaNN6Ha7EovFJJ1Ob8aGO+IYJ+zj4+MfIOLncjmp1WpKDeGpRpfQs6PCyyI+35wDCLgdoePjYzEkNZtNeXp62ujESjWSENvOGx1zjrfbbb3Hsevra0kkEmJeXl7+pGwTAMHRi/nL5/Pa6fbwMz4+n0+ZmlQqpd2hBQ8AVbri8u3tbTPkvDhacg4rpgC7u7uT/f19PX99fRUTjUa1AnP2+PgoFGClCPShh07Iwn7bQqGQOJ1OZUPXDL65vLyUi4sLBUWDm5sbBc1kMhoEEN0gPMURPhgMyt7enjgcDi0OdWJgZvipvV6v/mJ+v1+1uLq60ur8bg8PD+qAc8ZvuLOzI6enpyoFXVOU7g4PD+UX7sJILZuQWp0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled9.png&quot;
        title=&quot;JPA%20N%201/Untitled9.png&quot;
        src=&quot;/static/44460dcff0f905267982c0ab1e966588/6106f/Untitled9.png&quot;
        srcset=&quot;/static/44460dcff0f905267982c0ab1e966588/8890b/Untitled9.png 293w,
/static/44460dcff0f905267982c0ab1e966588/1f316/Untitled9.png 585w,
/static/44460dcff0f905267982c0ab1e966588/6106f/Untitled9.png 708w&quot;
        sizes=&quot;(max-width: 708px) 100vw, 708px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;fetch Join이 되려면 &lt;/p&gt;
&lt;p&gt;타겟이 restaurant가 아닌 menu의 프로퍼티로 존재하는 menu.restaurant가 되어야 하는것이었습니다.&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
그래서 코드를 다음과 같이 수정하고 해결하였습니다!&lt;/p&gt;
&lt;h2&gt;수정된 코드&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class MenuRepositoryCustomImpl: MenuRepositoryCustom, QuerydslRepositorySupport(Menu::class.java) {
    override fun findAllJoinRestaurant(): MutableList&amp;lt;Menu&amp;gt; {
        val m = QMenu.menu
        val r = QRestaurant.restaurant
        return from(m)
                //.leftJoin(r)
                .leftJoin(m.restaurant)
                //.on(r.id.eq(m.restaurant.id)) entity 연관관계 기반으로 어차피 맵핑되서 join함 on 조건을 주면 fetch 할 때 with 에 property를 에
                .fetchJoin()
                .fetch()
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;수정 후 쿼리&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 583px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/35e216d7838ea09162167e1c3dc717aa/d8a90/Untitled10.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100.6825938566553%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADLklEQVQ4y5WT2XbiRhRF9TO2BgxtBklgQEhoQhODBJKY2oEHOsNKx3aSp3xBHvPFJ7dKYNPuJKvzsFdpKJ17zz0lYWRm6Kg2GmIL3UYfjZaKvqbC1LpofehAvP0A8aZB67ch+EGOnvcRsnlAMzxBy35Ac33CQ/ETBtPPuLOPkK0DlPHxmxD8MMeDu8HtsEBtUKDV30CyckjjFepGAXm4/l8IhplyyzXxHk1ZhSzdo1Nrok2IYh23N9c0Kvv/gWCOM6hdHzWlh07HQtMwodsjjEwXujZBq8XWGLoa4r5pQFJ0SLV/QKngghoJ3sht1Bs96G0TynCI+miI5v0DZLkLhYoptR5kRcOt1HlHm68SvWMIIyuFqvsQayqkOw2iolJabcgkoPZ9DIwJegOP9ozJiU3FLzj8vtv3+CrKdCJoZILj5tBIUGrpqA8HuNP7JKah3jLgxRtE0xITCs60Z7Cc+VfYXgbDSiDf6fQdWbbdAiYlGriPmHpH+OM1HErd9TaYpzss8wOWxQFhXHCBsctYcFgRhmHFGI7oepzSDO0VvSzg+luO7ZEgYdlL+OEKs3RP7DBb7JDMWMdrJPMtpnO2N4VJRUbjKQkvuY7AHo6oCnt4DataXb+9u3Rknvezbx0/43sZ7LkwX1Ale1rZuZqNaU//dW7vYTN8FQyiFZZkKQzIIl1PiCDKyf6Cd8E/+kr4+p72kSCD3QsuzWR9+BFlWAnFSUEBkOAkfRP8QmB2dkC22Vi43Yj2ngVD6i7fn1CQYEFJpiTKwrgIXs/tFV5oAT9+hJ8cYLnVHLlgnH1E8fg973CblChJNCJRhyybr4LvhKkb2y+wPf2J489/kegRhhnyIkKU7ZE/fsKehHKyG5AwszyJaKbUpRewJOdVkmb8mqhhRvwvGhg+hiR2CVDw6WytyPKausqpwxmtAa3OJKMuMn4sHD+9Sn/+RSBvVM+EKN2i/O4TdtTRnjrcJzlZL7AIMkyoQ5d3mcEnHK8KxXQugSTnUOLzuU3oHO5+x+b0B8rVE7LiCStG/gvK8gX55jekmxcU22daf+Wsti9Yrp8wK54xJ2ZnFuUzouwz/galys6f0lJ8kQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled10.png&quot;
        title=&quot;JPA%20N%201/Untitled10.png&quot;
        src=&quot;/static/35e216d7838ea09162167e1c3dc717aa/d8a90/Untitled10.png&quot;
        srcset=&quot;/static/35e216d7838ea09162167e1c3dc717aa/8890b/Untitled10.png 293w,
/static/35e216d7838ea09162167e1c3dc717aa/d8a90/Untitled10.png 583w&quot;
        sizes=&quot;(max-width: 583px) 100vw, 583px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;N + 1이 해결 되고 join 쿼리 한번만 수행 되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bb9c707870a618152342643277064f0c/05775/Untitled11.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 2.3890784982935154%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAMElEQVQI12MwNLb7b2Ri/9/E1OG/gRGUbeYIZ5sC2SAazDaHsEF6jIHqQTRIDJkPABrAIN/Y5pM/AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;JPA%20N%201/Untitled11.png&quot;
        title=&quot;JPA%20N%201/Untitled11.png&quot;
        src=&quot;/static/bb9c707870a618152342643277064f0c/463a7/Untitled11.png&quot;
        srcset=&quot;/static/bb9c707870a618152342643277064f0c/8890b/Untitled11.png 293w,
/static/bb9c707870a618152342643277064f0c/1f316/Untitled11.png 585w,
/static/bb9c707870a618152342643277064f0c/463a7/Untitled11.png 1170w,
/static/bb9c707870a618152342643277064f0c/e1fbe/Untitled11.png 1755w,
/static/bb9c707870a618152342643277064f0c/05775/Untitled11.png 1768w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React debugging 하기]]></title><description><![CDATA[안녕하세요 이번에는 React로 프론트엔드 개발할 때 Visual Studio Code + Debugger for Chrome…]]></description><link>https://thxwelchs.github.io/react-debug/</link><guid isPermaLink="false">https://thxwelchs.github.io/react-debug/</guid><pubDate>Tue, 11 Feb 2020 23:33:04 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 이번에는 React로 프론트엔드 개발할 때 Visual Studio Code + Debugger for Chrome 를 활용한 디버깅 하는 방법에 대해 알아보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;이미 디버거를 잘 활용하고 계셨던 분이라면 굳이 이 포스팅을 보실 필요는 없으실 것 같습니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;디버깅&lt;/strong&gt;은 코드에 브레이크포인트를 지정하여 프로그램 실행을 정지하고, 콜스택 등의 메모리에 저장된 값을 살펴보며, 실행을 재개하거나, 코드를 단계적으로 실행하는 등의 동작을 할 수 있게 해줍니다.&lt;/p&gt;
&lt;p&gt;저는 백엔드 개발을 할 때에는 주로 java 혹은 kotlin 언어를 다루기 때문에 IntelliJ를 많이 활용해서 debugger 로 디버깅을 했었지만 &lt;/p&gt;
&lt;p&gt;정작 프론트엔드개발을 할 때에는 debugger를 활용한 디버깅은 하지 않았던 것 같습니다…&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 303px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9e2fc23a5f13ad9070b8b03587853aa4/48ccf/react-debugging-Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 158.36177474402731%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAIdElEQVRIxzWVC1SUZRrHPy9tmnlbtzKstja2tctup9ouW9vZct1NMysrM0xd1CiNjBStXMUUZLiIOuPAcBnugoJcZQK5yTAwAwwMDDDcBhAYEARFAbkp2v72neH0nfOcd86Z9/t/z/953+f3SDHqU8RGhhAbpSIzJYHaqnIud7WSqy1HHpNOXnEVBmMt4aczCAxNITL5Alq9kcGrffT2djM+cRP7MzE+zMhQN9KuLz9nz45NBB7YzZkoNSXZWdQUF9Bps2FqaMbabqOzs4NLHXXUmMsw1Zhob29h8FoffX0djI1NC169dpnBwctILz39MOvfXM5xNxdUXh4kyPaTFRnO3bu3+PW5c2eEq9Zsbg8YmRqzMTXUyuiNDqYmerl7Z9Kxp7OribZWC9LKVx/nm3WvoPTYTIjnBs4rfNClZ9JUX01HezOXO63Y2htprS+hq7mc3g4z/TaLY+1tr2NwoIfbk2PCfgc9PZ1Ie11exmvrW/i6rULl+TlnZIfIUgUL6+epqy6nWl+IpbIYS5WO5ho9jVVaWmtKaDPraKstpaWqiIEeK1f6L2O1Z7jx3b8i27EaX/dPCXB3wW/nZwTtcSUnLpT6ynLqqoSIEGiqLqHFXIq1Wkd77bSgfW2pKuRqbxuD1we4cqUHae5jL/P1FheUB75l16Y1bF79In7ffEBpsopmowFzpY4Gk45GIdQiBFprimkXYl2WUvpaKuhuLGN8qO/XaiPdv+xpFjv/jR07d1NwIZvsjBTc1q/mnX+vRh17jtrKImG32BHNtcK2qYiehjIyzkagOHGUyLAg0tMSKSvXU1CQizTvgWXcs/QZZjj/ix+85dQZywny90e690lWuflgqdYK61ohqBW2i7EK0fqyPAL8fAkND0cdFUl0TDRqdTgff7JOZLh4GfctfQpp6Us4vbaR3J+zOXU8iJnzH+WVtV9i0OVSbcjDpM8Vh3OR9gY9cVFKgoODycnOJj8/H73eQFJSErt2uQvBhQ8zb8nvme30F6THV6AMP823O75Cmr2Y+5xXoo4Ix1pfitlYRG1FHrq8VAL8ZSKrGJKTk8nNzSU9PR0fn6OEhYUjzReCC3/7KPOcliM98jpPvb2FN95cwZz5D7Hg2TWowkKoLUnBVFFCTmY8HrvckMuVaDQasrKyyMnJITw8gri4GFLTUpEkaQ4zZi1g5pwlSIv+gPS7F8RX/og0az73L19JfLiCpJP/JfrYYdRKGV4HPflqx3a+2+3hsJ2SkoJfQBAZyZEUFOYjrVr9Hmve+4j3P/iUtR+7sGHrLtz3eePm/iPvbvoOPz8/jgcE4LLJDW9ZIKHRcRRczCcmNhJfX2+CRL1lfoGEBJ+grq4OSaFQcuqU0uE/JCRM1CWVOnOtgICF6JRcguMzCUvUoBaRllNC/LkczOZ62tvaKCszOOoYFRVFbGwcRqMRaeTmTewxOjrKTfvvkZsMj4wwOTHO1O1JJsR6a3KSu1O3+d/d2wIGt8V/E9P7xT77O/YYGx1jfHwCKe/Cz+TnZlMk/Ou0F6ksN3CptRmT2YLWYKKpVaCrqwtDpQltuYnSSjMt1lauDfQ5Wq23t4f+foGyK90OnEkqpT+hIYFEhMlJOZuAUafF1txAdmEpxyPPkfZzEToB1JC4FORRySgEdAtLDCKrQQdUJ8ZHmRLZDw1f5fp1AditG9fg8Z91hHntIUkdSn5CNOXZGcLuBFN3bnFj6AYjw9e40l3LUH8jQ4M2blxtZ3x0QJRjkKlbE44u7u+3iQzbkV5c/iBbVjzHKUFt1Q/bOOu/H018DMPDg/xyd0ps/YXxsUF6LBqGuwyMDrYwLuJ6fxPjN2zcmZoGrM3WQselRqSPVvyJ3RteI+ib9QTvXk+mwpeS1FTRaqKHzZU01VbQUleBVURbfTkdTRXYrDXYWqrobDTS02YRs6Rf1NNGt+0S0sEtr3Hki3/i47aa0H3biPnpe+J8DlGYdgaLuQqToUjgq5h6o5aW6lKaKqcBaxWgsDOxSbSjA7DigFpbG5DeePUFfL/+kIDvtvLjpnfZs+EtAdiN5J9WUVumx2LSO+DabNZjNU+D9ZJYO+sNdDeUO9h4/colcTj2K3dddJjTi6wSnSL38kR2wINvt63jgOtK0lU+NIgrVFVWOJ2hyKxZvNxcdZEOIdgoMqsu0WCpyOXGQKejjpNitkgLnZ5k1tLneWudG3m5hQKoRty3bWLhY8/jcSSEJoF9u1iTsNksiG0VojaLAbXqON5HvAgM8CFYeYLTCTEEHhMcnbvkEeYue0bw8HXWuu6joriIsGClAIQz72z9SYgJbJVfxFxRSKNJ1K9OR3FeihDyJy09g8zzWZwXkZR0lk/sgF2waBlzHnqCGU4vMP/Z99FkaPA9fEh86UGefH09eeJO1gkxkz6PBmHXPk4Vcn8iItQOfOXl5aEt0goWhHHokJdIZMFS5gke/sbpOcHDv+N58DjbPndBumcx9zq/g1whF8OpiOqKYoxaDYnRwZw8cZKEhAQSExPJFtQ+cyZREMef+PjTYqYIkM4XWc57yJkZj77CfQKqTzzzKnMWLmXxnz8kPi6KigsxGEsKyDgXzVdumzl8+LCDMnb8FxQUCEqFkJmWJKxn2gF7LzNnL2L23CXMXPgY0gPPIy0W9L5nEfc7/wOl/2ExYneyd/tnHDv6g+CfN/u+98B162Y893qgUCg4eMiHaFUQpSWlSFu2uOLq6sb27Tv54gt39v54BHlIJJExCez3OcneAzIUgpeeB46y3/sE8oh40jQXMOh1hIYqkclkeB/1FSCWYa4xI/n5BxIQcIxgVSgn5adEce3F1nCxsIjYpDTCEjSciEwjLkVDaFwqSvUZYhMzBeqKxDxOJVKMT1WIXBxSqGO+/B836ja2xfyrIwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;img/react-deubgging-Untitled.png&quot;
        title=&quot;img/react-deubgging-Untitled.png&quot;
        src=&quot;/static/9e2fc23a5f13ad9070b8b03587853aa4/48ccf/react-debugging-Untitled.png&quot;
        srcset=&quot;/static/9e2fc23a5f13ad9070b8b03587853aa4/8890b/react-debugging-Untitled.png 293w,
/static/9e2fc23a5f13ad9070b8b03587853aa4/48ccf/react-debugging-Untitled.png 303w&quot;
        sizes=&quot;(max-width: 303px) 100vw, 303px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
어쨌든 디버거를 활용 안했던 지난 날을 지워버리고 지금부터라도 활용하는 방법을 알아보겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 vscode의 extension을 하나 설치하셔야 하는데요 &lt;/p&gt;
&lt;p&gt;vscode 확장 마켓플레이스에 가셔서 Debugger for Chrome을 검색 후 설치해주시면 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/4f7ef/react-debugging-Code_qWC8oPm5wZ.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 45.3924914675768%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB1ElEQVQoz2VSyW4TQRSc30ACjGImmbVnppdxe9r2LLbxkshxEElADopELkTklD/wBYlfQIIzF8SJM0d+gP8p3oxjh4hDSb3Uq1evqy0/4GBJin2XobXnoGV7kEzjpexCqAFiaeCGAj6TcInrhrLZ226M9gHb4bkTNbAOj6eYzpYwxRRCF+DcID85ws/Pn3CzqpBVCxTDOfJyjLxfQJshdG+IRPYQJl1EwoDxDE4gG1hX7z9gNDlCogz8OIVSGs8mFVbrFZbTAZSZIM1KyE4OQWC8S9wBnVWIYk3OFTlWOPBFA+v64hLj8Rw8JUEahxuNhHfguURktYOsKdjCIwE/onsSe+RJPPbEzl3j8ExzVDSOynIERBa9Lpyo7lYTxK7zFg7BJsQux9pIXKcCbfcfwb7OMChfQOk+PHIYpeQkkneC/6MOZW+fY3Se48fHb/jzdY3L4wBPbNXUW8vT1yhGM3rkDEGkwNIUDrtzE9yPs3NJRU47QeuihPr+Bb9/3eL8MMRTe9PMWrx5h3w0p+SKRjTpanL4UHCzvheu0/WiDOmZwelJh4QMgrizCeXV2yuMZwtIGjmkQ05v6MZU6D0U2a49llKAm8RFUiDgJX23nJLvN/d/AWXFKUAkH4tjAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Code_qWC8oPm5wZ.png&quot;
        title=&quot;React%20Debugging/Code_qWC8oPm5wZ.png&quot;
        src=&quot;/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/463a7/react-debugging-Code_qWC8oPm5wZ.png&quot;
        srcset=&quot;/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/8890b/react-debugging-Code_qWC8oPm5wZ.png 293w,
/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/1f316/react-debugging-Code_qWC8oPm5wZ.png 585w,
/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/463a7/react-debugging-Code_qWC8oPm5wZ.png 1170w,
/static/c3cb6a55c1b1a3ddc7ad45d40bdf12dc/4f7ef/react-debugging-Code_qWC8oPm5wZ.png 1404w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이 확장프로그램은 특정 포트의 특정 경로에 로드된 JS 코드에 debugger를 listen 시킬 수 있습니다.&lt;/p&gt;
&lt;p&gt;설치를 하셨다면, 디버깅할 프론트엔드 프로젝트 루트 경로에 다음과 같은 파일명을 만들고 내용을 작성합니다. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 262px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/66869d1c54d52319dbebdd016049fdcb/b31ad/react-debugging-Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 17.17557251908397%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVQI142OMQ6CMAAAeYOjQ8GmNrUFRCIoaiUNRB2cNPH/PzlRo6M6XHLT5SJtMnTVof2VvFxRN3uabcBlJWOhENIwmToSZZ88/BtRrAaJJaPdDdVeaH1H6E/4cKQ/nNkM8UTNfoY+wZdYhK2Qbkle1KRFNVAzL9eYdPHX2Zs74gJaGS9r9KkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Untitled%201.png&quot;
        title=&quot;React%20Debugging/Untitled%201.png&quot;
        src=&quot;/static/66869d1c54d52319dbebdd016049fdcb/b31ad/react-debugging-Untitled1.png&quot;
        srcset=&quot;/static/66869d1c54d52319dbebdd016049fdcb/b31ad/react-debugging-Untitled1.png 262w&quot;
        sizes=&quot;(max-width: 262px) 100vw, 262px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;.vscode/launch.json&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;json&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;{
    &amp;quot;version&amp;quot;: &amp;quot;0.2.0&amp;quot;,
    &amp;quot;configurations&amp;quot;: [
        {
            &amp;quot;type&amp;quot;: &amp;quot;chrome&amp;quot;,
            &amp;quot;request&amp;quot;: &amp;quot;launch&amp;quot;,
            &amp;quot;name&amp;quot;: &amp;quot;chrome debugger&amp;quot;,
            &amp;quot;url&amp;quot;: &amp;quot;http://localhost:3000&amp;quot;,
            &amp;quot;webRoot&amp;quot;: &amp;quot;${workspaceFolder}/src&amp;quot;
        }
    ]
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;url에 있는 port는 본인의 프론트엔드 개발 모드로 실행되는 port를 입력해주시면 됩니다. 저는 React 기본 포트인 &lt;strong&gt;3000&lt;/strong&gt;으로 설정해주었습니다.&lt;/p&gt;
&lt;p&gt;이제 모든 설정은 끝났고 breakpoint 를 걸어 디버깅을 하는 테스트를 해보겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 React app 을 &lt;code class=&quot;language-text&quot;&gt;npm&lt;/code&gt; 혹은 &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt;으로 실행하여 줍니다.&lt;/p&gt;
&lt;p&gt;코드는 보시다시피 CRA 로 생성된 리액트 초기 코드인데요 테스트를 위해 임의의 변수를 할당 하고 콘솔에 출력하는 코드를 작성한 뒤 콘솔 출력하는 부분에 브레이크포인트를 걸었습니다.&lt;/p&gt;
&lt;p&gt;브레이크포인트는 코드라인넘버 왼쪽에 보이는 틈사이에 커서를 가져다대면 일반적인 테마에서는 빨간 점으로 표시됩니다. 여기서 그냥 왼쪽 클릭을 하게되면 해당 라인에 브레이크 포인트를 걸 수 있습니다. ( 조건 브레이크포인트 등 브레이크포인트를 걸 수 있는 방법은 좀 더 다양합니다. 기회가 되면 다음 포스팅 때 작성해보겠습니다. )&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 572px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/acaca6d0a4996b66d6e950d10dc4f314/6cac4/react-debugging-Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 108.53242320819112%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACyUlEQVQ4y51UWW7bMBT0SYqgTWxJ1sZd1B47e9F+tCh6ht7/ANMhFScuEDtBPwYkZfm9eTMjroRr4Icb5JVDUmhcfEnx6XOCi8vsv7ASpocfJ7juGqaZkesZtRmQ5grrVGCdCVylNa6SellTcRarpLBkptC5B3T2EaO9xqBHOHEHIQeosUVlPLYV38v1u1jVokEhPXr1FTf2Bxqe52FE292h1i1E6yG8R+08WRtstuosVmXtUekeedGgrFqsC4dNrZBWMrJaJ5KjEFzX2fKnyGZ7guE6/EAzlJjQ6ieY8Tvm/R7X04RKWpTaIA+rZUPjkJZ6YZOfYJjFygZZaSHrEZYm7W5uMc10vm4g2xG5chy9jaMnhXlHw63Ehi8VwqPpOrjGI6dBj3e/8fPpFx6+/SEbMqMkAVnlz2IVOqZ0OisdrNiT5RTPm2jAwj7qdjTWWYbBuW0VOjtoxmRQA5xuMDYNGjqrGZuSsUmoXVqF5tSQ5hwMimt2pGESC7olZ2TrVYt76tix2I6Bvx8mmH5AP3cYdwMb9Ci0IywKNiiFjfttbdnMLAWz54IbUi647/mlhHNdt9BEyWxq6aAknVYNBB2vqXUlHEq57EtmORi7ClXDJiDuCeN3jEwLF1xmRoWbIO3MCA3UmTIwu6XiczOi4lrKDsrN0dhoStDwwLDiQ8uXrjL5mq9MLUE+nPNgjPrnvDzTBw2bqGMaM2aglUXPzPUhe4TsPNTQUhoTkZxwOpqyjOyIZdzw5fQ0ZB4H+P0If8uLYs9LYuhisAPORScWDLlb1oWhpYuuaXnTMOi7PooeLwiu29q8FHyr8EvB7LlgQPjkcmpZ8rYJ2obsHcaNOXyP4eKyWb5T7n27p4MDL9oRBR09Du45dq8MD5Hh2rLIrDrU3B+cfkv88xoGhhy7Eh0a5q8IDT5Y4GRBIXUseklW65fRPnYhHOMvYySw9TVXWlQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Untitled%202.png&quot;
        title=&quot;React%20Debugging/Untitled%202.png&quot;
        src=&quot;/static/acaca6d0a4996b66d6e950d10dc4f314/6cac4/react-debugging-Untitled2.png&quot;
        srcset=&quot;/static/acaca6d0a4996b66d6e950d10dc4f314/8890b/react-debugging-Untitled2.png 293w,
/static/acaca6d0a4996b66d6e950d10dc4f314/6cac4/react-debugging-Untitled2.png 572w&quot;
        sizes=&quot;(max-width: 572px) 100vw, 572px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그 다음 debugger를 실행시키기 위해 단축키 &lt;code class=&quot;language-text&quot;&gt;F5&lt;/code&gt; 혹은 vscode 좌측 탭에 보이는 Run and Debug 탭에서 start debugging 버튼을 클릭하셔도 됩니다.&lt;/p&gt;
&lt;p&gt;그러면 다음 이미지와 같은 디버거 액션 버튼들이 있는 탭이 화면 중간 상단에 뜨면서 디버거가 실행될 겁니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 236px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3218b24c9b788c0dd38152d47cdbc3b6/f8284/react-debugging-Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 19.491525423728813%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA40lEQVQY002P3U6EMBSEeQOJFMFdpYUWSqH8mP0T3bjqhsQLvVnfwDvf/wHG0/oTLybz9czJ5DRQ9QCp+29VFkIoqB8uyhYud16U9o9/93Npaa9HQSyqzs+CK66Q05JueuibPabTJzJRol4dMD69I6O82R7p/YBrLml2gjQrqMZiej1A1BZjO2De7JDlGsEyk77QtCP0eI/d2wd4oaGHiYqeqVyhvZ1h1o+eu7sXuoh+RUWbeY/cdL7w6AsrBFwaxMkSUXxJShGehWAXC88RS8BcRv6fXe50HqVgMTlxyFIkC44v+OV0GL7mf8cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Untitled%203.png&quot;
        title=&quot;React%20Debugging/Untitled%203.png&quot;
        src=&quot;/static/3218b24c9b788c0dd38152d47cdbc3b6/f8284/react-debugging-Untitled3.png&quot;
        srcset=&quot;/static/3218b24c9b788c0dd38152d47cdbc3b6/f8284/react-debugging-Untitled3.png 236w&quot;
        sizes=&quot;(max-width: 236px) 100vw, 236px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Debug action은 다양한데 좌측부터 차례대로 다음 설명과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;continue&lt;/span&gt; &lt;br&gt;
다음 breakpoint로 이동, 다음 breakpoint가 없을 시 디버깅 종료&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;step over&lt;/span&gt; &lt;br&gt;
현재 break 된 파일에서 다음 라인으로 이동&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;step into&lt;/span&gt; &lt;br&gt;
break된 라인에서 실행되고 있는 내부 함수로 이동&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;step out&lt;/span&gt; &lt;br&gt;
break라인에서 호출한 곳으로 이동합니다.&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;restart &lt;/span&gt; &lt;br&gt;
debugger 재실행&lt;/li&gt;
&lt;li&gt;&lt;span style=&quot;color:skyblue;&quot;&gt;stop&lt;/span&gt; &lt;br&gt;
debugger 종료&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Debugger로 실행이 정상적으로 되었다면 브레이크포인트가 존재하므로 프로그램이 해당 부분을 실행할 때 멈추게 될텐데요 디버그 local 변수 탭에 보면 다음과 같이 브레이크포인트 바로 위에서 할당한 message 변수의 값이 할당된 것을 확인해 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 402px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/674af4c89a2e62481c26224fa4957562/115f4/react-debugging-Code_eHGjJoQiPd.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 88.39590443686008%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABw0lEQVQ4y82Ty27bMBBF9SF17MiyHpRI8SHqbUuJnaYp0MemXXbRr+lf3w5pJEgAxwUaL7K4kMjhHM3coYLt/IBwU4AJA1l1KEm6HiFUg4hz5NrCdhO0HVAPN6j7GVW7Q5RyXFNe1W4hpIWpRqyiDMGPn798QJqODk/HZAIWskbMSzA6bAmg7AjTThh2d2gIHKUC64SjND1yUYGXDcKYI0hyg5RX6LcH3H/+hv39V5Sqo8MlYqaxyZR/j1Lpn2EsnmJJrv2+O+Pk1oGuXfklLRSm/QNybrAMM6o6f1LoFB/1fP+UgkK2iBKBJfVf8haSN97PbryFJb+U7bGgD3wgLR4/FDHy67SCjNceeBWm4KyBFSMaNYNzhb6yUKVGJTV2tkajDRI3DEp8tcK6u/VmxkxiN91hHA9gzPhgkhbYJIWHFDkNiAnaP1bi4qsT4CAmM52HjLy7+fgJ7TBTawlWFFxSwqOu1hnJwfJXYR44H774Ct01MM0ATtdluWZnjV+da/n77z/Y5AShqhbXqffyX0lnp5wUNOVMvgD8L8wDu2FPF1W8CfICKPTgf6GLAdOiumyFpp78lN9vhcpuL9xyM10U+Bdp7RZzq6BKywAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Code_eHGjJoQiPd.png&quot;
        title=&quot;React%20Debugging/Code_eHGjJoQiPd.png&quot;
        src=&quot;/static/674af4c89a2e62481c26224fa4957562/115f4/react-debugging-Code_eHGjJoQiPd.png&quot;
        srcset=&quot;/static/674af4c89a2e62481c26224fa4957562/8890b/react-debugging-Code_eHGjJoQiPd.png 293w,
/static/674af4c89a2e62481c26224fa4957562/115f4/react-debugging-Code_eHGjJoQiPd.png 402w&quot;
        sizes=&quot;(max-width: 402px) 100vw, 402px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
그렇다면 조금 코드를 바꿔서 step into와 step over를 활용한 디버깅을 해보겠습니다.&lt;/p&gt;
&lt;p&gt;변수 &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; 를 함수의 리턴값으로 할당되게 코드를 조금 변경한 뒤 브레이크포인트를 그대로 &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; 변수 할당 라인에 찍고 디버거를 실행해 보겠습니다.&lt;/p&gt;
&lt;p&gt;보시다시피 코드는 함수가 하나 추가되었고 &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; 는 함수의 반환 값으로 할당되게 되었는데요&lt;/p&gt;
&lt;p&gt;현재 브레이크포인트에서는 message는 아직 할당되지 않았으니 당연히 &lt;code class=&quot;language-text&quot;&gt;undefined&lt;/code&gt; 입니다.&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 886px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e5326fc4c418c894566c9f927d1993f0/88662/react-debugging-Code_0XwbwVZYpG.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.986348122866893%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMUlEQVQY0yWQWXKDMBAFuUmqDGYTWtCKWIIJdspLkvvf5mWQP7pm0LxqacjisqNoFIr6QKZ6bt5UzEC5iGm8EXdEv0HKGdwGMOVRM4u6M4RN+aISyBQP6M0IoQMJjkOOU8nwkdfIKXCEo75j7FcSTjB2hRwGCDek2XFporPpO7P6E1yRlMJVp9+vJU4kLlsNZWcoMUHaLzAfIc0AJgKa1qAlQUMw4ah3SZwFt6GXEzi3kDTopSccFME4hWglo0dM4YEw7pjiBZEu8bRV8CPcSJUQMiZ5ZtUMKwj6N0Et8ITmA/puQMscapIewbwyKEqDkuq50sjrAzpr3rPU12nlGbILUDxCUJUkYq1F11MvFTi9dFkDnvcZv38Bt0fA+tqwPxZ8vwKuPx63p8d2Nbhce/wDyna97rTQCDwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Code_0XwbwVZYpG.png&quot;
        title=&quot;React%20Debugging/Code_0XwbwVZYpG.png&quot;
        src=&quot;/static/e5326fc4c418c894566c9f927d1993f0/88662/react-debugging-Code_0XwbwVZYpG.png&quot;
        srcset=&quot;/static/e5326fc4c418c894566c9f927d1993f0/8890b/react-debugging-Code_0XwbwVZYpG.png 293w,
/static/e5326fc4c418c894566c9f927d1993f0/1f316/react-debugging-Code_0XwbwVZYpG.png 585w,
/static/e5326fc4c418c894566c9f927d1993f0/88662/react-debugging-Code_0XwbwVZYpG.png 886w&quot;
        sizes=&quot;(max-width: 886px) 100vw, 886px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위에서 언급했던 debug action 중 step into action을 활용하면 해당라인의 함수로 들어갈 수 있으니 &lt;code class=&quot;language-text&quot;&gt;이건함수다&lt;/code&gt; 함수로 들어갈 수 있겠죠? step into 해보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 969px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2540354474d243e21e3574bc7d462f56/2d245/react-debugging-Code_MRqAN6UkNk.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.27986348122867%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+UlEQVQY01XQWW7CMBCA4Ryl6gJxNtvxHkIWQOpL73+dv1OKRPvwyZY841mq3iRGN1F3I2/HntdDd/fy0fKuDIMtrPmLOS7keCPMCzpkifcPjmP7VDV9kMALzs0Mg0ML1VoOjRYW1UWcvqLdCTMW6iFwlJxD4/lQ7n7+JR96otvweiaNZ7JbiHbCm4IxESXv27Kz3z7Zrxv7eeKyFPZVXDOX/UQ5ZXyxhDJSKRnV6EyrPM2DqkdU89tpqyM+FZyXTn3Ah4ANnjH9CJjgMP6pqmWsZDexEpPsadpJeZWkiU6KqS7QdNKtzfQ2ctBnGjPTyr21SXYY/43+DW35nm26GE9LAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Code_MRqAN6UkNk.png&quot;
        title=&quot;React%20Debugging/Code_MRqAN6UkNk.png&quot;
        src=&quot;/static/2540354474d243e21e3574bc7d462f56/2d245/react-debugging-Code_MRqAN6UkNk.png&quot;
        srcset=&quot;/static/2540354474d243e21e3574bc7d462f56/8890b/react-debugging-Code_MRqAN6UkNk.png 293w,
/static/2540354474d243e21e3574bc7d462f56/1f316/react-debugging-Code_MRqAN6UkNk.png 585w,
/static/2540354474d243e21e3574bc7d462f56/2d245/react-debugging-Code_MRqAN6UkNk.png 969w&quot;
        sizes=&quot;(max-width: 969px) 100vw, 969px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 와 같이 브레이크포인트를 찍지도 않았는데 함수안의 return문 라인을 디버깅 하는중입니다.&lt;/p&gt;
&lt;p&gt;왼쪽 local 변수값을 살펴보면 매개변수로 넘어온 hello world! 라는 값이 잘 할당되었네요. 여기서 step over을 해보겠습니다. step over는 브레이크 포인트를 찍지 않았어도 다음 라인을 계속해서 디버깅 할 수 있습니다. 여기서는 크게 의미가 없으니 &lt;code class=&quot;language-text&quot;&gt;console.log&lt;/code&gt; 로 출력하고 있는 13번 라인까지 step over해서 이동해보도록 하겠습니다. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 968px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b77ab006a24c03c8fe579f53d903a668/84390/react-debugging-Code_BvKVUmR5DU.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30.716723549488055%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKUlEQVQY00WQSVbEMBBDcxVoSNyO59mZ6CH9AkvufxhRuN+Dxd+VVJK6UDa4tOA0SLy+C7z2T96YhtAZyhXU8kBJVxi9QPoMriOG0Tf6s6V7+UfXMwOjKkK5QMcF3BQMMuKFTE9MgcuCyR2IviDEFSoWjC6RWUDPn6ZMBCI2OhtWSrAj1B1l+0SYHrge3zBhacdcRWR/g5t+b1Y4O8GqDGuIkGFsARv/E3dcBiS3wcuJKEi6IlJVT6KRknIVoHWBNjOcqXA6QVJlRSlVSBjp4bkl9I1mGOwCI0gkKwwZS5FJlCHooyAB46WZDyQ8yZkmqWAqgclEtSPt7YnQ6AYaNWqqomcYT+ny2hAmQUgLZSPue8LxteB4zNjvFestYrv7xnrxmD8clsuTH2XEvgqj4T61AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;React%20Debugging/Code_BvKVUmR5DU.png&quot;
        title=&quot;React%20Debugging/Code_BvKVUmR5DU.png&quot;
        src=&quot;/static/b77ab006a24c03c8fe579f53d903a668/84390/react-debugging-Code_BvKVUmR5DU.png&quot;
        srcset=&quot;/static/b77ab006a24c03c8fe579f53d903a668/8890b/react-debugging-Code_BvKVUmR5DU.png 293w,
/static/b77ab006a24c03c8fe579f53d903a668/1f316/react-debugging-Code_BvKVUmR5DU.png 585w,
/static/b77ab006a24c03c8fe579f53d903a668/84390/react-debugging-Code_BvKVUmR5DU.png 968w&quot;
        sizes=&quot;(max-width: 968px) 100vw, 968px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;
위 와 같이 &lt;code class=&quot;language-text&quot;&gt;console.log&lt;/code&gt; 하는 라인에서의 &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; 변수의 값은 정상적으로 함수를 거쳐 &lt;code class=&quot;language-text&quot;&gt;hello world! for chrome ~&lt;/code&gt; 이라는 문자열 값으로 할당된 것을 확인 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이로써 매우 간단한 예를 들어 디버깅을 해보았지만 프로그램의 복잡도가 증가 할 수록 디버깅의 중요성은 매우 높아집니다.&lt;/p&gt;
&lt;p&gt;앞으로 디버거를 더 많이 활용하여 프론트엔드 사이드에서도 코드 디버깅시간을 단축시켜줄 수 있을 것 같습니다&lt;/p&gt;</content:encoded></item><item><title><![CDATA[코틀린 필드와 속성]]></title><description><![CDATA[안녕하세요 이번에 소개할 내용은 코틀린에서의 필드(field)와 속성(property…]]></description><link>https://thxwelchs.github.io/kotlin-property/</link><guid isPermaLink="false">https://thxwelchs.github.io/kotlin-property/</guid><pubDate>Mon, 10 Feb 2020 23:10:55 GMT</pubDate><content:encoded>&lt;p&gt;안녕하세요 이번에 소개할 내용은 코틀린에서의 &lt;strong&gt;필드(field)&lt;/strong&gt;와 &lt;strong&gt;속성(property)&lt;/strong&gt; 입니다.&lt;/p&gt;
&lt;p&gt;얼핏 보면 비슷해보이지만 전혀 다른 개념인데요. 저도 너무 헷갈리고 대체 어떻게 이해해야 좋을까 고민하다가 이 글을 작성하게 되었습니다.
&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;그럼 대체 필드와 속성이 어떤 개념인지 차근차근 살펴보겠습니다.
&lt;/br&gt;&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;먼저 &lt;strong&gt;속성&lt;/strong&gt;과 &lt;strong&gt;프로퍼티&lt;/strong&gt;를 이해하기 위해서는 이 둘이 의미하는 바를 이해해야 하는데&lt;br&gt;
먼저 속성(&lt;code class=&quot;language-text&quot;&gt;property&lt;/code&gt;)은 노출되어있는 필드를 의미하고,&lt;br&gt;
필드(&lt;code class=&quot;language-text&quot;&gt;field&lt;/code&gt;)는 클래스에 비공개로 유지되며 &lt;code class=&quot;language-text&quot;&gt;gettter&lt;/code&gt; 혹은 &lt;code class=&quot;language-text&quot;&gt;setter&lt;/code&gt;를 통해 접근할 수 있어야 하는 것을 의미합니다. &lt;/p&gt;
&lt;p&gt;그런데 코틀린에서의 클래스는 무조건 &lt;code class=&quot;language-text&quot;&gt;property&lt;/code&gt;(속성)만 가질 수 있고 이 속성이란 것은 filed + 접근자를 의미합니다.&lt;/p&gt;
&lt;p&gt;코틀린이 속성만 가질 수 밖에 없는 이유는  코틀린에 클래스에서 지역 변수를 선언하면 &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt; 과 &lt;code class=&quot;language-text&quot;&gt;set&lt;/code&gt; 함수도 함께 정의되기 때문입니다.  ( 물론 backing field를 통해서 임의로 정의할 수도 있습니다. )&lt;/p&gt;
&lt;p&gt;다음과 같이 코틀린에서는 속성 선언을 할 때 var(mutable) 혹은 val(immutable)로 선언할 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class Person(var name: String, var age: Int)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 코틀린 코드가 자바 코드로 디컴파일 되면 다음과 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;public class Person {
    private String name;
    private Integer age;

    public void setName(String value) {
        this.name = value;
    }

    public String getName() {
        return this.name;
    }

    public void setAge(Integer value) {
        this.age= value;
    }

    public String getAge() {
        return this.age;
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h1&gt;추가 내용&lt;/h1&gt;
&lt;h2&gt;backing field?&lt;/h2&gt;
&lt;p&gt;getter / setter 에 기본적으로 생성되는 속성&lt;/p&gt;
&lt;p&gt;그래서 Custom getter setter(Custom accessors) 를 구현할 때는 field라는 변수명으로 접근하여 getter, setter에 해당하는 필드를 접근할 수 있다. 이것을 &lt;strong&gt;backing field&lt;/strong&gt;라고 한다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class Person {
    var name: String
        get() = name
        set(value) { field = value } 
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h1&gt;참고&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://wooooooak.github.io/kotlin/2019/05/24/property/&quot;&gt;https://wooooooak.github.io/kotlin/2019/05/24/property/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Git merge 스마트하게 하기]]></title><description><![CDATA[주요 옵션 : 일단 병합을 한다음에 병합에 실패한 것으로 가정후 커밋은 하지 않습니다. (커밋되지 않은 코드를 스테이지에만 올려놓고 코드를 마지막으로 점검하거나, 리뷰 할 때 쓸만함 ) : fast-forward…]]></description><link>https://thxwelchs.github.io/GIT-MERGE-SQUASH/</link><guid isPermaLink="false">https://thxwelchs.github.io/GIT-MERGE-SQUASH/</guid><pubDate>Fri, 31 Jan 2020 23:11:55 GMT</pubDate><content:encoded>&lt;h2&gt;주요 옵션&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;—no-commit&lt;/code&gt;: 일단 병합을 한다음에 병합에 실패한 것으로 가정후 커밋은 하지 않습니다. (커밋되지 않은 코드를 스테이지에만 올려놓고 코드를 마지막으로 점검하거나, 리뷰 할 때 쓸만함 )&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;—no-ff&lt;/code&gt;: fast-forward 되어질 병합 형태라도 반드시 머지 커밋을 만들어서 병합합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;—squash&lt;/code&gt;: 현재 브랜치 위에 단일 커밋을 만들어서 브랜치 병합합니다. ( 커밋 합치기 )&lt;/p&gt;
&lt;h2&gt;git merge —no-commit —noff를 활용해서 수정된 코드 살펴보기&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;git merge ${commit-hash} --no-commit --no-ff&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 명령으로 fast-forward(빨리감기) 하지않고, 일단 커밋하지 않은 상태에서 수정된 코드를 살펴볼 수 있습니다.&lt;/p&gt;
&lt;h2&gt;git merge —squash를 활용해서 커밋내역 합쳐보기&lt;/h2&gt;
&lt;p&gt;설정된 커밋내역에는 다음과 같이 master, squash 두 브랜치가 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 388px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b1ddc2bdfad2c2f6e0ec9aeea8d63b0c/d0520/gitkraken_YtRG7HpYvA.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 38.907849829351534%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABiklEQVQoz2WRWW/TUBBG/Q9ASMiOl8RbnHhf4jZuEwXUWjHpglqgLFVRJQQS6iMvIPjxh2vHimh4OJp75843ut+MFNaviepL0uYaK8gx7SmmG3SMxHnsZ5xfXOHEhwzTOUFekRUV+eyIg2qF1dbaPqazRVpcfaTcXOMtaoxxhGrYaEO3Y6BbmF7E5v0to7BACUu8pCRNS6KkIM0P0IfOVtMjxX7A2HF59uQpqjJA10cCE90wUVUDx/N5+/kOdZIgBwnTdEaWlcRpQdY2NCw0odGEpkVym9/4Z7/wz//gb36ieRWqnaI6uYiZiBnKbM2rtfjl6gfR8oZlfcP85TteNJ9wklPs6AQ73iJNTh5I1g/4p99xV1/RxoePGupugXt0xnHzBeP4G2F1yap+Q7m8IJ03Yu5LTH+B1SMpwqYsKyjygIGi/mfZFZY/3N+jxCvkMMFv7cY53jTkuaz1Vkc7JH3ksqNbhrOHi2FNxLuDbnrbXL+ArcZ5hLSf2NFtu49i8G3s+KdG27u3/AUWNO5YkFSDNgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;git/gitkraken_YtRG7HpYvA.png&quot;
        title=&quot;git/gitkraken_YtRG7HpYvA.png&quot;
        src=&quot;/static/b1ddc2bdfad2c2f6e0ec9aeea8d63b0c/d0520/gitkraken_YtRG7HpYvA.png&quot;
        srcset=&quot;/static/b1ddc2bdfad2c2f6e0ec9aeea8d63b0c/8890b/gitkraken_YtRG7HpYvA.png 293w,
/static/b1ddc2bdfad2c2f6e0ec9aeea8d63b0c/d0520/gitkraken_YtRG7HpYvA.png 388w&quot;
        sizes=&quot;(max-width: 388px) 100vw, 388px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;squash 브랜치를 master에 병합시키고자 하는데, squash 브랜치의 커밋내역들을 합쳐서 병합하고 싶습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;—squash&lt;/code&gt; 옵션으로 병합할 때 스쿼시(커밋내역 합치기)를 할 수 있습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;git checkout master
git merge --squash&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;그러면 다음과 같이 충돌이 발생합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 659px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9f949bd0459598ceebcbbe97130c2faa/c8822/mintty_y0wj1kLQ2Y.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.358361774744028%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAkklEQVQI11WOywrFIBBDrRtLqeK7vqob+/+fmKsWLnQRMhOGkyEpZTxPR+8dWmvknFFrRUoJrTUIIUC3DYQQbMOnKKX/eeYf5VxQSoG1DjEGeH9BKbWAMcaxe4QQcBwH9n1fBXPmnC9njH2BtTbU+4azFmXApZRwzi2gG7BraJYaoxdESbVupowxOM/zzccTs/AHXL1G7h6gbpAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;git/mintty_y0wj1kLQ2Y.png&quot;
        title=&quot;git/mintty_y0wj1kLQ2Y.png&quot;
        src=&quot;/static/9f949bd0459598ceebcbbe97130c2faa/c8822/mintty_y0wj1kLQ2Y.png&quot;
        srcset=&quot;/static/9f949bd0459598ceebcbbe97130c2faa/8890b/mintty_y0wj1kLQ2Y.png 293w,
/static/9f949bd0459598ceebcbbe97130c2faa/1f316/mintty_y0wj1kLQ2Y.png 585w,
/static/9f949bd0459598ceebcbbe97130c2faa/c8822/mintty_y0wj1kLQ2Y.png 659w&quot;
        sizes=&quot;(max-width: 659px) 100vw, 659px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;코드를 수정하여 충돌을 잡아주면 깔끔하게 하나의 커밋으로 합쳐졌습니다!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 419px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fbc51e033b75a2bd346cb98080fba1b9/32151/gitkraken_ugtDBcs6qF.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.6382252559727%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPklEQVQoz4WR22rCQBCGfY1kN8lmE4xJzGHVKPHYCm1NEWpRpHglhUKh73/9dxIPDamlFx+7O+x8MzvbsrIlgv0X4t0nwu0HRDaHbntgbghd+hBBiunLHt76CPNuh/H9BovHLYazNWx/AtHJIfwxrSdaFgWS+QHBeA8nfoCmmeCmC2Y44IRGex5NUCwPVCRHECmE3QSqN4TjetB0E4wLwqpoMUNCp8QKkyQEMyVRCiUJ6RzleH56B+ssEKUZ4nSAtDeCdH3oXFY5FyphPcBqe53bkO0Ai9UrxGAF3s2QkKgU9rP8LLRvC9lFZsirtLxsk3C6eYOjCrCQulMjJCqD58ew7DaaDf0Im52ezxqj2bQV1sURRmeOMO7TDNW1YDP3T2E9xijRoJ8f5bMqpjHx687/HZ6fX5+rYbk3C9b5Bk0E52SGhtBZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;git/gitkraken_ugtDBcs6qF.png&quot;
        title=&quot;git/gitkraken_ugtDBcs6qF.png&quot;
        src=&quot;/static/fbc51e033b75a2bd346cb98080fba1b9/32151/gitkraken_ugtDBcs6qF.png&quot;
        srcset=&quot;/static/fbc51e033b75a2bd346cb98080fba1b9/8890b/gitkraken_ugtDBcs6qF.png 293w,
/static/fbc51e033b75a2bd346cb98080fba1b9/32151/gitkraken_ugtDBcs6qF.png 419w&quot;
        sizes=&quot;(max-width: 419px) 100vw, 419px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[제네릭 1편 와일드카드 (Generic Wildcard)]]></title><description><![CDATA[Java 와일드카드 제네릭  제네릭은 Unbound wildcard라고 불리며, 어떤 타입이 될지 모른다 라는 의미입니다. wildcard…]]></description><link>https://thxwelchs.github.io/GENERIC-1/</link><guid isPermaLink="false">https://thxwelchs.github.io/GENERIC-1/</guid><pubDate>Thu, 30 Jan 2020 23:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;Java 와일드카드 제네릭&lt;/h1&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;?&amp;gt;&lt;/code&gt; 제네릭은 Unbound wildcard라고 불리며, 어떤 타입이 될지 모른다 라는 의미입니다. wildcard가 사용된 제네릭은 타입으로 들어온 타입에 대하여 관심이 없다 라는 의미도 되며 기능적인 메소드 외에 원소 값과 관련된 메소드에는 null 값만 허용됩니다.&lt;/p&gt;
&lt;p&gt;코드로 예를 들어보자면 다음과 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;List&amp;lt;?&amp;gt; wildcards = new ArrayList&amp;lt;&amp;gt;();

wildcards.size() // 문제없음 (원소와는 상관없는 기능적인 메소드)
wildcards.add(1) // 컴파일 에러 남
wildcards.add(null) // 문제없음 null은 어떤 타입의 원소든 가능&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;Upper, Lower Bound Generic&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;extends&lt;/code&gt;: 공변 제네릭이라고도 하며, 구체적인 방향성을 가진 타입을 명시 ( &lt;code class=&quot;language-text&quot;&gt;자기자신과 서브 클래스만 허용&lt;/code&gt;) &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;read&lt;/code&gt;&lt;/strong&gt;만 가능, &amp;#x3C;{1} extends {2}&gt; &lt;strong&gt;1은 2의 서브클래스 이거나 자기 자신이어야 한다. 라고 명시하는 것과 같습니다.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;super&lt;/code&gt;: 반공변 제네릭이라고도 하며, 추상적인 방향성을 가진 타입을 명시 ( &lt;code class=&quot;language-text&quot;&gt;자기 자신과 슈퍼 클래스만 허용&lt;/code&gt;) &lt;strong&gt;&lt;code class=&quot;language-text&quot;&gt;write&lt;/code&gt;&lt;/strong&gt;만 가능, &amp;#x3C;{1} super {2}&gt; &lt;strong&gt;1은 2의 슈퍼클래스 이거나 자기 자신이어야 한다. 라고 명시하는 것과 같습니다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;또한 자바에서는 클래스 상속은 하나만 할 수 있지만, 인터페이스는 여러개를 구현할 수 있으므로 인터페이스를 구현한 구현체도 서브클래스 이기 때문에 &lt;/p&gt;
&lt;p&gt;다음과 같이 표현이 가능하다고 합니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class Zergling extends Unit implements GroundAttack, Burrow {
}

class Ultralisk extends Unit implements GroudAttack {
}


class D&amp;lt;T extends Unit &amp;amp; GroundAttack &amp;amp; Burrow&amp;gt; { //T에는 Zergling만 올 수 있습니다.

}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Upper, Lower Bound wildcard 예시 코드&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;import java.util.ArrayList;
import java.util.List;

public class GenericsTester {

    public static void addCat(List&amp;lt;? super Cat&amp;gt; catList) {
        System.out.println(&amp;quot;Cat Added&amp;quot;);
    }

    public static void main(String[] args) {
        List&amp;lt;Animal&amp;gt; animalList= new ArrayList&amp;lt;Animal&amp;gt;();
        List&amp;lt;Cat&amp;gt; catList= new ArrayList&amp;lt;Cat&amp;gt;();
        List&amp;lt;RedCat&amp;gt; redCatList= new ArrayList&amp;lt;RedCat&amp;gt;();
        List&amp;lt;Dog&amp;gt; dogList= new ArrayList&amp;lt;Dog&amp;gt;();

            // Animal은 Cat의 슈퍼 클래스 이므로 추가가 가능하다.
        addCat(animalList);

        // Cat은 자기자신이므로 추가가 가능하다. 
        addCat(catList);

        // RedCat과 Dog는 Cat의 상위클래스가 아니므로 타입 미스매치 컴파일 에러 남
        addCat(redCatList);
        addCat.addMethod(dogList); 
    }
}
class Animal {}

class Cat extends Animal {}

class RedCat extends Cat {}

class Dog extends Animal {}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;br&gt;
이처럼 특정 클래스 나 메소드 안에서 특정 타입 혹은 T와 같은 제네릭 타입을 이용해서 어떤 작업을 수행하는 것이 아니라면 와일드카드를 이용하면&lt;/p&gt;
&lt;p&gt;내부 구현이 노출되지 않을 수 있고, 내부 메소드 의 의도를 조금 더 올바르게 드러낼 수 있습니다.&lt;/p&gt;
&lt;br/&gt;
&lt;h2&gt;capture&lt;/h2&gt;
&lt;p&gt;와일드카드로 정의한 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;?&amp;gt;&lt;/code&gt; 제네릭은 이 타입이 뭔지 모른다라고 정의를 한건데, 필요에 따라서  타입이 뭔지를 추론을 해야하는 상황일 때 capture라고 한다.&lt;/p&gt;
&lt;br/&gt;
&lt;h1&gt;Kotlin 에서의 와일드카드&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;in T&lt;/code&gt; : Java의 &lt;code class=&quot;language-text&quot;&gt;? super T&lt;/code&gt;와 같음. &lt;code class=&quot;language-text&quot;&gt;input&lt;/code&gt;의 약자이며 &lt;code class=&quot;language-text&quot;&gt;write&lt;/code&gt; 만 가능&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;out T&lt;/code&gt; : Java의 &lt;code class=&quot;language-text&quot;&gt;? extends T&lt;/code&gt;와 같음. &lt;code class=&quot;language-text&quot;&gt;output&lt;/code&gt;의 약자이며 &lt;code class=&quot;language-text&quot;&gt;read&lt;/code&gt; 만 가능&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;kotlin에서는 out T 서브타입 한정에서 null로 값을 대입하는 것이 불가능함&lt;/p&gt;
&lt;p&gt;위 자바에서 예시를 들었던 코드를 코틀린 으로 작성했습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;kotlin&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class WildcardGenerics {
    fun addCat(catList: ArrayList&amp;lt;in Cat&amp;gt;) {
        println(&amp;quot;Cat Added&amp;quot;)
    }


    fun main(args: Array&amp;lt;String&amp;gt;) {
        val animals = arrayListOf&amp;lt;Animal&amp;gt;()
        val cats = arrayListOf&amp;lt;Cat&amp;gt;()
        val redCats = arrayListOf&amp;lt;RedCat&amp;gt;()
        val dogs = arrayListOf&amp;lt;Dog&amp;gt;()
        
        addCat(animals)
        
        addCat(cats)
        
        // 컴파일 에러
        addCat(redCats)
        addCat(dogs)
    }
}

open class Animal {}

open class Cat: Animal()

class RedCat: Cat()

class Dog: Animal()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;br&gt;
&lt;u&gt;&lt;span style=&quot;color:#e96900;&quot;&gt;
혹시나 잘못된 점이 있거나 정보가 틀렸다면 반드시 코멘트 혹은 &lt;a href=&quot;mailto:thxwelchs@gmail.com&quot;&gt;이메일&lt;/a&gt;로 알려주시면 감사하겠습니다!
&lt;/span&gt;&lt;/u&gt;&lt;/p&gt;
&lt;h3&gt;참고&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://thdev.tech/kotlin/androiddev/2017/10/03/Kotlin-Generics/&quot;&gt;https://thdev.tech/kotlin/androiddev/2017/10/03/Kotlin-Generics&lt;/a&gt;
&lt;a href=&quot;https://www.youtube.com/watch?v=PQ58n0hk7DI&quot;&gt;https://www.youtube.com/watch?v=ipT2XG1SHtQ&lt;/a&gt; 토비님 제네릭 강의
&lt;a href=&quot;https://thdev.tech/kotlin/androiddev/2017/10/03/Kotlin-Generics/&quot;&gt;https://thdev.tech/kotlin/androiddev/2017/10/03/Kotlin-Generics/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Exif metadata로 이미지 회전시키기]]></title><description><![CDATA[Exif? 디지털 카메라 등에서 사용되는 이미지 파일 메타데이터 포맷으로, 카메라가 촬영한 사진, 녹음파일에 시간 등의 각종 정보를 담기 위해 개발되었다. 즉, JPEG, TIFF 6.0과 RIFF, WAV…]]></description><link>https://thxwelchs.github.io/METADATA-EXIF/</link><guid isPermaLink="false">https://thxwelchs.github.io/METADATA-EXIF/</guid><pubDate>Tue, 28 Jan 2020 20:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;Exif?&lt;/h1&gt;
&lt;p&gt;디지털 카메라 등에서 사용되는 이미지 파일 메타데이터 포맷으로, 카메라가 촬영한 사진, 녹음파일에 시간 등의 각종 정보를 담기 위해 개발되었다. 즉, JPEG, TIFF 6.0과 RIFF, WAV 포맷에 이미지나 소리에 대한 정보를 추가로 기록할 수 있다&lt;/p&gt;
&lt;p&gt;특히 Exif 메타데이터 정보 중 Orientation 값은 사진의 회전 정보를 담고 있는데, 카메라 디바이스 의 중력 센서 기반을 활용한 회전 정보가 이미지 파일 Exif 태그 중 하나에 기록됩니다.&lt;/p&gt;
&lt;p&gt;Orientation은 정수 1~8 사이의 값으로 저장 되고, 이 값의 의미가 각도를 뜻하는 것은 아닙니다.&lt;/p&gt;
&lt;p&gt;일정한 규칙이 있긴 하나, 프로토콜 처럼 정확히 약속된 것은 아닌 것 같습니다. 일단은
이 규칙에 따라 변환 시켜야 합니다.&lt;/p&gt;
&lt;p&gt;다음은 제가 준비한 Orientation 태그가 기록되어 있는 sample 이미지 입니다.&lt;br&gt;
이렇게 Mac의 Preview로 보면 Exit의 방향(Orientation)값을 볼 수 있습니다. 사실상 이 사진은 반시계 방향으로 90도 회전 되어 있어야 맞는건데, Mac의 Preview가 orientation 값을 읽어 보기 좋게 회전 시켜 보여주는 것 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/00ee62c5563234ab7ba1b076bdeba1df/e8a46/METADATA-EXIF-Untitled.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.003412969283275%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABw0lEQVQoz43PO2/TUBjGcQ8MNGpLqrRqUW6O40sTJ747aVQBsREJaYITl4oWELSIkY2NqogVJJAQID4BYujEN/xznIjCwJDhkeVX5/zO+0jJNGU0ntCPIwbDe5y9fMbh0SFpOiOZzhg/mM6TTCbif0I8mNFNLoiefOT4sTibpgwGQw4OxkRRjOQHIfu9gA9v7vDtXczr04BP531+fkk4eXgLy/bpdjvs7jaQZUVEFrOQ29F9zKaJYTRQVR1FUanXNSTLdtnrOFx+H/Lqqcvbmcqv9zE/Po9Ixx3Mlo3ve2iaTqlUoVgs49gOcRTRalnioSaNhrkAVQF6nofr2IyHKrVygbO9Mo/2a4SBjG038Tx/Duq6QblcnUfTDEyzTVNsWKvV5w9l86yB5ArQd20GvSI9dZPL8y4vRjp9v0ToNnDcv2B2sVKRrzb9A2Wz7Fut1hZg6NkY23l0kYtTm6O+QqRvcjc0aTveP+Di8v9yBWaVbcuisLZKPreCJF1jZ2MNq1LAMQ3crLK3HJjVlzzfxxLg+kqO4voqSXuHr89buPKWOKASBAHe0qCy2HAOXs+xIaJv5enK29y8kUdVNAH6S4NZ5d/s7xgEjpJVXwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Exif/Untitled.png&quot;
        title=&quot;Exif/Untitled.png&quot;
        src=&quot;/static/00ee62c5563234ab7ba1b076bdeba1df/463a7/METADATA-EXIF-Untitled.png&quot;
        srcset=&quot;/static/00ee62c5563234ab7ba1b076bdeba1df/8890b/METADATA-EXIF-Untitled.png 293w,
/static/00ee62c5563234ab7ba1b076bdeba1df/1f316/METADATA-EXIF-Untitled.png 585w,
/static/00ee62c5563234ab7ba1b076bdeba1df/463a7/METADATA-EXIF-Untitled.png 1170w,
/static/00ee62c5563234ab7ba1b076bdeba1df/e8a46/METADATA-EXIF-Untitled.png 1282w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ExifIFD0 은 Exif Data 헤더 중 하나의 영역입니다.&lt;/p&gt;
&lt;p&gt;자바 군에서는 metadata-extractor 라이브러리가 범용적이며, 다음과 같은 클래스를 제공합니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;    /*
     * Copyright 2002-2019 Drew Noakes and contributors
     *
     *    Licensed under the Apache License, Version 2.0 (the &amp;quot;License&amp;quot;);
     *    you may not use this file except in compliance with the License.
     *    You may obtain a copy of the License at
     *
     *        http://www.apache.org/licenses/LICENSE-2.0
     *
     *    Unless required by applicable law or agreed to in writing, software
     *    distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS,
     *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     *    See the License for the specific language governing permissions and
     *    limitations under the License.
     *
     * More information about this project is available at:
     *
     *    https://drewnoakes.com/code/exif/
     *    https://github.com/drewnoakes/metadata-extractor
     */
    
    package com.drew.metadata.exif;
    
    import com.drew.lang.annotations.NotNull;
    
    import java.util.HashMap;
    
    /**
     * Describes Exif tags from the IFD0 directory.
     *
     * @author Drew Noakes https://drewnoakes.com
     */
    @SuppressWarnings(&amp;quot;WeakerAccess&amp;quot;)
    public class ExifIFD0Directory extends ExifDirectoryBase
    {
        /** This tag is a pointer to the Exif SubIFD. */
        public static final int TAG_EXIF_SUB_IFD_OFFSET = 0x8769;
    
        /** This tag is a pointer to the Exif GPS IFD. */
        public static final int TAG_GPS_INFO_OFFSET = 0x8825;
    
        public ExifIFD0Directory()
        {
            this.setDescriptor(new ExifIFD0Descriptor(this));
        }
    
        @NotNull
        private static final HashMap&amp;lt;Integer, String&amp;gt; _tagNameMap = new HashMap&amp;lt;Integer, String&amp;gt;();
    
        static
        {
            addExifTagNames(_tagNameMap);
        }
    
        @Override
        @NotNull
        public String getName()
        {
            return &amp;quot;Exif IFD0&amp;quot;;
        }
    
        @Override
        @NotNull
        protected HashMap&amp;lt;Integer, String&amp;gt; getTagNameMap()
        {
            return _tagNameMap;
        }
    }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;Spock 테스트 코드&lt;/h2&gt;

        &lt;deckgo-highlight-code language=&quot;groovy&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;def &amp;quot;이미지 메타데이터 읽어서 회전시켜 저장하기 테스트&amp;quot;() {
        given:
                // 이미지 부터 mocking ( 애플리케이션 내부 경로에 모나리자 이미지를 넣어놓은 상태입니다.
        def originFileName = &amp;quot;monalisa.jpg&amp;quot;
        def file = new FileInputStream(&amp;quot;sampledata/&amp;quot; + originFileName)
        def fileExt = FilenameUtils.getExtension(originFileName)
        def multipartFile = new MockMultipartFile(&amp;quot;imageFile&amp;quot;, originFileName, fileExt, file)

                // Exif Header에는 여러 영역의 엔트리 들로 나뉘어져 있는데 그 중 내가 원하는 정보는 Exif IFD0 에 있으므로
                // ExifIFD0Directory 클래스 타입을 이용한 metadata 를 얻어낸다.
        def metadata = ImageMetadataReader.readMetadata(multipartFile.getInputStream())
        def dir = metadata.getFirstDirectoryOfType(ExifIFD0Directory.class)
        def orientatation = dir.getInt(ExifIFD0Directory.TAG_ORIENTATION)
        def img = ImageIO.read(multipartFile.getInputStream())
        def width = img.getWidth()
        def height = img.getHeight()
        
                // orientation 값에 의한 아핀 변환 ( 아핀변환은 기회가 되면 다음 포스팅 때 작성해보겠습니다.)
        def tf = new AffineTransform()
        switch (orientatation) {
            case 1:
                break;
            case 2:
                tf.scale(-1.0, 1.0)
                tf.translate(-width , 0)
                break;
            case 3: // PI rotation
                tf.translate(width, height)
                tf.rotate(Math.PI)
                break
            case 4: // Flip Y
                tf.scale(1.0, -1.0)
                tf.translate(0, -height)
                break
            case 5: // - PI/2 and Flip X
                tf.rotate(-Math.PI / 2)
                tf.scale(-1.0, 1.0);
                break
            case 6: // -PI/2 and -width
                tf.translate(height, 0)
                tf.rotate(Math.PI / 2)
                break
            case 7: // PI/2 and Flip
                tf.scale(-1.0, 1.0)
                tf.translate(-height, 0)
                tf.translate(0, width)
                tf.rotate( 3 * Math.PI / 2)
                break
            case 8: // PI / 2
                tf.translate(0, width)
                tf.rotate( 3 * Math.PI / 2)
                break
        }
        def uuid = UUID.randomUUID().toString()
        def resizedFile = new File(&amp;quot;sampledata/&amp;quot; + uuid + &amp;quot;.&amp;quot; + fileExt)
        def affineTransformOp = new AffineTransformOp(tf, AffineTransformOp.TYPE_BILINEAR)
        def destinationImage = new BufferedImage(height, width, img.getType())
        destinationImage = affineTransformOp.filter(img , destinationImage)

        expect:
        ImageIO.write(destinationImage, &amp;quot;jpg&amp;quot;, resizedFile)
        orientatation == 5&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;테스트 디버깅&lt;/h2&gt;
&lt;p&gt;테스트 결과 orientatation 값도 정상적으로 찍히고, 변환된 이미지도 잘 생성되었습니다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 438px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f39d35567a165afdeb6e0d71bd868cb8/5e1a4/METADATA-EXIF-Untitled1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 52.218430034129696%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVQoz22S2VLCUBBE81sIKgRZErKS5GYhG1lExfLN7297EgTK8mFqOoF7Mt1ztZWVwncSnNIWal8gZuVhhVrVCPclTD+H6R5gOBkMN4PpHWD5BZaGwnTp4/Flj9mlS2lrAj0Cz1mHMihRE9arI7r4iIzPW8JsfsQJS+wIF+3yPwK+B92ANoF2jD5ucCRIesrJnLhC1HQIjh2itsfCiIYDT6tg7BfAX6gmlgNOWEQ1djKJqmCxb2lR7IqWj051j+Vfbd6XQH/Bw4QuJ3xjhpJZ1r1CNxWe1wHm65A9vOr5ZqwRfqv7SbUNgbalcEoanJhbTqgtlpmZwwy9qBp0yIyDpKWusNqlEGdSSyPGwx10XIqdoKTljCUQOSTh20E5dFnAof5E9/6NvPlCVp1RtF8oqJPyg5Fktwllix4nTHkVFIEJYZZsMxinlI1aw5aZsc9r5BV8rga9dXJ4qoHBd7/WtRmFy832zRk9ATltvZgJK8baSqBvo0HPNxEmc2ew97BwWWN+k4u+WpaXz7ykMrbBrvOw/HAN/aL/u3N/Ny39B7U2gdUNkMpsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Exif/Untitled%201.png&quot;
        title=&quot;Exif/Untitled%201.png&quot;
        src=&quot;/static/f39d35567a165afdeb6e0d71bd868cb8/5e1a4/METADATA-EXIF-Untitled1.png&quot;
        srcset=&quot;/static/f39d35567a165afdeb6e0d71bd868cb8/8890b/METADATA-EXIF-Untitled1.png 293w,
/static/f39d35567a165afdeb6e0d71bd868cb8/5e1a4/METADATA-EXIF-Untitled1.png 438w&quot;
        sizes=&quot;(max-width: 438px) 100vw, 438px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;br&gt;
확인해볼까요?&lt;/p&gt;
&lt;h2&gt;이미지 변환 결과&lt;/h2&gt;
&lt;p&gt;Mac Preview에서는 오리엔테이션 값에 의해 회전시켜버리기 때문에 online metadata view를 이용했습니다.&lt;/p&gt;
&lt;p&gt;원본&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 324px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/70231d90071d19d6703dece909d9a52f/aec3a/METADATA-EXIF-Untitled2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 45.73378839590443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVQoz42SS0sbYRSGp9iqpBIIqMHYRakBG7wLaq2bllIrFmlCWjeCDHgHSbLwHkRpxZViVdCqWESl2pWKi0IXgiDowpW/JMlikklm8jjfyIgulBy+lxcO5304fBxJ13VUVSWRSNx6Og3GM/VYWRkrp2kaUjKZJJVKmQMCLury4pjz/wuc/lvm59wU26s/WJqZZDo8wWQ4zFAoxPbWljkrIKLi8TiKotwAraau3/jOrwB/5+uYGa6l0mOn8bWN/CyJXEkix5BkqPXjJ3PWWuZR4NHuOGNyOTXuIl4VOvBWuWhwF5Kfl0dJgQNn9hO++vyZA3c2hgi0uPjdV41cX8zVZjOzPdXGZk9pLnPyvjiHL23ezIF/NofZn21iNfiWdx4X/W0eOj64sWXbWJSr6K4roN33LXPg3nqQg6UmgnIFpSUO3pTaqXU+48XzLBpe2rEbf+hr/fwwUDTTxq1YwLOTXU4Op1hbHCEU6OX7aD8rEwOMD3bT1Snj9/pZmJu/BxQwEyi2i8ViRCIRotGo6YqiosQ11KSObhxjSkujGtLuHKYAWRkrJ3rXnrg8tH9eIhMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Exif/Untitled%202.png&quot;
        title=&quot;Exif/Untitled%202.png&quot;
        src=&quot;/static/70231d90071d19d6703dece909d9a52f/aec3a/METADATA-EXIF-Untitled2.png&quot;
        srcset=&quot;/static/70231d90071d19d6703dece909d9a52f/8890b/METADATA-EXIF-Untitled2.png 293w,
/static/70231d90071d19d6703dece909d9a52f/aec3a/METADATA-EXIF-Untitled2.png 324w&quot;
        sizes=&quot;(max-width: 324px) 100vw, 324px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;변형본&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 311px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0118e80223e7c09875272c24f9803633/fe4a0/METADATA-EXIF-Untitled3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 47.098976109215016%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUElEQVQoz42SP0vDQBjG41qLoOASqKAoCAVBKE4RBcGtOqko2KqIRYUO7gqC4uQiQuhSsKDQxaGCY+0ncNPBb5H/yd0lj7krV9sYwQce7i7ve79739wpnueBEIIgCFJM4AcMLIrE6PkEJCWP7+cc3/eh8ElSURSK8eujg6Zehn5TxtP9Ht5aV6CUIU2UUpim+QOM4iqkw7C76fP9GdXdSRwt5VA7m8Pd9YaoOpkvgZZlDQKlGOsCX18eMTuRwcnKNNYWVKwXl+P26EB+P/BXhUlgq/mAqZEh3B4XsLmo4rCo9WL/AkrzIFejXkdGUaCOjWJmfBhbqxoIpakt84sZaLlfsoqarkOJgVoui9J8FoV8vgdMuxQBdBxHAPgHaf4UuDrtNkrbO6hWKjg92Mfl+YWIJfP5mhcmWrZtW0ySNgwDrusijFtiYSgs/9Nf+fywb849hLY6J9/0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Exif/Untitled%203.png&quot;
        title=&quot;Exif/Untitled%203.png&quot;
        src=&quot;/static/0118e80223e7c09875272c24f9803633/fe4a0/METADATA-EXIF-Untitled3.png&quot;
        srcset=&quot;/static/0118e80223e7c09875272c24f9803633/8890b/METADATA-EXIF-Untitled3.png 293w,
/static/0118e80223e7c09875272c24f9803633/fe4a0/METADATA-EXIF-Untitled3.png 311w&quot;
        sizes=&quot;(max-width: 311px) 100vw, 311px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 이미지의 메타데이터 정보 Exif를 활용해 서버사이드에서 이미지를 회전해 저장시키는 방법을 알아봤습니다. 물론 이 방법 외에도 수많은 다양한 방법들이 있으니 시도해보시는 것도 좋을 것 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;u&gt;&lt;span style=&quot;color:#e96900;&quot;&gt;
혹시나 잘못된 점이 있거나 정보가 틀렸다면 반드시 코멘트 혹은 &lt;a href=&quot;mailto:thxwelchs@gmail.com&quot;&gt;이메일&lt;/a&gt;로 알려주시면 감사하겠습니다!
&lt;/span&gt;&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;참고&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://namu.wiki/w/EXIF&quot;&gt;https://namu.wiki/w/EXIF&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/21951892/how-to-determine-and-auto-rotate-images&quot;&gt;https://stackoverflow.com/questions/21951892/how-to-determine-and-auto-rotate-images&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[SOLID 5원칙]]></title><description><![CDATA[에피소드 예전에 전 직장 동료 분들과 함께 하는 점심 식사 자리에서 데이터 모델링에 대한 심화 적인(?) 주제로 대화를 나누다가
객체지향에 대한 주제로 번졌고, 그 중 동료분이 “SOLID 아시죠?” 라는 질문에 저는 “가수 SOLID…]]></description><link>https://thxwelchs.github.io/SOLID/</link><guid isPermaLink="false">https://thxwelchs.github.io/SOLID/</guid><pubDate>Tue, 21 Jan 2020 22:01:55 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;에피소드&lt;/em&gt;&lt;br&gt;
예전에 전 직장 동료 분들과 함께 하는 점심 식사 자리에서 데이터 모델링에 대한 심화 적인(?) 주제로 대화를 나누다가
객체지향에 대한 주제로 번졌고,&lt;br&gt;
그 중 동료분이 “SOLID 아시죠?” 라는 질문에 저는 “가수 SOLID요?” 라고 답을 하고 서로 폭소 했던 기억이 있습니다 ㅋㅋㅋ(실화입니다.) 전공 시간 중 객체지향이라는 과목에서 배우며 넘어갔던 기억이 살짝 스쳤는데 내가 SOLID도 모르고 객체지향 언어를 다루는게 정말 맞는걸까? 라는 생각도 들고 참 여러가지 생각이 많았습니다.&lt;/p&gt;
&lt;p&gt;어쨌든 지금부터라도 클린 코드를 위해 다시 제대로 알고 가자 라는 의미에서 이 글을 적게 되었습니다. &lt;/p&gt;
&lt;p&gt;먼저 &lt;em&gt;SOLID&lt;/em&gt;는 다섯개의 원칙인데, 각 원칙의 앞 글자를 모두 따서 S.O.L.I.D가 됩니다.  (정말 앞글자만 따서 SOLID가 된걸까요? 아시는 분 계시면 코멘트 부탁드립니다.)&lt;/p&gt;
&lt;p&gt;어쨌든 SOLID는 이미 객체지향적 프로그래밍 방법론에 있어서는 거의 성경이라고 불릴 만한 어마어마한 원칙인데요 그럼에도 불구하고 다음과 같은 의문을 가질 수도 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SOLID 5원칙을 지키면 훌륭한 객체 지향 디자인을 할 수 있을까요?&lt;/code&gt; 네, 적어도 안 지키는 것보단 나을거라고 생각합니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SOLID 5원칙을 지키면 어떤 게 좋은데요?&lt;/code&gt; 유연하고 확장성 있는 객체를 설계하여, 똑똑한 소프트웨어를 만들 수 있습니다. (흔히 말하는 후발 주자로 들어온 개발자가 똥을 치워야 하는 일이 줄어드는!?)&lt;/p&gt;
&lt;h1&gt;SRP(Single responsibility principle) 단일 책임 원칙&lt;/h1&gt;
&lt;p&gt;객체(Class) 는 단 &lt;em&gt;하나의 책임을 가진다.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;이는 클래스의 역할과 책임에 너무 많은 것을 부여하려고 하면 안된다 라고 해석해도 될 것 같습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class 계산 {
    public int 사칙연산(int args...) {
    
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 와 같이 계산 클래스가 있다고 가정해봅시다. 이 상태의 계산 클래스는 오직 사칙연산 기능만을 책임지고 있는 것을 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;그런데 이 때 만약 이 프로그램이 대대적인 수정이 필요하게 되었다면? 계산 클래스가 수정 될 만한 사유는 사칙연산 메소드에 관련 된 문제 뿐이라고 개발자는 쉽게 판단할 수 있습니다. 이처럼 &lt;strong&gt;단일 책임 원칙&lt;/strong&gt;은 객체(Class)의 목적을 명확히 함으로써 구조가 난잡해지거나 수정사항이 불필요하게 넓게 퍼지는 것을 예방하고 기능을 명확히 분리할 수 있게 합니다.&lt;/p&gt;
&lt;h1&gt;OCP(Open-Closed Principle) 개방-폐쇄 원칙&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;객체(Class)는 확장에 대해서는 개방적이고 수정에 대해서는 폐쇄적이어야 한다&lt;/em&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class 유닛 {
    // 공통필드...
    private String 이름;
    private Integer 체력;
    private Double 속도;

    public void 이동(int x, int y) {

    }
    // ...

    
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위 와 같이 스타크래프트의 유닛을 객체로 디자인하고 있습니다.  이런저런 공통사항을 생각하며 메소드와 필드를 정의하고, 이 중에는 이동 메소드도 있습니다. 이동 메소드는 단순히 이동 위치를 매개변수로 받아, 유닛 속도에 따라서 대상 위치까지 이동시키는 메소드 입니다. 그런데 브루들링 같은 유닛은 이동시 그냥 이동되지 않고 기묘하게 움직이며 이동 해야 합니다. &lt;/p&gt;
&lt;p&gt;이럴 때 유닛 클래스의 이동 메소드를 수정하는 것이 아니라, 서브클래스로서 브루들링 이라는 유닛을 상속받는 클래스를 생성한 후  브루들링만의 이동메소드를 재 정의 해주어야 합니다. &lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;class 브루들링 extends 유닛 {
    @Override
    public void 이동(int x, int y) {
        //...
    }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;이렇게 하면 기존의 유닛 클래스의 이동 메소드는 수정할 필요 없고(수정 폐쇄), 브루들링 클래스의 이동 메소드를 재정의(확장성 개방) 하여 개방-폐쇄 원칙을 지킬 수 있습니다. &lt;/p&gt;
&lt;h1&gt;LSP (Liskov Substitution Principle) 리스코프 치환 원칙&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;서브 클래스는 언제나 슈퍼클래스를 대체할 수 있다&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;is-a 관계가 망가지지 않아야 하는 구조를 말합니다.&lt;/p&gt;
&lt;p&gt;is-a 관계란? 해석 되는대로 “~는 ~이다.” 가 성립이 되는 관계를 뜻 합니다. &lt;/p&gt;
&lt;p&gt;예를 들어 위 OCP에서 브루들링은 유닛이다. 가 성립하고 있습니다. 이처럼 상속관계를 is-a 로 표현했을 때 어색하지 않을 것을 is-a 관계가 성립된다고 볼 수 있습니다.&lt;/p&gt;
&lt;p&gt;또한 업캐스팅이 가능한 상속 관계여야 합니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;브루들링 b = new 브루들링();
유닛 u = (유닛) b;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h1&gt;ISP (Interface Segregation Principle) 인터페이스 분리 원칙&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;클라이언트가 자신이 이용하지 않는 메서드에 의존하지 않아야 한다&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;얼핏 보면 OCP와 비슷하면서도 다른 원칙인데, 또 스타크래프트 도메인을 가지고 예를 들어보겠습니다.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;interface 공격 {
    공중공격();
    지상공격();
}

class 저글링 extends 유닛 implements 공격 {
    @Override
    공중공격() {} // 쓸모없음
    @Override
    지상공격() {}
}

class 발키리 extends 유닛 implements 공격 {
    @Override
    공중공격() {} 
    @Override
    지상공격() {} // 쓸모없음
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;위와 같은 유닛이 공격할 수 있는 메소드를 가지고 있는 공격 인터페이스가 설계 되어 있다면 공격이 가능한 유닛은 위 인터페이스를 구현할 것입니다. 그런데 만약 저글링과 같은 지상 공격만 할 수 있거나, 발키리와 같이 공중공격만 하는 한가지의 공격만 할 수 있는 유닛 타입에서는 강제적으로 다른 타입의 공격메소드도 구현받아야 할 것입니다. 그렇다면 이 구조는 ISP가 지켜지지 않은 구조 이므로 인터페이스 설계를 다시 해야 합니다.  일반적인 방법으론 인터페이스 역할에 맞게 분리하는 방법이 있습니다.&lt;br&gt;
그렇다고 너무 잘게 쪼개는 것은 비권장되는 방법이라고 합니다. (역할의 기준을 명확하게 나눌 수 있을때만 분리하는 것이 좋을 것 같습니다.)&lt;/p&gt;
&lt;h1&gt;DIP (Dependency Inversion Principle) 의존성 역전 원칙&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;추상성이 높고 안정적인 고수준의 클래스는 구체적이고 불안정한 저수준의 클래스에 의존해서는 안된다&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;고수준: 의미있는 단일 기능&lt;/p&gt;
&lt;p&gt;저수준: 고수준을 구현하기 위해 필요한 하위 기능들&lt;/p&gt;
&lt;p&gt;위 말 자체로는 되게 추상적이고 바로 와닿지 않아서 제일 이해하기 힘든 부분이었는데, 타 블로그를 많이 서치해보면서 이해하게 되었습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“의존관계를 가지게 하려거든, 자주 변하는 대상 보다는 자주 변하지 않을 대상에게 가지게 하자”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;여기서 자주 변할 대상과 자주 변하지 않을 대상은 이렇게 구분할 수 있습니다.&lt;/p&gt;
&lt;p&gt;자주 변할 대상: 구체적인 방식, 사물&lt;/p&gt;
&lt;p&gt;자주 변하지 않을 대상: 정책, 전략, 흐름 또는 개념같은 추상적인 것&lt;/p&gt;
&lt;p&gt;“나는 김치찌개를 먹는다”, “나는 된장찌개를 먹는다” 등 먹는다 라는 사실 자체보다는 먹을 대상에 대한 부분이 변화를 일으킬 가능성이 높음&lt;/p&gt;
&lt;p&gt;DIP를 만족시키는 설계를 하기 위해서는 인터페이스나 추상클래스는 자주 변하지 않을 대상으로  모델링 하는게 좋고,&lt;/p&gt;
&lt;p&gt;구현체 클래스는 자주 변할 수 있는 대상을 타겟으로 잡는 것이 좋습니다.&lt;/p&gt;
&lt;p&gt;DIP가 만족될 시 비로소 DI(의존성 주입)를 적극 활용하여 유연한 소프트웨어를 만들 수 있는 기반을 가지게 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;DI는 객체 간에 의존성을 최대한 줄이고 외부에서 객체를 생성하여 주입 해줌으로써 변경이 잦은 소프트웨어라 하더라도 의존 관계를 무너뜨리지 않고 수정할 수 있게 합니다. (이미 우리는 DI를 활용하여 프로그래밍 하고 있습니다. &lt;code class=&quot;language-text&quot;&gt;@Autowired&lt;/code&gt; 필드 주입, 생성자 파라미터 주입 등)&lt;/p&gt;
&lt;h3&gt;참고&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://namu.wiki/w/%EA%B0%9D%EC%B2%B4%20%EC%A7%80%ED%96%A5%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/%EC%9B%90%EC%B9%99#rfn-1&quot;&gt;https://namu.wiki/w/객체 지향 프로그래밍/원칙#rfn-1&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[JPA Locking]]></title><description><![CDATA[낙관적 락 충돌이 발생하지 않을 거라고 낙관적으로 가정하는 방법 데이터베이스 레벨이 아닌 JPA레벨에서 버전 관리 기능을 통해 구현되어있음 테이블에 version…]]></description><link>https://thxwelchs.github.io/JPA-locking/</link><guid isPermaLink="false">https://thxwelchs.github.io/JPA-locking/</guid><pubDate>Mon, 20 Jan 2020 22:11:55 GMT</pubDate><content:encoded>&lt;h2&gt;낙관적 락&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;충돌이 발생하지 않을 거라고 낙관적으로 가정하는 방법&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;데이터베이스 레벨이 아닌 JPA레벨에서 버전 관리 기능을 통해 구현되어있음&lt;/p&gt;
&lt;p&gt;테이블에 version 관리를 할 컬럼을 지정해놓고&lt;/p&gt;
&lt;p&gt;읽었을 때의 버전과, 변경 할 때의 버전이 같지 않으면 예외(OptimisticLockException)를 발생시켜서 다른 트랜잭션에서의 데이터 접근을 막습니다.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;낙관적 락 종류&lt;/em&gt; 에는 네가지 타입이 있습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NONE: 낙관적 잠금을 사용하지 않음.&lt;/li&gt;
&lt;li&gt;VERSION: &lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt; 어노테이션이 붙어있는 컬럼을 조건으로 낙관적 락을 시행 ( 이 컬럼을 기준으로 락 버전을 관리함&lt;/li&gt;
&lt;li&gt;DIRTY: 변경된 필드에 의해서 낙관적 락 사용&lt;/li&gt;
&lt;li&gt;ALL: 모든 필드를 충돌감지의 조건으로 사용&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;DIRTY나 ALL  타입으로 낙관적 락을 사용할 경우, 버전 컬럼이 없어도 락을 걸 수 있는데, ALL타입은 전체 컬럼의 값 비교로 락을 컨트롤 합니다. 이 때 주의해야 할 점은 &lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt; 어노테이션을 달아주는 것이 좋습니다.&lt;/p&gt;
&lt;p&gt;왜냐하면 하이버네이트는 업데이트 할 엔티티의 상태가 변화할 때, save 메소드를 호출하지 않아도 값이 기존 값과 비교하여 변경됐을 때 값이 어느정도로 변화했는지 체크해서 변경 쿼리를 날립니다. 이 때 상태 변경 감지 하는 걸 Dirty Checking 이라고 하는데, Dirty한 상황이 일어났을 때 하이버네이트는 전체 컬럼에 대한 값 변경을 시도합니다. 이럴 때 진짜 변화가 일어난 컬럼만 업데이트에 반영되도록  &lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt; 어노테이션을 달아주는 것이 좋다고 합니다.&lt;/p&gt;
&lt;h2&gt;비관적 락&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;충돌이 발생할 것이라고 우선적으로 가정하고 락을 거는 방법&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;데이터베이스 레벨에서의 락 기능을 사용하는데, 대표적인 레코드락을 사용&lt;/p&gt;
&lt;p&gt;FOR UPDATE(exclusive), LOCK IN SHARE MODE(shared mode) 을 거는 방법&lt;/p&gt;

        &lt;deckgo-highlight-code  &gt;
          &lt;code slot=&quot;code&quot;&gt;-- innoDB 테이블에 대해 걸 수 있는 레코드 락은 반드시 auto-commit이 비활성화 상태 이거나, 
-- 트랜잭션을 직접 제어하는 상태에서만 Lock을 컨트롤 할 수 있습니다.
-- 현재 AutoCommit 값 확인 ( 1 = O, 0 = X )
SELECT @@AUTOCOMMIT;

-- AutoCommit 해제
SET AUTOCOMMIT = 0;

BEGIN;

-- shared mode
SELECT 
t.*
FROM test_table t
WHERE t.id = 10
 FOR UPDATE;
-- LOCK IN SHARE MODE;


/**
실제로 다른 세션에서 해당 t.id = 10인 레코드에 접근하려는 READ(FOR UPDATE), WRITE SQL을 실행했을 때, 
해당 레코드가 LOCK 이 걸려 있으므로 대기상태로 빠짐 (COMMIT 하기 전 까지)
*/
COMMIT;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;shared mode = 내가 락을 건 이상 다른 세션에서 UPDATE나 DELETE는 못하게 하는 것&lt;/p&gt;
&lt;p&gt;exclusive mode = 내가 락을 걸면 다른 트랜잭션에서는 읽기 쓰기도 못하게 하는 것 ( 읽기를 못한다는 것은, 단순 SELECT 문은 허용되나, exclusive mode를 하려고 하는 읽기에 대한 부분만 해당됩니다, 인덱스가 exclusive lock이 걸려 있다면, 대기상태로 돌려짐)&lt;/p&gt;
&lt;h1&gt;추가 보너스!&lt;/h1&gt;
&lt;p&gt;위에서 소개한 JPA레벨에서의 잠금을 설정하는 Optimistic Lock (낙관적 잠금)을 할 때
&lt;code class=&quot;language-text&quot;&gt;@Version&lt;/code&gt; 어노테이션이 존재하는 엔티티에서는 &lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt;를 명시해주는게 좋다고 했었죠? 그런데 어차피 모든 필드를 항상 업데이트 할 것도 아닌데 당연히 명시해주면 무조건 좋은거 아닐까? 라는 생각을 하던 찰나에 선임 분께 찾아볼것을 권유 받았습니다. 그래서 &lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt;를 사용했을 때의 장단점과 어떨 때 사용해야 할지 찾아봤습니다.&lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt; 장점&lt;/h2&gt;
&lt;p&gt;상태가 변화된 Dirty한 필드 만을 대상으로 UPDATE SET 절 쿼리를 수행합니다. (Dirty하다는 것은 필드의 데이터 값이 기존의 origin 값과 달라졌다는 뜻입니다.)&lt;/p&gt;
&lt;h2&gt;&lt;code class=&quot;language-text&quot;&gt;@DynamicUpdate&lt;/code&gt; 단점&lt;/h2&gt;
&lt;p&gt;JPA 구현체인 hibernate는  애플리케이션이 처음 로드 될 때, 엔티티 들을 스캔 하여 모든 필드를 업데이트 할 쿼리로 캐싱 해놓고 업데이트 할 때 마다 메모리에 캐시 된 쿼리를 사용하는 것인데, @DynamicUpdate를 명시 해주면, 업데이트 할 컬럼만 UPDATE SET 절에 포함시키기 위해 캐시 된 쿼리를 사용하지 못하고 업데이트 할 때마다 동적 쿼리를 생성해야 합니다.
​&lt;/p&gt;
&lt;p&gt;따라서 @DynamicUpdate는 업데이트 시 무의미한 필드 들이 많이 존재하는 엔티티 이면서 업데이트 시  오버헤드가 많이 발생하는 경우에 사용해야 할 것 같습니다.&lt;/p&gt;
&lt;p&gt;​덧붙여서, JPA @Version 어노테이션으로 명시 해놓은 버전 필드가 있는 엔티티의 Optimistic Lock(낙관적 락)을 사용하고자 할 때는 @DynamicUpdate를 사용하는 것이 좋습니다. (@Version 필드만 업데이트 해야 하는 경우가 분명하기 때문에)&lt;/p&gt;
&lt;p&gt;&lt;u&gt;&lt;span style=&quot;color:#e96900;&quot;&gt;
혹시나 잘못된 점이 있거나 정보가 틀렸다면 반드시 코멘트 혹은 &lt;a href=&quot;mailto:thxwelchs@gmail.com&quot;&gt;이메일&lt;/a&gt;로 알려주시면 감사하겠습니다!
&lt;/span&gt;&lt;/u&gt;&lt;/p&gt;
&lt;h3&gt;참고&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://effectivesquid.tistory.com/category/Server/JPA&quot;&gt;https://effectivesquid.tistory.com/category/Server/JPA&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://lng1982.tistory.com/289&quot;&gt;https://lng1982.tistory.com/289&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://jojoldu.tistory.com/415&quot;&gt;https://jojoldu.tistory.com/415&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;https://www.baeldung.com/spring-data-jpa-dynamicupdate&quot;&gt;https://www.baeldung.com/spring-data-jpa-dynamicupdate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[AOP 관점지향프로그래밍]]></title><description><![CDATA[AOP…]]></description><link>https://thxwelchs.github.io/AOP/</link><guid isPermaLink="false">https://thxwelchs.github.io/AOP/</guid><pubDate>Fri, 22 Nov 2019 19:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;AOP&lt;/h1&gt;
&lt;p&gt;직역하면 &lt;strong&gt;관점지향프로그래밍&lt;/strong&gt; 인데, 한국말로 들으면 전혀 와닿지 않습니다.&lt;/p&gt;
&lt;p&gt;좀 더 이해가 가기 쉬운 의미로 해석해보자면, &lt;strong&gt;애플리케이션 전체에 걸쳐 사용되는 기능을 재사용하도록 지원하는 것&lt;/strong&gt;입니다.&lt;/p&gt;
&lt;p&gt;실무에서는 흔히 공통적인 흐름의 코드를 적용시켜 줄 때 주로 사용합니다.&lt;/p&gt;
&lt;p&gt;지금 이 글에서는 AOP를 구현하는 방법들에 대해 이론만 설명하겠습니다.&lt;/p&gt;
&lt;p&gt;AOP를 구현하는 방뻡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;컴파일
코드 파일을 컴파일링 할 때 AspectJ 라는 걸로 AOP를 구현하는 코드를 넣은 것 처럼 컴파일 해줍니다.&lt;/li&gt;
&lt;li&gt;바이트 코드 조작
컴파일 된 클래스 파일에는 실제로 AOP에 대한 코드는 컴파일 되어있지 않지만, 코드를 실행하기 위해 클래스 로더가 클래스를  읽을 때 메모리 상에서 바이트 코드를 조작하여 AOP를 구현 해줍니다. (이것 역시 AspectJ에서도 지원)&lt;/li&gt;
&lt;li&gt;프록시 패턴
스프링에서 사용하는 핵심적인 기능
&lt;strong&gt;Proxy:&lt;/strong&gt; 클라이언트 레벨에서의 코드 변경이 필요하지 않게 하면서, 실제 내부적으로는 같은 인터페이스를 구현하고 있는 원래의 클래스를 감싸고 있는 형태의 대체 객체를 사용하는 것입니다.
스프링 에서는 이러한 개념을 사용해서  AOP를 프록시 객체에서 구현 해줍니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;참고&lt;/h3&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://jojoldu.tistory.com/71&quot;&gt;https://jojoldu.tistory.com/71&lt;/a&gt;\&lt;/li&gt;
&lt;li&gt;“백기선”님의 스프링 프레임워크 AOP강좌&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Github Source]]></title><description><![CDATA[You’ll find the source of this blog on GitHub. GitHub - https://github.com/scttcper/gatsby-casper Getting Started Clone this repo. Remove…]]></description><link>https://thxwelchs.github.io/github-link/</link><guid isPermaLink="false">https://thxwelchs.github.io/github-link/</guid><pubDate>Sun, 10 Mar 2019 10:00:00 GMT</pubDate><content:encoded>&lt;p&gt;You’ll find the source of this blog on GitHub.&lt;br&gt;
GitHub - &lt;a href=&quot;https://github.com/scttcper/gatsby-casper&quot;&gt;https://github.com/scttcper/gatsby-casper&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Getting Started&lt;/h3&gt;
&lt;p&gt;Clone this repo.&lt;/p&gt;

        &lt;deckgo-highlight-code  &gt;
          &lt;code slot=&quot;code&quot;&gt;git clone https://github.com/scttcper/gatsby-casper.git --depth=1&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Remove .git folder and setup a new one&lt;/p&gt;

        &lt;deckgo-highlight-code  &gt;
          &lt;code slot=&quot;code&quot;&gt;rm -rf .git &amp;amp;&amp;amp; git init&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Now push to whatever repo you want!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A Full and Comprehensive Style Test]]></title><description><![CDATA[Below is just about everything you’ll need to style in the theme. Check the source code to see the many embedded elements within paragraphs…]]></description><link>https://thxwelchs.github.io/a-full-style-test/</link><guid isPermaLink="false">https://thxwelchs.github.io/a-full-style-test/</guid><pubDate>Sun, 30 Sep 2018 07:03:47 GMT</pubDate><content:encoded>&lt;p&gt;Below is just about everything you’ll need to style in the theme. Check the source code to see the many embedded elements within paragraphs.&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Heading 1&lt;/h1&gt;
&lt;h2&gt;Heading 2&lt;/h2&gt;
&lt;h3&gt;Heading 3&lt;/h3&gt;
&lt;h4&gt;Heading 4&lt;/h4&gt;
&lt;h5&gt;Heading 5&lt;/h5&gt;
&lt;h6&gt;Heading 6&lt;/h6&gt;
&lt;hr&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, &lt;a href=&quot;&quot;&gt;test link&lt;/a&gt; adipiscing elit. &lt;strong&gt;This is strong.&lt;/strong&gt; Nullam dignissim convallis est. Quisque aliquam. &lt;em&gt;This is emphasized.&lt;/em&gt; Donec faucibus. Nunc iaculis suscipit dui. 5&lt;sup&gt;3&lt;/sup&gt; = 125. Water is H&lt;sub&gt;2&lt;/sub&gt;O. Nam sit amet sem. Aliquam libero nisi, imperdiet at, tincidunt nec, gravida vehicula, nisl. &lt;cite&gt;The New York Times&lt;/cite&gt; (That’s a citation). &lt;span style=&quot;text-decoration:underline;&quot;&gt;Underline&lt;/span&gt;. Maecenas ornare tortor. Donec sed tellus eget sapien fringilla nonummy. Mauris a ante. Suspendisse quam sem, consequat at, commodo vitae, feugiat in, nunc. Morbi imperdiet augue quis tellus.&lt;/p&gt;
&lt;p&gt;&lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt; and &lt;abbr title=&quot;Cascading Style Sheets&quot;&gt;CSS&lt;/abbr&gt; are our tools. Mauris a ante. Suspendisse quam sem, consequat at, commodo vitae, feugiat in, nunc. Morbi imperdiet augue quis tellus. Praesent mattis, massa quis luctus fermentum, turpis mi volutpat justo, eu volutpat enim diam eget metus. To copy a file type &lt;code class=&quot;language-text&quot;&gt;COPY filename&lt;/code&gt;. &lt;del&gt;Dinner’s at 5:00.&lt;/del&gt; &lt;span style=&quot;text-decoration:underline;&quot;&gt;Let’s make that 7&lt;/span&gt;. This &lt;del&gt;text&lt;/del&gt; has been struck.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Media&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore.&lt;/p&gt;
&lt;h3&gt;Big Image&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1080px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.55290102389078%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAdNeMx1yIr//xAAbEAADAAIDAAAAAAAAAAAAAAAAAQMCEQQSE//aAAgBAQABBQKVMVXkV6r1yENm9H//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAESMRARIv/aAAgBAQAGPwJ9KOhRZZRWP//EABkQAQEAAwEAAAAAAAAAAAAAAAEAESFhQf/aAAgBAQABPyHwCAYwbneSXq4uKFoX/9oADAMBAAIAAwAAABBvz//EABcRAQADAAAAAAAAAAAAAAAAAAABESH/2gAIAQMBAT8QimP/xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8QTO3/xAAcEAEBAAICAwAAAAAAAAAAAAABEQBRITFxgfH/2gAIAQEAAT8Qe2BgQ+94BylJ1rFrT5DBvKzZgLOL3g1Yaz//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Test Image&quot;
        title=&quot;Test Image&quot;
        src=&quot;/static/8bafcea43f0bc141b01ef5b43dd2003b/797d6/testimg1.jpg&quot;
        srcset=&quot;/static/8bafcea43f0bc141b01ef5b43dd2003b/3c01f/testimg1.jpg 293w,
/static/8bafcea43f0bc141b01ef5b43dd2003b/e1991/testimg1.jpg 585w,
/static/8bafcea43f0bc141b01ef5b43dd2003b/797d6/testimg1.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.&lt;/p&gt;
&lt;h3&gt;Small Image&lt;/h3&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.31399317406143%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGFkxLgWJ//xAAZEAEAAgMAAAAAAAAAAAAAAAACARIQETH/2gAIAQEAAQUCM1JVk52hxY//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAAAQIhERIg/9oACAEBAAY/AlIe1UZ4/8QAGxABAAICAwAAAAAAAAAAAAAAAQAhETEQQVH/2gAIAQEAAT8hrPRhjoxBlqmA3qLXqVKeP//aAAwDAQACAAMAAAAQVz//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAwEBPxCH/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFB/9oACAECAQE/ENR//8QAGhABAQEBAQEBAAAAAAAAAAAAAREhAEEx8P/aAAgBAQABPxDCCoF88ePCmeC5t/bxkSazmbtTE5s0nyW84vf/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Small Test Image&quot;
        title=&quot;Small Test Image&quot;
        src=&quot;/static/b629d579b1c63df6750fc11d47141796/37e03/testimg2.jpg&quot;
        srcset=&quot;/static/b629d579b1c63df6750fc11d47141796/3c01f/testimg2.jpg 293w,
/static/b629d579b1c63df6750fc11d47141796/37e03/testimg2.jpg 300w&quot;
        sizes=&quot;(max-width: 300px) 100vw, 300px&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Labore et dolore.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;List Types&lt;/h2&gt;
&lt;h3&gt;Definition List&lt;/h3&gt;
&lt;p&gt;Definition List Title
: This is a definition list division.&lt;/p&gt;
&lt;p&gt;Definition
: An exact statement or description of the nature, scope, or meaning of something: &lt;em&gt;our definition of what constitutes poetry.&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;Ordered List&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;List Item 1&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;List Item 2&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Nested list item A&lt;/li&gt;
&lt;li&gt;Nested list item B&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;List Item 3&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Unordered List&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;List Item 1&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;List Item 2&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nested list item A&lt;/li&gt;
&lt;li&gt;Nested list item B&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;List Item 3&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;Table&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;Table Header 1&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Table Header 2&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;Table Header 3&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;Division 1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;Division 1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;Division 1&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Division 3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2&gt;Preformatted Text&lt;/h2&gt;
&lt;p&gt;Typographically, preformatted text is not the same thing as code. Sometimes, a faithful execution of the text requires preformatted text that may not have anything to do with code. Most browsers use Courier and that’s a good default — with one slight adjustment, Courier 10 Pitch over regular Courier for Linux users.&lt;/p&gt;
&lt;h3&gt;Code&lt;/h3&gt;
&lt;p&gt;Code can be presented inline, like &lt;code class=&quot;language-text&quot;&gt;&amp;lt;?php bloginfo(&amp;#39;stylesheet_url&amp;#39;); ?&amp;gt;&lt;/code&gt;, or using &lt;a href=&quot;http://jekyllrb.com/docs/templates/#code-snippet-highlighting&quot;&gt;jekyll’s highlight
filter&lt;/a&gt; to
highlight a block of code. Because we have more specific typographic needs for code, we’ll specify Consolas and Monaco ahead of the browser-defined monospace font.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;css&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;#container {
    float: left;
    margin: 0 -240px 0 0;
    width: 100%;
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;hr&gt;
&lt;h2&gt;Blockquotes&lt;/h2&gt;
&lt;p&gt;Let’s keep it simple. Italics are good to help set it off from the body text. Be sure to style the citation.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Good afternoon, gentlemen. I am a HAL 9000 computer. I became operational at the H.A.L. plant in Urbana, Illinois on the 12th of January 1992. My instructor was Mr. Langley, and he taught me to sing a song. If you’d like to hear it I can sing it for you. — &lt;a href=&quot;http://en.wikipedia.org/wiki/HAL_9000&quot;&gt;HAL 9000&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And here’s a bit of trailing text.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Text-level semantics&lt;/h2&gt;
&lt;p&gt;&lt;abbr title=&quot;Hyper Text Markup Language&quot;&gt;HTML&lt;/abbr&gt; elements&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;#&quot;&gt;a element&lt;/a&gt; example &lt;br&gt;
The &lt;abbr&gt;abbr element&lt;/abbr&gt; and &lt;abbr title=&quot;Title text&quot;&gt;abbr element with title&lt;/abbr&gt; examples &lt;br&gt;
The &lt;b&gt;b element&lt;/b&gt; example &lt;br&gt;
The &lt;cite&gt;cite element&lt;/cite&gt; example &lt;br&gt;
The &lt;code&gt;code element&lt;/code&gt; example &lt;br&gt;
The &lt;del&gt;del element&lt;/del&gt; example &lt;br&gt;
The &lt;dfn&gt;dfn element&lt;/dfn&gt; and &lt;dfn title=&quot;Title text&quot;&gt;dfn element with title&lt;/dfn&gt; examples &lt;br&gt;
The &lt;em&gt;em element&lt;/em&gt; example &lt;br&gt;
The &lt;i&gt;i element&lt;/i&gt; example &lt;br&gt;
The &lt;ins&gt;ins element&lt;/ins&gt; example &lt;br&gt;
The &lt;kbd&gt;kbd element&lt;/kbd&gt; example &lt;br&gt;
The &lt;mark&gt;mark element&lt;/mark&gt; example &lt;br&gt;
The &lt;q&gt;q element &lt;q&gt;inside&lt;/q&gt; a q element&lt;/q&gt; example &lt;br&gt;
The &lt;s&gt;s element&lt;/s&gt; example &lt;br&gt;
The &lt;samp&gt;samp element&lt;/samp&gt; example &lt;br&gt;
The &lt;small&gt;small element&lt;/small&gt; example &lt;br&gt;
The &lt;span&gt;span element&lt;/span&gt; example &lt;br&gt;
The &lt;strong&gt;strong element&lt;/strong&gt; example &lt;br&gt;
The &lt;sub&gt;sub element&lt;/sub&gt; example &lt;br&gt;
The &lt;sup&gt;sup element&lt;/sup&gt; example &lt;br&gt;
The &lt;var&gt;var element&lt;/var&gt; example &lt;br&gt;
The &lt;u&gt;u element&lt;/u&gt; example&lt;/p&gt;
* * *
&lt;h2&gt;Embeds&lt;/h2&gt;
&lt;p&gt;Sometimes all you want to do is embed a little love from another location and set your post alive.&lt;/p&gt;
&lt;h3&gt;Video&lt;/h3&gt;
&lt;p&gt;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;
&lt;p&gt;Culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;

          &lt;div
            class=&quot;gatsby-resp-iframe-wrapper&quot;
            style=&quot;padding-bottom: 56.166666666666664%; position: relative; height: 0; overflow: hidden;margin-bottom: 1rem&quot;
          &gt;
            &lt;iframe src=&quot;//player.vimeo.com/video/103224792&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen style=&quot;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
          &quot;&gt;&lt;/iframe&gt;
          &lt;/div&gt;
          
&lt;h3&gt;Slides&lt;/h3&gt;
&lt;p&gt;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;
&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;585245d01ee1013238737e42b879906f&quot; data-ratio=&quot;1.77777777777778&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;Culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
&lt;h3&gt;Audio&lt;/h3&gt;
&lt;p&gt;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&lt;/p&gt;
&lt;iframe width=&quot;100%&quot; height=&quot;450&quot; scrolling=&quot;no&quot; frameborder=&quot;no&quot; src=&quot;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/52891122&amp;amp;auto_play=false&amp;amp;hide_related=false&amp;amp;show_comments=true&amp;amp;show_user=true&amp;amp;show_reposts=false&amp;amp;visual=true&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;Culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;
&lt;h3&gt;Code&lt;/h3&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.&lt;/p&gt;
&lt;p data-height=&quot;268&quot; data-theme-id=&quot;0&quot; data-slug-hash=&quot;bcqhe&quot; data-default-tab=&quot;result&quot; data-user=&quot;rglazebrook&quot; class=&apos;codepen&apos;&gt;See the Pen &lt;a href=&apos;http://codepen.io/rglazebrook/pen/bcqhe/&apos;&gt;Simple Rotating Spinner&lt;/a&gt; by Rob Glazebrook (&lt;a href=&apos;http://codepen.io/rglazebrook&apos;&gt;@rglazebrook&lt;/a&gt;) on &lt;a href=&apos;http://codepen.io&apos;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;script async src=&quot;//assets.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;Isn’t it beautiful.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JVM GC종류와 튜닝]]></title><description><![CDATA[GC 종류 먼저 GC에는 크게 Minor GC, Major GC, Full GC가 있는데, Minor GC와 Full GC에서는 GC를 하기위해 JVM으로부터 구동되는 애플리케이션이 모두 stop 되는 stop-the-world…]]></description><link>https://thxwelchs.github.io/JVM-GC/</link><guid isPermaLink="false">https://thxwelchs.github.io/JVM-GC/</guid><pubDate>Wed, 22 Aug 2018 19:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;GC 종류&lt;/h1&gt;
&lt;p&gt;먼저 GC에는 크게 &lt;strong&gt;Minor GC, Major GC, Full GC&lt;/strong&gt;가 있는데, Minor GC와 Full GC에서는 GC를 하기위해 JVM으로부터 구동되는 애플리케이션이 모두 stop 되는 stop-the-world가 상태가 됩니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Serial GC
Mark-Sweep-Compact 알고리즘을 사용하며, Old Generation 영역의 객체들을 식별하면서 Heap 앞 부분부터 체크하며 살아 있는 객체는 남기고 죽은 객체는 삭제하며 힙의 앞쪽으로 모두 몰아줍니다.
이 방식은 GC 알고리즘 중 매우 느린편에 속한다, 하지만 느리게 수행하는 만큼 OS자원은 덜 소모됩니다.&lt;/li&gt;
&lt;li&gt;Parallel GC
이 방식은 Serial GC와 GC를 수행하는 방식은 같습니다, 차이점은 멀티 쓰레드로 병렬적으로 처리한다는 점입니다.
멀티 쓰레드로 처리하기 때문에 수행속도는 빠르며 대신 그만큼 OS자원은 많이 소모됩니다.&lt;/li&gt;
&lt;li&gt;CMS(Concurrent Mark-Sweep)
Parallel GC와 같이 멀티쓰레드로 처리되는 GC이며 대신 Minor GC에서 사용되는 알고리즘은 Concurrent Mark-Sweep을 사용합니다,  애플리케이션의 백그라운드에서 GC를 처리하므로 stop the world 상태가 거의 일어나지 않습니다. 백그라운드에서 GC를 수행해야 하므로 OS 리소스를 많이 소모합니다. 단점으로 중간중간에 존재하는 죽은 객체들을 삭제하며 중간에 의미없이 비어있는 메모리 공간이 생겨 메모리 파편화 현상이 발생, 그러면 결국 메모리부족 현상으로 인해 Serial GC처럼 Mark-Sweep-Compact 알고리즘으로 GC를 수행하게 됩니다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;G1 GC&lt;/p&gt;
&lt;p&gt;CMS의 단점을 극복하기 위해 고안된 GC, Heap영역에 여러 영역을 세분화 하여(Region) 참조가 없어진 객체들을 삭제하기 위해 참조가 존재하고 사용중인 객체들은 특정 Region 영역으로 옮겨 참조가 없어진 객체들이 모여 있는 Region 을 통째로 삭제해버리는 GC 전략, 그러면 중간중간 비어있는 메모리 공간이 줄어들어 메모리 파편화를 해결해줄 수 있다고 합니다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;JVM VM option&lt;/h2&gt;
&lt;h4&gt;Serial GC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-XX:+UseSerialGC	&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Parallel GC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-XX:+UseParallelGC&lt;/li&gt;
&lt;li&gt;-XX:ParallelGCThreads=value	 &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Parallel Compacting GC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-XX:+UseParallelOldGC	 &lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;CMS GC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-XX:+UseConcMarkSweepGC&lt;/li&gt;
&lt;li&gt;-XX:+UseParNewGC&lt;/li&gt;
&lt;li&gt;-XX:+CMSParallelRemarkEnabled&lt;/li&gt;
&lt;li&gt;-XX:CMSInitiatingOccupancyFraction=value&lt;/li&gt;
&lt;li&gt;-XX:+UseCMSInitiatingOccupancyOnly&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;G1 GC&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;-XX:+UnlockExperimentalVMOptions&lt;/li&gt;
&lt;li&gt;-XX:+UseG1GC&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Java Version별 default GC&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;JDK 5, 6 - Serial GC&lt;/li&gt;
&lt;li&gt;JDK 7 - Parallel GC&lt;/li&gt;
&lt;li&gt;JDK 8 - Parallel GC (G1GC라는 글도 있어 직접 설치된 jdk 기준으로 default GC를 살펴본 결과 Parallel GC 였습니다.)&lt;/li&gt;
&lt;li&gt;JDK 9 - G1 GC&lt;/li&gt;
&lt;li&gt;JDK 10 - G1 GC&lt;/li&gt;
&lt;li&gt;JDK 11 - G1 GC&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;현재 내 jdk default gc 살펴보기&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;shell&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;$ java -XX:+PrintCommandLineFlags -version&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;현재 내 jdk default gc 변경하기&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;shell&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;$ java -XX:+UseG1GC -XX:+PrintCommandLineFlags -version&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      </content:encoded></item><item><title><![CDATA[Welcome to Ghost]]></title><description><![CDATA[👋 Welcome, it’s great to have you here. We know that first impressions are important, so we’ve populated your new site with some initial…]]></description><link>https://thxwelchs.github.io/welcome/</link><guid isPermaLink="false">https://thxwelchs.github.io/welcome/</guid><pubDate>Sun, 06 May 2018 23:46:37 GMT</pubDate><content:encoded>&lt;p&gt;👋 Welcome, it’s great to have you here.&lt;/p&gt;
&lt;p&gt;We know that first impressions are important, so we’ve populated your new site with some initial &lt;strong&gt;getting started&lt;/strong&gt; posts that will help you get familiar with everything in no time. This is the first one!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;A few things you should know upfront&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ghost is designed for ambitious, professional publishers who want to actively build a business around their content. That’s who it works best for. &lt;/li&gt;
&lt;li&gt;The entire platform can be modified and customised to suit your needs. It’s very powerful, but does require some knowledge of code. Ghost is not necessarily a good platform for beginners or people who just want a simple personal blog. &lt;/li&gt;
&lt;li&gt;For the best experience we recommend downloading the Ghost Desktop App for your computer, which is the best way to access your Ghost site on a desktop device. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ghost is made by an independent non-profit organisation called the Ghost Foundation. We are 100% self funded by revenue from our Ghost(Pro) service, and every penny we make is re-invested into funding further development of free, open source technology for modern publishing.  &lt;/p&gt;
&lt;p&gt;The version of Ghost you are looking at right now would not have been made possible without generous contributions from the open source community.  &lt;/p&gt;
&lt;h2&gt;Next up, the editor&lt;/h2&gt;
&lt;p&gt;The main thing you’ll want to read about next is probably: the Ghost editor. This is where the good stuff happens.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;By the way, once you’re done reading, you can simply delete the default &lt;strong&gt;Ghost&lt;/strong&gt; user from your team to remove all of these introductory posts! &lt;/p&gt;
&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Java Reflection]]></title><description><![CDATA[Java Reflection 객체를 통해서 객체 클래스 정보를 분석해내는 프로그래밍법을 의미한다.
또한 위키백과에서 설명하기로는 컴퓨터 과학에서의 Reflection…]]></description><link>https://thxwelchs.github.io/reflection/</link><guid isPermaLink="false">https://thxwelchs.github.io/reflection/</guid><pubDate>Mon, 22 Aug 2016 15:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;Java Reflection&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;객체를 통해서 객체 클래스 정보를 분석해내는 프로그래밍법&lt;/strong&gt;을 의미한다.
또한 위키백과에서 설명하기로는 컴퓨터 과학에서의 Reflection(반영)은 &lt;strong&gt;런타임 시점에 사용되는 자신의 구조와 행위를 관리하고 수정할 수 있는 프로세스를 의미&lt;/strong&gt;한다고 한다.&lt;/p&gt;
&lt;h2&gt;그래도 잘 이해가 안가는 Reflection?&lt;/h2&gt;
&lt;p&gt;맞습니다. 사실 저렇게 사전적인 의미만 가지고는 사실상 잘 와닿지 않는 것 같습니다.\&lt;/p&gt;
&lt;p&gt;뭐든 예를 들어보는게 이해가 가장 잘 됐던 것 같아서, 이번에도 한가지 예를 들어보겠습니다.
아시다시피 Java는 컴파일이 필요한 컴파일언어 입니다. java파일로 코드를 작성하고 실행할 땐 컴파일된 class파일을 실행해야 하죠.\&lt;/p&gt;
&lt;p&gt;즉 Java는 기본적으로 정적인 영역에서 타입이 결정되는 언어라는 것입니다.&lt;br&gt;
그런데 미리 정의된 코드가 컴파일 되어 실행되기 때문에 런타임 시점에 타입을 알아야 하는 경우라면??&lt;/p&gt;
&lt;p&gt;이럴 때 사용되는 개념이 &lt;strong&gt;Reflection&lt;/strong&gt;입니다.
\&lt;/p&gt;
&lt;p&gt;이제 이론적인 설명보다는 코드로서 예를 들어보겠습니다.\&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;java&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h1&gt;결론&lt;/h1&gt;
&lt;p&gt;아직 작성중…&lt;/p&gt;</content:encoded></item><item><title><![CDATA[직렬화(Serialization)!?]]></title><description><![CDATA[직렬화 객체의 상태를 저장하기 위해서 객체를 byte stream 으로 변환하는 것을 의미한다. 그 반대는 deserialization(역직렬화) 라고 한다. 흠.. 직렬화를 알고 싶었는데 stream?이 또 뭐란 말인가? 컴퓨터의 stream…]]></description><link>https://thxwelchs.github.io/serialization-marshalling/</link><guid isPermaLink="false">https://thxwelchs.github.io/serialization-marshalling/</guid><pubDate>Sat, 20 Aug 2016 15:11:55 GMT</pubDate><content:encoded>&lt;h1&gt;직렬화&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;객체의 상태를 저장하기 위해서 객체를 byte stream 으로 변환하는 것&lt;/strong&gt;을 의미한다. 그 반대는 &lt;strong&gt;deserialization(역직렬화)&lt;/strong&gt; 라고 한다.&lt;br&gt;
흠.. 직렬화를 알고 싶었는데 stream?이 또 뭐란 말인가? 컴퓨터의 stream에 대한 정의는 다음과 같다.&lt;/p&gt;
&lt;h2&gt;스트림&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;배열이나 문자열 같은 데이터 컬렉션&lt;/strong&gt;을 말하며, &lt;strong&gt;자료를 입출력하기 위하여 사용하는 것&lt;/strong&gt;이다. 프로그램과 입출력 장치 사이에서 입출력 자료들을 중계하는 역할을 담당한다. 즉, 입출력 과정에서 데이터들이 자유롭게 움직일 수 있도록 중간 다리 역할을 함&lt;/p&gt;
&lt;p&gt;보통 직렬화는 서로 다른 패러다임의 프로그램의 입출력 데이터가 이동되어야 할 때 사용하는데,&lt;br&gt;
사실 이 직렬화의 개념을 이해하기 위해선 &lt;strong&gt;마샬링&lt;/strong&gt;이란 개념부터 이야기 해야 되는데..ㅋㅋ
그럼 마샬링이란건 또 뭘까!?&lt;/p&gt;
&lt;h2&gt;마샬링&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;객체의 메모리 구조를 저장이나 전송을 위해서 적당한 자료형태로 변형하는 것&lt;/strong&gt;을 의미함.&lt;/p&gt;
&lt;p&gt;Marshalling 은 보통 서로 다른 컴퓨터 혹은 서로 다른 프로그램 간에 데이터가 이동되어야 할 경우 사용됨.&lt;/p&gt;
&lt;p&gt;오케이 그럼 직렬화, 마샬링 에 대해서 어느정도 감을 잡긴 했는데 마샬링과 직렬화의 구체적인 차이는 뭘까 언뜻 보기엔 둘다 객체를 저장하려고 데이터 변형을 하는 것 같은데?&lt;/p&gt;
&lt;h2&gt;직렬화, 마샬링의 차이&lt;/h2&gt;
&lt;p&gt;마샬링은 매개 변수를 출발지에서부터 가져 오는 것이지만 직렬화는 구조화 된 데이터를 byte stream과 같은 기본 형식으로 복사하거나 복사하는 것이라고 한다.
이러한 의미에서 직렬화는 마샬링을 수행하는 수단 중 하나이며 일반적으로 값별 의미 전달을 구현합니다.&lt;/p&gt;
&lt;h1&gt;결론&lt;/h1&gt;
&lt;p&gt;아하 직렬화는 마샬링을 수행하는 수단 중 하나이자, 객체의 상태를 저장하기 위해서 byte stream 형태로 변환해주는 행위이구나&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using The Ghost Editor]]></title><description><![CDATA[Ghost uses a language called Markdown to format text. When you go to edit a post and see special characters and colours intertwined between…]]></description><link>https://thxwelchs.github.io/using-the-ghost-editor/</link><guid isPermaLink="false">https://thxwelchs.github.io/using-the-ghost-editor/</guid><pubDate>Mon, 02 Feb 2015 23:46:37 GMT</pubDate><content:encoded>&lt;p&gt;Ghost uses a language called &lt;strong&gt;Markdown&lt;/strong&gt; to format text.&lt;/p&gt;
&lt;p&gt;When you go to edit a post and see special characters and colours intertwined between the words, those are Markdown shortcuts which tell Ghost what to do with the words in your document. The biggest benefit of Markdown is that you can quickly apply formatting as you type, without needing to pause.&lt;/p&gt;
&lt;p&gt;At the bottom of the editor, you’ll find a toolbar with basic formatting options to help you get started as easily as possible. You’ll also notice that there’s a &lt;strong&gt;?&lt;/strong&gt; icon, which contains more advanced shortcuts.&lt;/p&gt;
&lt;p&gt;For now, though, let’s run you through some of the basics. You’ll want to make sure you’re editing this post in order to see all the Markdown we’ve used.&lt;/p&gt;
&lt;h2&gt;Formatting text&lt;/h2&gt;
&lt;p&gt;The most common shortcuts are of course, &lt;strong&gt;bold&lt;/strong&gt; text, &lt;em&gt;italic&lt;/em&gt; text, and &lt;a href=&quot;https://example.com&quot;&gt;hyperlinks&lt;/a&gt;. These generally make up the bulk of any document. You can type the characters out, but you can also use keyboard shortcuts.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;CMD/Ctrl + B&lt;/code&gt; for Bold&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;CMD/Ctrl + I&lt;/code&gt; for Italic&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;CMD/Ctrl + K&lt;/code&gt; for a Link&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;CMD/Ctrl + H&lt;/code&gt; for a Heading (Press multiple times for h2/h3/h4/etc)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;With just a couple of extra characters here and there, you’re well on your way to creating a beautifully formatted story.&lt;/p&gt;
&lt;h2&gt;Inserting images&lt;/h2&gt;
&lt;p&gt;Images in Markdown look just the same as links, except they’re prefixed with an exclamation mark, like this:&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;![Image description](/path/to/image.jpg)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1170px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4aec4f6250f1a9c047e5e7973c9e348b/5a523/computer.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.55290102389078%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABy30JgKRf/8QAGhAAAwEAAwAAAAAAAAAAAAAAAgMSAAEQEf/aAAgBAQABBQISncPAsXlLZGNldf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAQACAgMAAAAAAAAAAAAAAAERIQAQMUFh/9oACAEBAAY/ApiTLrXEj1hQHhr/xAAbEAADAAIDAAAAAAAAAAAAAAAAAREhMUFRgf/aAAgBAQABPyFzoxW0rria9MyDrUbDDEjrgp//2gAMAwEAAgADAAAAEEwv/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/ELqv/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QiP/EAB8QAQACAgAHAAAAAAAAAAAAAAEAESExQVFhcYGRof/aAAgBAQABPxDe4DnGeVxdSqEU8CX2SFpr0i+p+ixOoyhj7tlHh6Z//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Computer&quot;
        title=&quot;Computer&quot;
        src=&quot;/static/4aec4f6250f1a9c047e5e7973c9e348b/58f70/computer.jpg&quot;
        srcset=&quot;/static/4aec4f6250f1a9c047e5e7973c9e348b/3c01f/computer.jpg 293w,
/static/4aec4f6250f1a9c047e5e7973c9e348b/e1991/computer.jpg 585w,
/static/4aec4f6250f1a9c047e5e7973c9e348b/58f70/computer.jpg 1170w,
/static/4aec4f6250f1a9c047e5e7973c9e348b/5a523/computer.jpg 1200w&quot;
        sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Most Markdown editors don’t make you type this out, though. In Ghost you can click on the image icon in the toolbar at the bottom of the editor, or you can just click and drag an image from your desktop directly into the editor. Both will upload the image for you and generate the appropriate Markdown.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Important Note:&lt;/strong&gt; Ghost does not currently have automatic image resizing, so it’s always a good idea to make sure your images aren’t gigantic files &lt;strong&gt;before&lt;/strong&gt; uploading them to Ghost.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Making lists&lt;/h2&gt;
&lt;p&gt;Lists in HTML are a formatting nightmare, but in Markdown they become an absolute breeze with just a couple of characters and a bit of smart automation. For numbered lists, just write out the numbers. For bullet lists, just use &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;-&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;+&lt;/code&gt;. Like this:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Crack the eggs over a bowl&lt;/li&gt;
&lt;li&gt;Whisk them together&lt;/li&gt;
&lt;li&gt;Make an omelette&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Remember to buy milk&lt;/li&gt;
&lt;li&gt;Feed the cat&lt;/li&gt;
&lt;li&gt;Come up with idea for next story&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Adding quotes&lt;/h2&gt;
&lt;p&gt;When you want to pull out a particularly good excerpt in the middle of a piece, you can use &lt;code class=&quot;language-text&quot;&gt;&amp;gt;&lt;/code&gt; at the beginning of a paragraph to turn it into a Blockquote. You might’ve seen this formatting before in email clients.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A well placed quote guides a reader through a story, helping them to understand the most important points being made&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;All themes handles blockquotes slightly differently. Sometimes they’ll look better kept shorter, while other times you can quote fairly hefty amounts of text and get away with it. Generally, the safest option is to use blockquotes sparingly.&lt;/p&gt;
&lt;h2&gt;Dividing things up&lt;/h2&gt;
&lt;p&gt;If you’re writing a piece in parts and you just feel like you need to divide a couple of sections distinctly from each other, a horizontal rule might be just what you need. Dropping &lt;code class=&quot;language-text&quot;&gt;---&lt;/code&gt; on a new line will create a sleek divider, anywhere you want it.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;This should get you going with the vast majority of what you need to do in the editor, but if you’re still curious about more advanced tips then check out the &lt;a href=&quot;/advanced-markdown/&quot;&gt;Advanced Markdown Guide&lt;/a&gt; - or if you’d rather learn about how Ghost taxononomies work, we’ve got a overview of &lt;a href=&quot;/using-tags/&quot;&gt;how to use Ghost tags&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The Purpose of Education]]></title><description><![CDATA[As I engage in the so-called “bull sessions” around and about the school, I too often find that most college men have a misconception of the…]]></description><link>https://thxwelchs.github.io/purpose-of-education/</link><guid isPermaLink="false">https://thxwelchs.github.io/purpose-of-education/</guid><pubDate>Mon, 20 Aug 2012 15:11:55 GMT</pubDate><content:encoded>&lt;p&gt;As I engage in the so-called “bull sessions” around and about the school, I too often find that most college men have a misconception of the purpose of education. Most of the “brethren” think that education should equip them with the proper instruments of exploitation so that they can forever trample over the masses. Still others think that education should furnish them with noble ends rather than means to an end.&lt;/p&gt;
&lt;p&gt;It seems to me that education has a two-fold function to perform in the life of man and in society: the one is utility and the other is culture. Education must enable a man to become more efficient, to achieve with increasing facility the ligitimate goals of his life.&lt;/p&gt;
&lt;p&gt;Education must also train one for quick, resolute and effective thinking. To think incisively and to think for one’s self is very difficult. We are prone to let our mental life become invaded by legions of half truths, prejudices, and propaganda. At this point, I often wonder whether or not education is fulfilling its purpose. A great majority of the so-called educated people do not think logically and scientifically. Even the press, the classroom, the platform, and the pulpit in many instances do not give us objective and unbiased truths. To save man from the morass of propaganda, in my opinion, is one of the chief aims of education. Education must enable one to sift and weigh evidence, to discern the true from the false, the real from the unreal, and the facts from the fiction.&lt;/p&gt;
&lt;p&gt;The function of education, therefore, is to teach one to think intensively and to think critically. But education which stops with efficiency may prove the greatest menace to society. The most dangerous criminal may be the man gifted with reason, but with no morals.&lt;/p&gt;
&lt;p&gt;The late Eugene Talmadge, in my opinion, possessed one of the better minds of Georgia, or even America. Moreover, he wore the Phi Beta Kappa key. By all measuring rods, Mr. Talmadge could think critically and intensively; yet he contends that I am an inferior being. Are those the types of men we call educated?&lt;/p&gt;
&lt;p&gt;We must remember that intelligence is not enough. Intelligence plus character—that is the goal of true education. The complete education gives one not only power of concentration, but worthy objectives upon which to concentrate. The broad education will, therefore, transmit to one not only the accumulated knowledge of the race but also the accumulated experience of social living.&lt;/p&gt;
&lt;p&gt;If we are not careful, our colleges will produce a group of close-minded, unscientific, illogical propagandists, consumed with immoral acts. Be careful, “brethren!” Be careful, teachers!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Gettysburg Address]]></title><description><![CDATA[Fourscore and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the…]]></description><link>https://thxwelchs.github.io/gettysburg-address/</link><guid isPermaLink="false">https://thxwelchs.github.io/gettysburg-address/</guid><pubDate>Thu, 19 Nov 1863 10:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Fourscore and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.&lt;/p&gt;
&lt;p&gt;Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.&lt;/p&gt;
&lt;p&gt;But, in a larger sense, we can not dedicate-we can not consecrate-we can not hallow-this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us-that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion-that we here highly resolve that these dead shall not have died in vain-that this nation, under God, shall have a new birth of freedom-and that government of the people, by the people, for the people shall not perish from the earth.&lt;/p&gt;</content:encoded></item></channel></rss>